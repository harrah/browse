<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/matching/ParallelMatching.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * Copyright 2007 Google Inc. All Rights Reserved.
 * Author: bqe@google.com (Burak Emir)
 */
// $Id: ParallelMatching.scala 18588 2009-08-27 13:21:36Z extempore $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> matching

<span class="keyword">import</span> util.Position
<span class="keyword">import</span> collection._
<span class="keyword">import</span> mutable.BitSet
<span class="keyword">import</span> immutable.IntMap
<span class="keyword">import</span> MatchUtil._

/** Translation of match expressions.
 *
 *  `p':  pattern
 *  `g':  guard
 *  `bx': body index
 *
 *   internal representation is (tvars:List[Symbol], rows:List[Row])
 *
 *         tmp1      tmp_n
 *    Row( p_11  ...  p_1n   g_1  b_1 ) + subst
 *
 *    Row( p_m1  ...  p_mn   g_m  b_m ) + subst
 *
 * Implementation based on the algorithm described in
 *
 *   &quot;A Term Pattern-Match Compiler Inspired by Finite Automata Theory&quot;
 *   Mikael Pettersson
 *   ftp://ftp.ida.liu.se/pub/labs/pelab/papers/cc92pmc.ps.gz
 *
 *  @author Burak Emir
 */
<span class="keyword">trait</span> <a title="trait ParallelMatching extends java.lang.Object with scala.tools.nsc.ast.TreeDSL with ScalaObject" id="19323">ParallelMatching</a> <span title="ScalaObject" class="keyword">extends</span> ast.<a href="../ast/TreeDSL.scala.html#11895" title="scala.tools.nsc.ast.TreeDSL">TreeDSL</a> {
  self: transform.ExplicitOuter <span class="keyword">with</span> PatternNodes =&gt;
  
  // debugging var, set to true to see how sausages are made
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Boolean" id="79271">trace</a> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">import</span> global.{ typer =&gt; _, _ }
  <span class="keyword">import</span> definitions.{ AnyRefClass, EqualsPatternClass, IntClass, getProductArgs, productProj }
  <span class="keyword">import</span> symtab.Flags
  <span class="keyword">import</span> Types._
  <span class="keyword">import</span> CODE._
  <span class="keyword">import</span> scala.Function.tupled
 
  <span class="keyword">object</span> <a title="object ParallelMatching.this.Implicits" id="79279">Implicits</a> <span title="ScalaObject">{</span>
    <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit scala.tools.nsc.matching.ParallelMatching.Implicits.mkPattern : (t: ParallelMatching.this.global.Tree)ParallelMatching.this.Pattern" id="81152">mkPattern</a>(<a title="ParallelMatching.this.global.Tree" id="535746">t</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>) = <a href="#535750" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.Pattern">Pattern</a>(<a href="#535746" title="ParallelMatching.this.global.Tree">t</a>)    
  }
  <span class="keyword">import</span> Implicits._
  
  <span class="keyword">def</span> <a title="(body: =&gt; Unit)Unit" id="79282">ifDebug</a>(<a title="=&gt; Unit" id="535783">body</a>: =&gt; Unit): <span title="Unit">Unit</span>          = { <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) <a href="#535783" title="=&gt; Unit">body</a> }
  <span class="keyword">def</span> <a title="(msg: =&gt; String)Unit" id="79283">DBG</a>(<a title="=&gt; String" id="535787">msg</a>: =&gt; String): <span title="Unit">Unit</span>             = { <a href="#79282" title="(body: =&gt; Unit)Unit">ifDebug</a>(<span title="(x: Any)Unit">println</span>(<a href="#535787" title="=&gt; String">msg</a>)) }
  
  <span class="keyword">def</span> <a title="(f: String,xs: Any*)Unit" id="79284">TRACE</a>(<a title="String" id="535795">f</a>: <span title="String">String</span>, <a title="Any*" id="535796">xs</a>: <a title="Any*" id="4178">Any</a>*): <span title="Unit">Unit</span>      = { <span title="Unit" class="keyword">if</span> (<a href="#79271" title="=&gt; Boolean">trace</a>) <span title="(x: Any)Unit">println</span>(<span title="Any" class="keyword">if</span> (<a href="#535796" title="Any*">xs</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#535795" title="String">f</a> <span class="keyword">else</span> <a href="#535795" title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString">f</a>.<span title="(args: Any*)String">format</span>(<a href="#535796" title="Any*">xs</a> : _*)) }
  <span class="keyword">def</span> <a title="[T](s: String,x: T)T" id="79285">logAndReturn</a>[<a title="&gt;: Nothing &lt;: Any" id="79287">T</a>](<a title="String" id="535839">s</a>: <span title="String">String</span>, <a title="T" id="535840">x</a>: <a href="#79287" title="T">T</a>): <a href="#79287" title="T">T</a>   = { <a href="../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<a href="#535839" title="(x$1: Any)java.lang.String">s</a> + <a href="#535840" title="T">x</a>.<span title="()java.lang.String">toString</span>) ; <a href="#535840" title="T">x</a> }
  <span class="keyword">def</span> <a title="[T](s: String,x: T)T" id="79288">traceAndReturn</a>[<a title="&gt;: Nothing &lt;: Any" id="79290">T</a>](<a title="String" id="535850">s</a>: <span title="String">String</span>, <a title="T" id="535851">x</a>: <a href="#79290" title="T">T</a>): <a href="#79290" title="T">T</a> = { <a href="#79284" title="(f: String,xs: Any*)Unit">TRACE</a>(<a href="#535850" title="(x$1: Any)java.lang.String">s</a> + <a href="#535851" title="T">x</a>.<span title="()java.lang.String">toString</span>) ; <a href="#535851" title="T">x</a> }
  
  // Tests on misc
  <span class="keyword">def</span> <a title="(tag: Int)Boolean" id="79291">isSwitchableTag</a>(<a title="Int" id="535861">tag</a>: <span title="Int">Int</span>)   = <a href="../ast/TreeDSL.scala.html#42477" title="(x: Int)(f: PartialFunction[Int,Boolean])Boolean">cond</a>(<a href="#535861" title="Int">tag</a>)       <a href="#535874" title="Boolean">{</a> <span title="Boolean(true)" class="keyword">case</span> <span title="Int(3)">ByteTag</span> | <span title="Int(4)">ShortTag</span> | <span title="Int(6)">IntTag</span> | <span title="Int(5)">CharTag</span> =&gt; <span title="Boolean(true)" class="keyword">true</span> }
  <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)Boolean" id="79292">isSwitchableConst</a>(<a title="ParallelMatching.this.global.Tree" id="535877">t</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>)  = <a href="../ast/TreeDSL.scala.html#42477" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,Boolean])Boolean">cond</a>(<a href="../ast/TreeDSL.scala.html#42488" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#535877" title="ParallelMatching.this.global.Tree">t</a>)) <a href="#535895" title="Boolean">{</a> <span title="Boolean" class="keyword">case</span> Literal(<a title="ParallelMatching.this.global.Constant" id="535899">x</a>: <a href="../symtab/Constants.scala.html#26513" title="ParallelMatching.this.global.Constant">Constant</a>) =&gt; <a href="#79291" title="(tag: Int)Boolean">isSwitchableTag</a>(<a href="#535899" title="ParallelMatching.this.global.Constant">x</a>.<a href="../symtab/Constants.scala.html#42809" title="=&gt; Int">tag</a>) }

  // Tests on Trees
  <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)Boolean" id="79293">isStar</a>(<a title="ParallelMatching.this.global.Tree" id="535906">t</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>)             = <a href="../ast/TreeDSL.scala.html#42477" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,Boolean])Boolean">cond</a>(<a href="../ast/TreeDSL.scala.html#42488" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#535906" title="ParallelMatching.this.global.Tree">t</a>)) <a href="#535922" title="Boolean">{</a> <span title="Boolean" class="keyword">case</span> Star(<a title="ParallelMatching.this.global.Tree" id="535924">q</a>) =&gt; <a href="#79296" title="(t: ParallelMatching.this.global.Tree)Boolean">isDefaultPattern</a>(<a href="#535924" title="ParallelMatching.this.global.Tree">q</a>) }
  <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)Boolean" id="79294">isAlternative</a>(<a title="ParallelMatching.this.global.Tree" id="535978">t</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>)      = <a href="../ast/TreeDSL.scala.html#42477" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,Boolean])Boolean">cond</a>(<a href="../ast/TreeDSL.scala.html#42488" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#535978" title="ParallelMatching.this.global.Tree">t</a>)) <a href="#535994" title="Boolean">{</a> <span title="Boolean(true)" class="keyword">case</span> Alternative(_) =&gt; <span title="Boolean(true)" class="keyword">true</span> }
  <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)Boolean" id="79295">isRightIgnoring</a>(<a title="ParallelMatching.this.global.Tree" id="536000">t</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>)    = <a href="../ast/TreeDSL.scala.html#42477" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,Boolean])Boolean">cond</a>(<a href="../ast/TreeDSL.scala.html#42488" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#536000" title="ParallelMatching.this.global.Tree">t</a>)) <a href="#536016" title="Boolean">{</a> <span title="Boolean" class="keyword">case</span> ArrayValue(_, <a title="List[ParallelMatching.this.global.Tree]" id="536019">xs</a>) <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#536019" title="List[ParallelMatching.this.global.Tree]">xs</a>.<span title="=&gt; Boolean">isEmpty</span> =&gt; <a href="#79293" title="(t: ParallelMatching.this.global.Tree)Boolean">isStar</a>(<a href="#536019" title="List[ParallelMatching.this.global.Tree]">xs</a>.<span title="=&gt; ParallelMatching.this.global.Tree">last</span>) }
  <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)Boolean" id="79296">isDefaultPattern</a>(<a title="ParallelMatching.this.global.Tree" id="535927">t</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>)   = <a href="../ast/TreeDSL.scala.html#42477" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,Boolean])Boolean">cond</a>(<a href="../ast/TreeDSL.scala.html#42488" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#535927" title="ParallelMatching.this.global.Tree">t</a>)) <a href="#535943" title="Boolean">{</a> <span title="Boolean(true)" class="keyword">case</span> <a href="../ast/Trees.scala.html#26602" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a> | <a href="../ast/TreeDSL.scala.html#535946" title="(other: Any)Boolean">WILD</a>() =&gt; <span title="Boolean(true)" class="keyword">true</span> }
  <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)Boolean" id="79297">isLabellable</a>(<a title="ParallelMatching.this.global.Tree" id="536026">t</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>)       = <span title="=&gt; Boolean">!</span><a href="../ast/TreeDSL.scala.html#42477" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,Boolean])Boolean">cond</a>(<a href="#536026" title="ParallelMatching.this.global.Tree">t</a>)        <a href="#536039" title="Boolean">{</a> <span title="Boolean(true)" class="keyword">case</span> _: <a href="../ast/Trees.scala.html#26700" title="ParallelMatching.this.global.Throw">Throw</a> | _: <a href="../ast/Trees.scala.html#26737" title="ParallelMatching.this.global.Literal">Literal</a> =&gt; <span title="Boolean(true)" class="keyword">true</span> }
  <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)Boolean" id="79298">isModule</a>(<a title="ParallelMatching.this.global.Tree" id="536042">t</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>)           = <a href="#536042" title="ParallelMatching.this.global.Tree">t</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26917" title="(x$1: Boolean)Boolean">isModule</a> || <a href="#536042" title="ParallelMatching.this.global.Tree">t</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; ParallelMatching.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30179" title="=&gt; ParallelMatching.this.global.Symbol">termSymbol</a>.<a href="../symtab/Symbols.scala.html#26917" title="=&gt; Boolean">isModule</a>
  
  // For isDefaultPattern, to do?
  // cond(tree) { case Typed(WILD(), _) if tree.tpe &lt;:&lt; scrut.tpe  =&gt; true }
  // null check?

  // this won't compile in compiler, but works in REPL - ?
  // val List(isInt, isChar, isBoolean, isArray, isNothing) = {
  //   import definitions._
  //   def testFor(s: Symbol): Type =&gt; Boolean = (tpe: Type) =&gt; tpe.typeSymbol eq s
  // 
  //   List(IntClass, CharClass, BooleanClass, ArrayClass, NothingClass) map testFor
  // }
  
  case <span class="keyword">class</span> <a title="class Pattern extends java.lang.Object with ScalaObject with Product" id="535750">Pattern</a><span title="ScalaObject">(</span><a title="ParallelMatching.this.global.Tree" id="535774">tree</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>) {
    <span class="keyword">import</span> definitions._
    <span class="keyword">lazy</span> <span class="keyword">val</span>    <a title="ParallelMatching.this.global.Symbol" id="535757">sym</a> = <a href="#535774" title="=&gt; ParallelMatching.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a>
    <span class="keyword">lazy</span> <span class="keyword">val</span>    <a title="ParallelMatching.this.global.Type" id="535759">tpe</a> = <a href="#535774" title="=&gt; ParallelMatching.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; ParallelMatching.this.global.Type">tpe</a>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ParallelMatching.this.global.Type" id="535761">prefix</a> = <a href="#535758" title="=&gt; ParallelMatching.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30190" title="=&gt; ParallelMatching.this.global.Type">prefix</a>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ParallelMatching.this.global.Type" id="535763">tpeIfHead</a>  = <a href="../ast/TreeDSL.scala.html#42488" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#535774" title="=&gt; ParallelMatching.this.global.Tree">tree</a>) <span title="ParallelMatching.this.global.Type" class="keyword">match</span> {
      <span title="ParallelMatching.this.global.Type" class="keyword">case</span> <a title="ParallelMatching.this.global.Tree" id="536052">p</a> @ (_:<a href="../ast/Trees.scala.html#26732" title="ParallelMatching.this.global.Ident">Ident</a> | _:<a href="../ast/Trees.scala.html#26728" title="ParallelMatching.this.global.Select">Select</a>) =&gt; <a href="../symtab/Types.scala.html#26287" title="(pre: ParallelMatching.this.global.Type,sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.Type">singleType</a>(<a href="#81152" title="implicit scala.tools.nsc.matching.ParallelMatching.Implicits.mkPattern : (t: ParallelMatching.this.global.Tree)ParallelMatching.this.Pattern">stripped</a>.<a href="#535760" title="=&gt; ParallelMatching.this.global.Type">prefix</a>, <a href="#81152" title="implicit scala.tools.nsc.matching.ParallelMatching.Implicits.mkPattern : (t: ParallelMatching.this.global.Tree)ParallelMatching.this.Pattern">stripped</a>.<a href="#535756" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>) //should be singleton object
      <span title="ParallelMatching.this.global.Type" class="keyword">case</span> <a href="PatternNodes.scala.html#536120" title="(x: ParallelMatching.this.global.Tree)Option[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Type, List[ParallelMatching.this.global.Tree])]">__UnApply</a>(_,<a title="ParallelMatching.this.global.Type" id="536183">argtpe</a>,_)    =&gt; <a href="#536183" title="ParallelMatching.this.global.Type">argtpe</a>
      <span title="ParallelMatching.this.global.Type" class="keyword">case</span> _                        =&gt; <a href="#535758" title="=&gt; ParallelMatching.this.global.Type">tpe</a>
    }

    <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="535764">isDefault</a>       = <a href="#79296" title="(t: ParallelMatching.this.global.Tree)Boolean">isDefaultPattern</a>(<a href="#535774" title="=&gt; ParallelMatching.this.global.Tree">tree</a>)
    
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a href="PatternNodes.scala.html#536059" title="(x: ParallelMatching.this.global.Tree)Option[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Tree)]">Strip</a><a href="#535768" title="(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Tree)" id="535766">(</a><a href="#535765" title="List[ParallelMatching.this.global.Symbol]" id="535768">boundVariables</a>, <a href="#535765" title="ParallelMatching.this.global.Tree" id="535770">stripped</a>) = <a href="#535774" title="=&gt; ParallelMatching.this.global.Tree">tree</a>

    /** returns true if pattern tests an object */
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(head: ParallelMatching.this.global.Type)Boolean" id="535771">isObjectTest</a>(<a title="ParallelMatching.this.global.Type" id="536193">head</a>: <a href="../symtab/Types.scala.html#26205" title="ParallelMatching.this.global.Type">Type</a>) =
      <span title="(x$1: Boolean)Boolean">(</span><a href="#535756" title="(x$1: AnyRef)Boolean">sym</a> ne <span title="Null(null)" class="keyword">null</span>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> (<a href="#535756" title="(x$1: AnyRef)Boolean">sym</a> != <a href="../symtab/Symbols.scala.html#26134" title="object ParallelMatching.this.global.NoSymbol">NoSymbol</a>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#535760" title="=&gt; ParallelMatching.this.global.Type">prefix</a>.<a href="../symtab/Types.scala.html#30175" title="=&gt; Boolean">isStable</a> &amp;&amp; (<a href="../symtab/Types.scala.html#30236" title="(that: ParallelMatching.this.global.Type)Boolean">head</a> =:= <a href="../symtab/Types.scala.html#26287" title="(pre: ParallelMatching.this.global.Type,sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.Type">singleType</a>(<a href="#535760" title="=&gt; ParallelMatching.this.global.Type">prefix</a>, <a href="#535756" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>))
  }

  <span class="keyword">import</span> collection.mutable.{ HashMap, ListBuffer }
  <span class="keyword">class</span> <a title="class MatchMatrix extends java.lang.Object with ScalaObject" id="79303">MatchMatrix</a><span title="ScalaObject">(</span><a title="ParallelMatching.this.MatchMatrixContext" id="81109">context</a>: <a href="TransMatcher.scala.html#79172" title="ParallelMatching.this.MatchMatrixContext">MatchMatrixContext</a>, <a title="ParallelMatching.this.MatchMatrixInit" id="81110">data</a>: <a href="TransMatcher.scala.html#79175" title="ParallelMatching.this.MatchMatrixInit">MatchMatrixInit</a>) {
    <span class="keyword">import</span> context._
    <span class="keyword">val</span> MatchMatrixInit<a href="#81026" title="(List[ParallelMatching.this.global.Symbol], List[ParallelMatching.this.global.CaseDef], ParallelMatching.this.global.Tree)">(</a><a href="#81025" title="List[ParallelMatching.this.global.Symbol]" id="81026">roots</a>, <a href="#81025" title="List[ParallelMatching.this.global.CaseDef]" id="81028">cases</a>, <a href="#81025" title="ParallelMatching.this.global.Tree" id="81030">failTree</a>) = <a href="#81110" title="ParallelMatching.this.MatchMatrixInit">data</a>
    
    <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[Int,ParallelMatching.this.global.Symbol]" id="81032">labels</a>    = <span title="scala.collection.mutable.HashMap[Int,ParallelMatching.this.global.Symbol]" class="keyword">new</span> <a title="scala.collection.mutable.HashMap[Int,ParallelMatching.this.global.Symbol]" id="24954">HashMap</a>[Int, Symbol]()
    <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[ParallelMatching.this.global.Symbol]" id="81034">shortCuts</a> = <span title="scala.collection.mutable.ListBuffer[ParallelMatching.this.global.Symbol]" class="keyword">new</span> <a title="scala.collection.mutable.ListBuffer[ParallelMatching.this.global.Symbol]" id="24819">ListBuffer</a>[Symbol]()
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.collection.mutable.BitSet" id="81037">reached</a>   = <a title="(initSize: Int)scala.collection.mutable.BitSet" id="536303" class="keyword">new</a> <a title="scala.collection.mutable.BitSet" id="24828">BitSet</a>(<a href="#81040" title="=&gt; List[MatchMatrix.this.FinalState]">targets</a>.<span title="=&gt; Int">size</span>)
    
    <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="(List[MatchMatrix.this.Row], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])" id="81039">expandResult</a>       = <a href="#81105" title="(roots: List[ParallelMatching.this.global.Symbol],cases: List[ParallelMatching.this.global.Tree])(List[MatchMatrix.this.Row], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])">expand</a>(<a href="#81026" title="=&gt; List[ParallelMatching.this.global.Symbol]">roots</a>, <a href="#81028" title="=&gt; List[ParallelMatching.this.global.CaseDef]">cases</a>)
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[MatchMatrix.this.FinalState]" id="81041">targets</a>: <span title="List[MatchMatrix.this.FinalState]">List</span>[FinalState]  = <a href="#81038" title="=&gt; (List[MatchMatrix.this.Row], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])">expandResult</a>.<span title="=&gt; List[MatchMatrix.this.FinalState]">_2</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[List[ParallelMatching.this.global.Symbol]]" id="81043">vss</a>: <span title="List[List[ParallelMatching.this.global.Symbol]]">List</span>[List[Symbol]]    = <a href="#81038" title="=&gt; (List[MatchMatrix.this.Row], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])">expandResult</a>.<span title="=&gt; List[List[ParallelMatching.this.global.Symbol]]">_3</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="MatchMatrix.this.Rep" id="81045">expansion</a>: <a href="#540070" title="MatchMatrix.this.Rep">Rep</a>             = <a href="#81053" title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">make</a>(<a href="#81026" title="=&gt; List[ParallelMatching.this.global.Symbol]">roots</a>, <a href="#81038" title="=&gt; (List[MatchMatrix.this.Row], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])">expandResult</a>.<span title="=&gt; List[MatchMatrix.this.Row]">_1</span>)

    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(theLabel: ParallelMatching.this.global.Symbol)Int" id="81046">shortCut</a>(<a title="ParallelMatching.this.global.Symbol" id="536419">theLabel</a>: <a href="../symtab/Symbols.scala.html#26127" title="ParallelMatching.this.global.Symbol">Symbol</a>): <span title="Int">Int</span> = {
      <a href="#81034" title="(x: ParallelMatching.this.global.Symbol)MatchMatrix.this.shortCuts.type" id="61580">shortCuts</a> += <a href="#536419" title="ParallelMatching.this.global.Symbol">theLabel</a>
      <span title="=&gt; Int">-</span><a href="#81034" title="=&gt; scala.collection.mutable.ListBuffer[ParallelMatching.this.global.Symbol]">shortCuts</a>.<a title="=&gt; Int" id="61576">length</a>
    }

    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree" id="81047">cleanup</a>(<a title="ParallelMatching.this.global.Tree" id="81340">tree</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a> = {
      // Extractors which can spot pure true/false expressions
      // even through the haze of braces
      <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class SeeThroughBlocks[T] extends java.lang.Object with ScalaObject" id="536452">SeeThroughBlocks</a>[<a title="&gt;: Nothing &lt;: Any" id="536453">T</a>] <span title="ScalaObject">{</span>
        <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.Tree)T" id="536463">unapplyImpl</a>(<a title="ParallelMatching.this.global.Tree" id="536468">x</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>): <a href="#536453" title="T">T</a>
        <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.Tree)T" id="536464">unapply</a>(<a title="ParallelMatching.this.global.Tree" id="536470">x</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>): <a href="#536453" title="T">T</a> = <a href="#536470" title="ParallelMatching.this.global.Tree">x</a> <span title="T" class="keyword">match</span> {
          <span title="T" class="keyword">case</span> Block(<span title="object Nil">Nil</span>, <a title="ParallelMatching.this.global.Tree" id="536474">expr</a>)         =&gt; <a href="#536464" title="(x: ParallelMatching.this.global.Tree)T">unapply</a>(<a href="#536474" title="ParallelMatching.this.global.Tree">expr</a>)
          <span title="T" class="keyword">case</span> _                        =&gt; <a href="#536463" title="(x: ParallelMatching.this.global.Tree)T">unapplyImpl</a>(<a href="#536470" title="ParallelMatching.this.global.Tree">x</a>)
        }
      }
      <span class="keyword">object</span> <a title="object IsTrue" id="536454">IsTrue</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#536452" title="SeeThroughBlocks[Boolean]">SeeThroughBlocks</a>[Boolean] {
        <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.Tree)Boolean" id="536482">unapplyImpl</a>(<a title="ParallelMatching.this.global.Tree" id="536486">x</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>): <span title="Boolean">Boolean</span> = <a href="../ast/Trees.scala.html#29385" title="(that: ParallelMatching.this.global.Tree)Boolean">x</a> equalsStructure <a href="../ast/TreeDSL.scala.html#42491" title="=&gt; ParallelMatching.this.global.Literal">TRUE</a>
      }
      <span class="keyword">object</span> <a title="object IsFalse" id="536456">IsFalse</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#536452" title="SeeThroughBlocks[Boolean]">SeeThroughBlocks</a>[Boolean] {
        <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.Tree)Boolean" id="536492">unapplyImpl</a>(<a title="ParallelMatching.this.global.Tree" id="536496">x</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>): <span title="Boolean">Boolean</span> = <a href="../ast/Trees.scala.html#29385" title="(that: ParallelMatching.this.global.Tree)Boolean">x</a> equalsStructure <a href="../ast/TreeDSL.scala.html#42493" title="=&gt; ParallelMatching.this.global.Literal">FALSE</a>
      }
      <span class="keyword">object</span> <a title="object lxtt" id="536458">lxtt</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../ast/Trees.scala.html#26773" title="ParallelMatching.this.global.Transformer">Transformer</a> {
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree" id="536508">transform</a>(<a title="ParallelMatching.this.global.Tree" id="536512">tree</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a> = <a href="#536512" title="ParallelMatching.this.global.Tree">tree</a> <span title="ParallelMatching.this.global.Tree" class="keyword">match</span> {
          <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a title="ParallelMatching.this.global.Block" id="536515">blck</a> @ Block(<a title="List[ParallelMatching.this.global.Tree]" id="536518">vdefs</a>, <a title="ParallelMatching.this.global.LabelDef" id="536519">ld</a> @ LabelDef(<a title="ParallelMatching.this.global.Name" id="536525">name</a>, <a title="List[ParallelMatching.this.global.Ident]" id="536526">params</a>, <a title="ParallelMatching.this.global.Tree" id="536527">body</a>)) =&gt;
            <span class="keyword">val</span> <a title="Int" id="536532">bx</a> = <a href="#81051" title="(label: ParallelMatching.this.global.Symbol)Int">labelIndex</a>(<a href="#536519" title="ParallelMatching.this.global.LabelDef">ld</a>.<a href="../ast/Trees.scala.html#48485" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a>)
            <span title="ParallelMatching.this.global.Tree" class="keyword">if</span> (<a href="#536532" title="(x$1: Int)Boolean">bx</a> <span title="(x$1: Boolean)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#81050" title="(bx: Int)Boolean">isReachedTwice</a>(<a href="#536532" title="Int">bx</a>)) <a href="TransMatcher.scala.html#79387" title="(vds: List[ParallelMatching.this.global.Tree],exp: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">squeezedBlock</a>(<a href="#536518" title="List[ParallelMatching.this.global.Tree]">vdefs</a>, <a href="#536527" title="ParallelMatching.this.global.Tree">body</a>)
            <span class="keyword">else</span> <a href="#536515" title="ParallelMatching.this.global.Block">blck</a>

          <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a title="ParallelMatching.this.global.Tree" id="536619">t</a> =&gt;
            <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45473" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">transform</a>(<a href="#536619" title="ParallelMatching.this.global.Tree">t</a> <span title="ParallelMatching.this.global.Tree" class="keyword">match</span> {
              // note - it is too early for any other true/false related optimizations
              <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> If(<a title="ParallelMatching.this.global.Tree" id="536625">cond</a>, <a href="#536464" title="(x: ParallelMatching.this.global.Tree)Boolean">IsTrue</a>(), <a href="#536464" title="(x: ParallelMatching.this.global.Tree)Boolean">IsFalse</a>())  =&gt; <a href="#536625" title="ParallelMatching.this.global.Tree">cond</a>
                            
              <span title="ParallelMatching.this.global.If" class="keyword">case</span> If(<a title="ParallelMatching.this.global.Tree" id="536639">cond1</a>, If(<a title="ParallelMatching.this.global.Tree" id="536643">cond2</a>, <a title="ParallelMatching.this.global.Tree" id="536644">thenp</a>, <a title="ParallelMatching.this.global.Tree" id="536645">elsep1</a>), <a title="ParallelMatching.this.global.Tree" id="536648">elsep2</a>) <span class="keyword">if</span> (<a href="../ast/Trees.scala.html#29385" title="(that: ParallelMatching.this.global.Tree)Boolean">elsep1</a> equalsStructure <a href="#536648" title="ParallelMatching.this.global.Tree">elsep2</a>) =&gt; 
                <a href="../ast/TreeDSL.scala.html#42524" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">IF</a> <a href="../ast/TreeDSL.scala.html#49788" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">(</a><a href="../ast/TreeDSL.scala.html#45068" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">cond1</a> AND <a href="#536643" title="ParallelMatching.this.global.Tree">cond2</a>) <a href="../ast/TreeDSL.scala.html#49789" title="(elsep: ParallelMatching.this.global.Tree)ParallelMatching.this.global.If">THEN</a> <a href="#536644" title="ParallelMatching.this.global.Tree">thenp</a> ELSE <a href="#536645" title="ParallelMatching.this.global.Tree">elsep1</a>
              <span title="ParallelMatching.this.global.If" class="keyword">case</span> If(<a title="ParallelMatching.this.global.Tree" id="536704">cond1</a>, If(<a title="ParallelMatching.this.global.Tree" id="536708">cond2</a>, <a title="ParallelMatching.this.global.Tree" id="536709">thenp</a>, Apply(<a title="ParallelMatching.this.global.Tree" id="536712">jmp</a>, <span title="object Nil">Nil</span>)), <a title="ParallelMatching.this.global.LabelDef" id="536717">ld</a>: <a href="../ast/Trees.scala.html#26639" title="ParallelMatching.this.global.LabelDef">LabelDef</a>) <span class="keyword">if</span> <a href="#536712" title="ParallelMatching.this.global.Tree">jmp</a>.<a href="../ast/Trees.scala.html#29367" title="(x$1: AnyRef)Boolean">symbol</a> eq <a href="#536717" title="ParallelMatching.this.global.LabelDef">ld</a>.<a href="../ast/Trees.scala.html#48485" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a> =&gt; 
                <a href="../ast/TreeDSL.scala.html#42524" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">IF</a> <a href="../ast/TreeDSL.scala.html#49788" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">(</a><a href="../ast/TreeDSL.scala.html#45068" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">cond1</a> AND <a href="#536708" title="ParallelMatching.this.global.Tree">cond2</a>) <a href="../ast/TreeDSL.scala.html#49789" title="(elsep: ParallelMatching.this.global.Tree)ParallelMatching.this.global.If">THEN</a> <a href="#536709" title="ParallelMatching.this.global.Tree">thenp</a> ELSE <a href="#536717" title="ParallelMatching.this.global.LabelDef">ld</a>
              <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a title="ParallelMatching.this.global.Tree" id="536749">t</a> =&gt; <a href="#536749" title="ParallelMatching.this.global.Tree">t</a>
          })
        }
      }
      <span class="keyword">object</span> <a title="object resetTraverser" id="536460">resetTraverser</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../ast/Trees.scala.html#26774" title="ParallelMatching.this.global.Traverser">Traverser</a> {
        <span class="keyword">import</span> Flags._
        <span class="keyword">def</span> <a title="(vd: ParallelMatching.this.global.ValDef)Any" id="536754">reset</a>(<a title="ParallelMatching.this.global.ValDef" id="536759">vd</a>: <a href="../ast/Trees.scala.html#26619" title="ParallelMatching.this.global.ValDef">ValDef</a>) =
          <span title="Any" class="keyword">if</span> (<a href="#536759" title="ParallelMatching.this.global.ValDef">vd</a>.<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">symbol</a> hasFlag <span title="Long(2097152L)">SYNTHETIC</span>) <a href="#536759" title="ParallelMatching.this.global.ValDef">vd</a>.<a href="../symtab/Symbols.scala.html#26994" title="(mask: Long)ParallelMatching.this.global.Symbol">symbol</a> resetFlag (TRANS_FLAG<span title="Long(274877911040L)">|</span>MUTABLE)
            
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.Tree)Unit" id="536755">traverse</a>(<a title="ParallelMatching.this.global.Tree" id="536780">x</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>): <span title="Unit">Unit</span> = <a href="#536780" title="ParallelMatching.this.global.Tree">x</a> <span title="Unit" class="keyword">match</span> {
          <span title="Unit" class="keyword">case</span> <a title="ParallelMatching.this.global.ValDef" id="536783">vd</a>: <a href="../ast/Trees.scala.html#26619" title="ParallelMatching.this.global.ValDef">ValDef</a> =&gt; <a href="#536754" title="(vd: ParallelMatching.this.global.ValDef)Any">reset</a><span title="Unit">(</span><a href="#536783" title="ParallelMatching.this.global.ValDef">vd</a>)
          <span title="Unit" class="keyword">case</span> _          =&gt; <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#70825" title="(tree: ParallelMatching.this.global.Tree)Unit">traverse</a>(<a href="#536780" title="ParallelMatching.this.global.Tree">x</a>)
        }
      }

      <a href="../ast/TreeDSL.scala.html#42485" title="[T](f: (T) =&gt; Unit)(x: T)T">applyAndReturn</a><span title="(f: (ParallelMatching.this.global.Tree) =&gt; Unit)(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">[</span><a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>](<a href="#536755" title="(x: ParallelMatching.this.global.Tree)Unit">resetTraverser</a> traverse <a href="#536793" title="ParallelMatching.this.global.Tree">_</a>)(<a href="#536508" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">lxtt</a> transform <a href="#81340" title="ParallelMatching.this.global.Tree">tree</a>)
    }
    
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(bx: Int)Boolean" id="81048">isReached</a>(<a title="Int" id="81325">bx</a>: <span title="Int">Int</span>)        = <a href="#81032" title="(key: Int)Boolean" id="44446">labels</a> contains <a href="#81325" title="Int">bx</a>
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(bx: Int)Unit" id="81049">markReachedTwice</a>(<a title="Int" id="536804">bx</a>: <span title="Int">Int</span>) { <a href="#81036" title="(elem: Int)MatchMatrix.this.reached.type" id="536318">reached</a> <span title="Unit">+=</span> <a href="#536804" title="Int">bx</a> }
    
    /** @pre bx &lt; 0 || labelIndex(bx) != -1 */
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(bx: Int)Boolean" id="81050">isReachedTwice</a>(<a title="Int" id="536566">bx</a>: <span title="Int">Int</span>) = <span title="(x$1: Boolean)Boolean">(</span><a href="#536566" title="(x$1: Int)Boolean">bx</a> &lt; <span title="Int(0)" class="int">0</span>) || <a href="#81036" title="(elem: Int)Boolean" id="39339">reached</a>(<a href="#536566" title="Int">bx</a>)
    
    /* @returns bx such that labels(bx) eq label, -1 if no such bx exists */
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(label: ParallelMatching.this.global.Symbol)Int" id="81051">labelIndex</a>(<a title="ParallelMatching.this.global.Symbol" id="536533">label</a>: <a href="../symtab/Symbols.scala.html#26127" title="ParallelMatching.this.global.Symbol">Symbol</a>) = <a href="#81032" title="(p: ((Int, ParallelMatching.this.global.Symbol)) =&gt; Boolean)Option[(Int, ParallelMatching.this.global.Symbol)]" id="25286">labels</a> <span title="(f: ((Int, ParallelMatching.this.global.Symbol)) =&gt; Int)Option[Int]">find</span> (<a href="#536538" title="(Int, ParallelMatching.this.global.Symbol)">_</a>.<span title="(x$1: AnyRef)Boolean">_2</span> eq <a href="#536533" title="ParallelMatching.this.global.Symbol">label</a>) <span title="(default: =&gt; Int)Int">map</span> (<a href="#536547" title="(Int, ParallelMatching.this.global.Symbol)">_</a>.<span title="=&gt; Int">_1</span>) getOrElse (<span title="Int(-1)">-</span><span class="int">1</span>)

    /** first time bx is requested, a LabelDef is returned. next time, a jump.
     *  the function takes care of binding
     */
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(bx: Int,subst: ParallelMatching.this.Bindings)ParallelMatching.this.global.Tree" id="81052">requestBody</a>(<a title="Int" id="536830">bx</a>: <span title="Int">Int</span>, <a title="ParallelMatching.this.Bindings" id="536831">subst</a>: <a href="PatternNodes.scala.html#79252" title="ParallelMatching.this.Bindings">Bindings</a>): <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a> = {
      <span title="Unit" class="keyword">if</span> (<a href="#536830" title="(x$1: Int)Boolean">bx</a> &lt; <span title="Int(0)" class="int">0</span>) { // is shortcut
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Symbol" id="536855">jlabel</a> = <a href="#81034" title="(i: Int)ParallelMatching.this.global.Symbol" id="61700">shortCuts</a>(<span title="(x$1: Int)Int">-</span><a href="#536830" title="Int">bx</a>-<span title="Int(1)" class="int">1</span>)
        <span title="Nothing" class="keyword">return</span> <a href="../ast/Trees.scala.html#49125" title="(fun: ParallelMatching.this.global.Tree,args: List[ParallelMatching.this.global.Tree])ParallelMatching.this.global.Apply">Apply</a>(<a href="../ast/TreeDSL.scala.html#42532" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.gen.global.Tree">ID</a>(<a href="#536855" title="ParallelMatching.this.global.Symbol">jlabel</a>), <span title="object Nil">Nil</span>)
      }
      <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#81048" title="(bx: Int)Boolean">isReached</a>(<a href="#536830" title="Int">bx</a>)) { // first time this bx is requested
        // might be bound elsewhere
        <span class="keyword">val</span> <a href="#536915" title="(List[ParallelMatching.this.global.Symbol], List[ParallelMatching.this.global.Tree])">(</a><a href="#536914" title="List[ParallelMatching.this.global.Symbol]" id="536915">vsyms</a>, <a href="#536914" title="List[ParallelMatching.this.global.Tree]" id="536916">vdefs</a>) : <span title="(List[ParallelMatching.this.global.Symbol], List[ParallelMatching.this.global.Tree])">(</span>List[Symbol], List[Tree]) = <span title="object List">List</span>.<span title="(xs: List[(ParallelMatching.this.global.Symbol, ParallelMatching.this.global.analyzer.global.Tree)])(List[ParallelMatching.this.global.Symbol], List[ParallelMatching.this.global.analyzer.global.Tree])">unzip</span><span title="(List[ParallelMatching.this.global.Symbol], List[ParallelMatching.this.global.analyzer.global.Tree]) @unchecked">(</span>
          <span class="keyword">for</span> (<a title="ParallelMatching.this.global.Symbol" id="536948">v</a> &lt;- <a href="#81042" title="(n: Int)List[ParallelMatching.this.global.Symbol]">vss</a><span title="(f: (ParallelMatching.this.global.Symbol) =&gt; Traversable[(ParallelMatching.this.global.Symbol, ParallelMatching.this.global.analyzer.global.Tree)])(implicit bf: scala.collection.generic.BuilderFactory[(ParallelMatching.this.global.Symbol, ParallelMatching.this.global.analyzer.global.Tree),List[(ParallelMatching.this.global.Symbol, ParallelMatching.this.global.analyzer.global.Tree)],List[ParallelMatching.this.global.Symbol]])List[(ParallelMatching.this.global.Symbol, ParallelMatching.this.global.analyzer.global.Tree)]">(</span><a href="#536830" title="Int">bx</a>) ; <a title="ParallelMatching.this.global.Ident" id="536981">substv</a> &lt;- <a href="PatternNodes.scala.html#536839" title="(v: ParallelMatching.this.global.Symbol)Option[ParallelMatching.this.global.Ident]">subst</a><span title="(f: (ParallelMatching.this.global.Ident) =&gt; (ParallelMatching.this.global.Symbol, ParallelMatching.this.global.analyzer.global.Tree))Option[(ParallelMatching.this.global.Symbol, ParallelMatching.this.global.analyzer.global.Tree)]">(</span><a href="#536948" title="ParallelMatching.this.global.Symbol">v</a>)) <span class="keyword">yield</span> 
            <span title="(_1: ParallelMatching.this.global.Symbol,_2: ParallelMatching.this.global.analyzer.global.Tree)(ParallelMatching.this.global.Symbol, ParallelMatching.this.global.analyzer.global.Tree)">(</span><a href="#536948" title="ParallelMatching.this.global.Symbol">v</a>, <a href="TransMatcher.scala.html#79386" title="(x: ParallelMatching.this.global.Symbol,rhs: ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typedValDef</a>(<a href="#536948" title="ParallelMatching.this.global.Symbol">v</a>, <a href="#536981" title="ParallelMatching.this.global.Ident">substv</a>))
        )
              
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="536917">body</a>    = <a href="#81040" title="(n: Int)MatchMatrix.this.FinalState">targets</a>(<a href="#536830" title="Int">bx</a>).<a href="#537791" title="=&gt; ParallelMatching.this.global.Tree">body</a>
        // @bug: typer is not able to digest a body of type Nothing being assigned result type Unit
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Type" id="536918">tpe</a>     = <span title="ParallelMatching.this.global.Type" class="keyword">if</span> (<a href="#536917" title="ParallelMatching.this.global.Tree">body</a>.<a href="PatternNodes.scala.html#81155" title="implicit scala.tools.nsc.matching.PatternNodes.Types.enrichType : (_tpe: ParallelMatching.this.global.Type)ParallelMatching.this.Types.RichType">tpe</a>.<a href="PatternNodes.scala.html#537170" title="=&gt; Boolean">isNothing</a>) <a href="#536917" title="ParallelMatching.this.global.Tree">body</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; ParallelMatching.this.global.Type">tpe</a> <span class="keyword">else</span> <a href="TransMatcher.scala.html#79382" title="=&gt; ParallelMatching.this.global.Type">resultType</a>
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.MethodType" id="536919">newType</a> = <a href="../symtab/Types.scala.html#43895" title="(params: List[ParallelMatching.this.global.Symbol],resultType: ParallelMatching.this.global.Type)ParallelMatching.this.global.MethodType">MethodType</a>(<a href="#536915" title="List[ParallelMatching.this.global.Symbol]">vsyms</a>, <a href="#536918" title="ParallelMatching.this.global.Type">tpe</a>)
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.TermSymbol" id="536920">label</a>   = <a href="TransMatcher.scala.html#79380" title="=&gt; ParallelMatching.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26868" title="(pos: scala.tools.nsc.util.Position,name: ParallelMatching.this.global.Name)ParallelMatching.this.global.TermSymbol">newLabel</a><a href="../symtab/Symbols.scala.html#27005" title="(info: ParallelMatching.this.global.Type)ParallelMatching.this.global.TermSymbol">(</a><a href="#536917" title="ParallelMatching.this.global.Tree">body</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;body%&quot;</span><a href="../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)ParallelMatching.this.global.Name">+</a><a href="#536830" title="Int">bx</a>) setInfo <a href="#536919" title="ParallelMatching.this.global.MethodType">newType</a>
        <a href="#81032" title="(key: Int,value: ParallelMatching.this.global.Symbol)Unit" id="44386">labels</a>(<a href="#536830" title="Int">bx</a>)  = <a href="#536920" title="ParallelMatching.this.global.TermSymbol">label</a>

        <span title="Nothing" class="keyword">return</span> <a href="#79285" title="(s: String,x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">logAndReturn</a>(<span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;requestBody(%d) first time: &quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#536830" title="Int">bx</a>), <a href="TransMatcher.scala.html#79387" title="(vds: List[ParallelMatching.this.global.Tree],exp: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">squeezedBlock</a>(<a href="#536916" title="List[ParallelMatching.this.global.Tree]">vdefs</a>, (
          <span title="ParallelMatching.this.global.Tree" class="keyword">if</span> (<a href="#79297" title="(t: ParallelMatching.this.global.Tree)Boolean">isLabellable</a>(<a href="#536917" title="ParallelMatching.this.global.Tree">body</a>)) <a href="../ast/Trees.scala.html#26642" title="(sym: ParallelMatching.this.global.Symbol,params: List[ParallelMatching.this.global.Symbol],rhs: ParallelMatching.this.global.Tree)ParallelMatching.this.global.LabelDef">LabelDef</a>(<a href="#536920" title="ParallelMatching.this.global.TermSymbol">label</a>, <a href="#536915" title="List[ParallelMatching.this.global.Symbol]">vsyms</a>, <a href="../ast/Trees.scala.html#29366" title="(tp: ParallelMatching.this.global.Type)body.type">body</a> setType <a href="#536918" title="ParallelMatching.this.global.Type">tpe</a>)
          <span class="keyword">else</span> <a href="#536917" title="ParallelMatching.this.global.Tree">body</a>.<a href="../ast/Trees.scala.html#29366" title="(tp: ParallelMatching.this.global.Type)body.type">duplicate</a> setType <a href="#536918" title="ParallelMatching.this.global.Type">tpe</a>
        )))
      }
 
      // if some bx is not reached twice, its LabelDef is replaced with body itself
      <a href="#81049" title="(bx: Int)Unit">markReachedTwice</a>(<a href="#536830" title="Int">bx</a>)
      
      <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Ident]" id="536842">args</a>  = <a href="#81042" title="(n: Int)List[ParallelMatching.this.global.Symbol]">vss</a><span title="(f: (ParallelMatching.this.global.Symbol) =&gt; Option[ParallelMatching.this.global.Ident])(implicit bf: scala.collection.generic.BuilderFactory[Option[ParallelMatching.this.global.Ident],List[Option[ParallelMatching.this.global.Ident]],List[ParallelMatching.this.global.Symbol]])List[Option[ParallelMatching.this.global.Ident]]">(</span><a href="#536830" title="Int">bx</a>) <span title="scala.collection.generic.BuilderFactory[Option[ParallelMatching.this.global.Ident],List[Option[ParallelMatching.this.global.Ident]],List#Coll]">map</span> <a href="#536831" title="ParallelMatching.this.Bindings">subst</a> <a href="#537464" title="(implicit asTraversable: (Option[ParallelMatching.this.global.Ident]) =&gt; Traversable[ParallelMatching.this.global.Ident])List[ParallelMatching.this.global.Ident]" id="25400">flatten</a>
      <span class="keyword">val</span> <a title="ParallelMatching.this.global.Symbol" id="536843">label</a> = <a href="#81032" title="(key: Int)ParallelMatching.this.global.Symbol" id="44444">labels</a>(<a href="#536830" title="Int">bx</a>)
      <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="536844">body</a>  = <a href="#81040" title="(n: Int)MatchMatrix.this.FinalState">targets</a>(<a href="#536830" title="Int">bx</a>).<a href="#537791" title="=&gt; ParallelMatching.this.global.Tree">body</a>
      <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Type]" id="536845">fmls</a>  = <a href="#536843" title="ParallelMatching.this.global.Symbol">label</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; ParallelMatching.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30200" title="=&gt; List[ParallelMatching.this.global.Type]">paramTypes</a>
      
      <span class="keyword">def</span> <a title="()String" id="536846">debugConsistencyFailure</a>(): <span title="String">String</span> = {
        <span class="keyword">val</span> <a title="List[String]" id="537494">xs</a> = 
          <span title="(that: Traversable[String])(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[String]])List[String]">(</span> <span class="keyword">for</span> ((<a title="List[ParallelMatching.this.global.Symbol]" id="537602">vs</a>, <a title="Int" id="537603">i</a>) &lt;- <a href="#81042" title="=&gt; List[List[ParallelMatching.this.global.Symbol]]">vss</a>.<a href="#537578" title="(f: ((List[ParallelMatching.this.global.Symbol], Int)) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[(List[ParallelMatching.this.global.Symbol], Int)]])List[String]">zipWithIndex</a>) <span class="keyword">yield</span> <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;vss(%d) = %s\nargs = %s&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#537603" title="Int">i</a>, <a href="#537602" title="(sep: String)String">vs</a> mkString <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <a href="#536842" title="List[ParallelMatching.this.global.Ident]">args</a>) ) <span title="(that: Traversable[String])(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[String]])List[String]">++</span>
          ( <span class="keyword">for</span> ((<a title="MatchMatrix.this.FinalState" id="537894">t</a>, <a title="Int" id="537895">i</a>) &lt;- <a href="#81040" title="=&gt; List[MatchMatrix.this.FinalState]">targets</a>.<a href="#537870" title="(f: ((MatchMatrix.this.FinalState, Int)) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[(MatchMatrix.this.FinalState, Int)]])List[String]">zipWithIndex</a>) <span class="keyword">yield</span> <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;targets(%d) = %s&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#537895" title="Int">i</a>, <a href="#537894" title="MatchMatrix.this.FinalState">t</a>) ) <span title="(that: Traversable[String])(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[String]])List[String]">++</span>
          ( <span class="keyword">for</span> ((<a title="Int" id="538203">i</a>, <a title="ParallelMatching.this.global.Symbol" id="538204">l</a>) &lt;- <a href="#81032" title="(f: ((Int, ParallelMatching.this.global.Symbol)) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,scala.collection.mutable.Iterable[String],scala.collection.mutable.HashMap[Int,ParallelMatching.this.global.Symbol]])scala.collection.mutable.Iterable[String]">labels</a>) <span class="keyword">yield</span> <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;labels(%d) = %s&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#538203" title="Int">i</a>, <a href="#538204" title="ParallelMatching.this.global.Symbol">l</a>) ) <span title="scala.collection.generic.BuilderFactory[String,List[String],List#Coll]">++</span>
          ( <span class="keyword">for</span> ((<a title="java.lang.String" id="538554">s</a>, <a title="Any" id="538555">v</a>) &lt;- <span title="(xs: (java.lang.String, Any)*)List[(java.lang.String, Any)]">List</span><a href="#538530" title="(f: ((java.lang.String, Any)) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[(java.lang.String, Any)]])List[String]">(</a><span title="(y: Int)(java.lang.String, Int)" class="string">&quot;bx&quot;</span> -&gt; <a href="#536830" title="Int">bx</a>, <span title="(y: ParallelMatching.this.global.Type)(java.lang.String, ParallelMatching.this.global.Type)" class="string">&quot;label.tpe&quot;</span> -&gt; <a href="#536843" title="ParallelMatching.this.global.Symbol">label</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; ParallelMatching.this.global.Type">tpe</a>)) <span class="keyword">yield</span> <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;%s = %s&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#538554" title="java.lang.String">s</a>, <a href="#538555" title="Any">v</a>) )
        
        <a href="#537494" title="(sep: String)String">xs</a> mkString <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>
      }
      // sanity checks: same length lists and args are conformant with formals
      <span class="keyword">def</span> <a title="()Boolean" id="536847">isConsistent</a>() = <span title="(x$1: Boolean)Boolean">(</span><a href="#536845" title="List[ParallelMatching.this.global.Type]">fmls</a>.<span title="(x$1: Int)Boolean">length</span> == <a href="#536842" title="List[ParallelMatching.this.global.Ident]">args</a>.<span title="=&gt; Int">length</span>) &amp;&amp; <span title="object List">List</span>.<a title="(xs: List[ParallelMatching.this.global.Ident],ys: List[ParallelMatching.this.global.Type])(f: (ParallelMatching.this.global.Ident, ParallelMatching.this.global.Type) =&gt; Boolean)Boolean" id="24391">forall2</a>(<a href="#536842" title="List[ParallelMatching.this.global.Ident]">args</a>, <a href="#536845" title="List[ParallelMatching.this.global.Type]">fmls</a>)(<a href="#538793" title="ParallelMatching.this.global.Ident">_</a>.<a href="../symtab/Types.scala.html#30235" title="(that: ParallelMatching.this.global.Type)Boolean">tpe</a> &lt;:&lt; <a href="#538794" title="ParallelMatching.this.global.Type">_</a>)

      <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#536847" title="()Boolean">isConsistent</a>()) {
        <span class="keyword">val</span> <a title="String" id="538804">msg</a> = (
          <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;&quot;&quot;Consistency problem compiling %s!
            |Trying to call %s(%s) with arguments (%s)&quot;&quot;&quot;</span> .
            <a title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" id="30468">stripMargin</a>.<span title="(args: Any*)String">format</span>(<a href="TransMatcher.scala.html#79166" title="=&gt; ParallelMatching.this.global.CompilationUnit">cunit</a>.<a href="../CompilationUnits.scala.html#45431" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>, <a href="#536843" title="ParallelMatching.this.global.Symbol">label</a>, <a href="#536845" title="List[ParallelMatching.this.global.Type]">fmls</a>, <a href="#536842" title="List[ParallelMatching.this.global.Ident]">args</a>)
        )
        <span title="(x: Any)Unit">println</span>(<a href="#536846" title="()String">debugConsistencyFailure</a>())
        // TRACE(debugConsistencyFailure())
        <a href="TransMatcher.scala.html#79166" title="=&gt; ParallelMatching.this.global.CompilationUnit">cunit</a>.<a href="../CompilationUnits.scala.html#45455" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<a href="#536844" title="ParallelMatching.this.global.Tree">body</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="#538804" title="String">msg</a>)
      }
      
      <span class="keyword">def</span> <a title="=&gt; List[ParallelMatching.this.global.analyzer.global.Tree]" id="536848">vds</a> = <span class="keyword">for</span> (<a title="ParallelMatching.this.global.Symbol" id="538869">v</a> &lt;- <a href="#81042" title="(n: Int)List[ParallelMatching.this.global.Symbol]">vss</a><span title="(f: (ParallelMatching.this.global.Symbol) =&gt; Traversable[ParallelMatching.this.global.analyzer.global.Tree])(implicit bf: scala.collection.generic.BuilderFactory[ParallelMatching.this.global.analyzer.global.Tree,List[ParallelMatching.this.global.analyzer.global.Tree],List[ParallelMatching.this.global.Symbol]])List[ParallelMatching.this.global.analyzer.global.Tree]">(</span><a href="#536830" title="Int">bx</a>) ; <a title="ParallelMatching.this.global.Ident" id="538899">substv</a> &lt;- <a href="PatternNodes.scala.html#536839" title="(v: ParallelMatching.this.global.Symbol)Option[ParallelMatching.this.global.Ident]">subst</a><span title="(f: (ParallelMatching.this.global.Ident) =&gt; ParallelMatching.this.global.analyzer.global.Tree)Option[ParallelMatching.this.global.analyzer.global.Tree]">(</span><a href="#538869" title="ParallelMatching.this.global.Symbol">v</a>)) <span class="keyword">yield</span> <a href="TransMatcher.scala.html#79386" title="(x: ParallelMatching.this.global.Symbol,rhs: ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typedValDef</a>(<a href="#538869" title="ParallelMatching.this.global.Symbol">v</a>, <a href="#538899" title="ParallelMatching.this.global.Ident">substv</a>)
        
      <span title="ParallelMatching.this.global.Tree" class="keyword">if</span> (<a href="#79297" title="(t: ParallelMatching.this.global.Tree)Boolean">isLabellable</a>(<a href="#536844" title="ParallelMatching.this.global.Tree">body</a>)) <a href="../ast/TreeDSL.scala.html#42532" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.gen.global.Tree">ID</a><a href="../ast/TreeDSL.scala.html#45082" title="(params: List[ParallelMatching.this.global.Tree])ParallelMatching.this.global.Apply">(</a><a href="#536843" title="ParallelMatching.this.global.Symbol">label</a>) APPLY (<a href="#536842" title="List[ParallelMatching.this.global.Ident]">args</a>)
      <span class="keyword">else</span>                    <a href="TransMatcher.scala.html#79387" title="(vds: List[ParallelMatching.this.global.Tree],exp: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">squeezedBlock</a>(<a href="#536848" title="=&gt; List[ParallelMatching.this.global.analyzer.global.Tree]">vds</a>, <a href="#536844" title="ParallelMatching.this.global.Tree">body</a>.<a href="../ast/Trees.scala.html#29366" title="(tp: ParallelMatching.this.global.Type)body.type">duplicate</a> setType <a href="TransMatcher.scala.html#79382" title="=&gt; ParallelMatching.this.global.Type">resultType</a>)
    }

    /** the injection here handles alternatives and unapply type tests */
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep" id="81053">make</a>(<a title="List[ParallelMatching.this.global.Symbol]" id="536414">tvars</a>: <span title="List[ParallelMatching.this.global.Symbol]">List</span>[Symbol], <a title="List[MatchMatrix.this.Row]" id="536415">row1</a>: <span title="List[MatchMatrix.this.Row]">List</span>[Row]): <a href="#540070" title="MatchMatrix.this.Rep">Rep</a> = {
      // Martin: I am not really sure what stype is doing, but it caused aliases.scala to fail
      // The problem is if a val has a singleType of some other module. Then isModule is true and
      // sType is called. But it ends up mixing the prefix of the other module with the val symbol
      // which then causes erasure to be confused.
      <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Type" id="539047">mkSingletonType</a>(<a title="ParallelMatching.this.global.Tree" id="539051">x</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>) = <a href="#539051" title="ParallelMatching.this.global.Tree">x</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; ParallelMatching.this.global.Type">tpe</a> <span title="ParallelMatching.this.global.Type" class="keyword">match</span> {
        <span title="ParallelMatching.this.global.SingleType" class="keyword">case</span> <a title="ParallelMatching.this.global.SingleType" id="539052">st</a>: <a href="../symtab/Types.scala.html#26234" title="ParallelMatching.this.global.SingleType">SingleType</a> =&gt; <a href="#539052" title="ParallelMatching.this.global.SingleType">st</a>
        <span title="ParallelMatching.this.global.Type" class="keyword">case</span> _              =&gt; <a href="../symtab/Types.scala.html#26287" title="(pre: ParallelMatching.this.global.Type,sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.Type">singleType</a>(<a href="#539051" title="ParallelMatching.this.global.Tree">x</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; ParallelMatching.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30190" title="=&gt; ParallelMatching.this.global.Type">prefix</a>, <a href="#539051" title="ParallelMatching.this.global.Tree">x</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a>)
      }
      <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Type" id="539048">equalsCheck</a>(<a title="ParallelMatching.this.global.Tree" id="539057">x</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>) =
        <span title="ParallelMatching.this.global.Type" class="keyword">if</span> (<a href="#539057" title="ParallelMatching.this.global.Tree">x</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26902" title="=&gt; Boolean">isValue</a>) <a href="../symtab/Types.scala.html#26287" title="(pre: ParallelMatching.this.global.Type,sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.Type">singleType</a>(<a href="../symtab/Types.scala.html#26226" title="object ParallelMatching.this.global.NoPrefix">NoPrefix</a>, <a href="#539057" title="ParallelMatching.this.global.Tree">x</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a>)
        <span class="keyword">else</span> <a href="#539047" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Type">mkSingletonType</a>(<a href="#539057" title="ParallelMatching.this.global.Tree">x</a>)
      
      <span class="keyword">def</span> <a title="(opat: ParallelMatching.this.global.Tree,j: Int)ParallelMatching.this.global.Tree" id="539049">classifyPat</a>(<a title="ParallelMatching.this.global.Tree" id="539064">opat</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="Int" id="539065">j</a>: <span title="Int">Int</span>): <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a> = {
        <span class="keyword">def</span> <a title="=&gt; List[ParallelMatching.this.global.Symbol]" id="539066">vars</a>                    = <a href="#81152" title="implicit scala.tools.nsc.matching.ParallelMatching.Implicits.mkPattern : (t: ParallelMatching.this.global.Tree)ParallelMatching.this.Pattern">opat</a>.<a href="#535767" title="=&gt; List[ParallelMatching.this.global.Symbol]">boundVariables</a>
        <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree" id="539067">rebind</a>(<a title="ParallelMatching.this.global.Tree" id="539088">t</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>)         = <a href="PatternNodes.scala.html#79227" title="(vs: List[ParallelMatching.this.global.Symbol],pat: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">makeBind</a>(<a href="#539066" title="=&gt; List[ParallelMatching.this.global.Symbol]">vars</a>, <a href="#539088" title="ParallelMatching.this.global.Tree">t</a>)
        <span class="keyword">def</span> <a title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Tree" id="539068">rebindEmpty</a>(<a title="ParallelMatching.this.global.Type" id="539096">tpe</a>: <a href="../symtab/Types.scala.html#26205" title="ParallelMatching.this.global.Type">Type</a>)  = <a href="PatternNodes.scala.html#79230" title="(vs: List[ParallelMatching.this.global.Symbol],tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Tree">mkEmptyTreeBind</a>(<a href="#539066" title="=&gt; List[ParallelMatching.this.global.Symbol]">vars</a>, <a href="#539096" title="ParallelMatching.this.global.Type">tpe</a>)
        <span class="keyword">def</span> <a title="()ParallelMatching.this.global.Tree" id="539069">rebindTyped</a>()           = <a href="PatternNodes.scala.html#79229" title="(vs: List[ParallelMatching.this.global.Symbol],tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Tree">mkTypedBind</a>(<a href="#539066" title="=&gt; List[ParallelMatching.this.global.Symbol]">vars</a>, <a href="#539048" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Type">equalsCheck</a>(<a href="../ast/TreeDSL.scala.html#42488" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#539064" title="ParallelMatching.this.global.Tree">opat</a>)))
        
        // @pre for doUnapplySeq: is not right-ignoring (no star pattern) ; no exhaustivity check
        <span class="keyword">def</span> <a title="(tptArg: ParallelMatching.this.global.Tree,xs: List[ParallelMatching.this.global.Tree])ParallelMatching.this.global.Tree" id="539070">doUnapplySeq</a>(<a title="ParallelMatching.this.global.Tree" id="539226">tptArg</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="List[ParallelMatching.this.global.Tree]" id="539227">xs</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree]) = {
          <a href="#536414" title="(n: Int)ParallelMatching.this.global.Symbol">tvars</a><a href="../symtab/Symbols.scala.html#26993" title="(mask: Long)ParallelMatching.this.global.Symbol">(</a><a href="#539065" title="Int">j</a>) setFlag Flags.<span title="Long(274877906944L)">TRANS_FLAG</span>
          <a href="#539067" title="(t: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">rebind</a>(<a href="PatternNodes.scala.html#79233" title="(pats: List[ParallelMatching.this.global.Tree],tptArg: ParallelMatching.this.global.Type)ParallelMatching.this.global.Tree">normalizedListPattern</a>(<a href="#539227" title="List[ParallelMatching.this.global.Tree]">xs</a>, <a href="#539226" title="ParallelMatching.this.global.Tree">tptArg</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; ParallelMatching.this.global.Type">tpe</a>))
        }

        <span class="keyword">def</span> <a title="(ua: ParallelMatching.this.global.UnApply,fn: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree" id="539071">doUnapplyApply</a>(<a title="ParallelMatching.this.global.UnApply" id="539250">ua</a>: <a href="../ast/Trees.scala.html#26673" title="ParallelMatching.this.global.UnApply">UnApply</a>, <a title="ParallelMatching.this.global.Tree" id="539251">fn</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>) = {
          <span class="keyword">val</span> MethodType<a href="#539268" title="ParallelMatching.this.global.Symbol" id="539252">(</a><a href="#539259" title="(x: List[ParallelMatching.this.global.Symbol])Some[List[ParallelMatching.this.global.Symbol]]">List</a>(<a title="ParallelMatching.this.global.Symbol" id="539268">arg</a>, _*), _) = <a href="#539251" title="ParallelMatching.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; ParallelMatching.this.global.Type">tpe</a>
          <span class="keyword">val</span> <a title="ParallelMatching.this.global.TermTree" id="539253">npat</a> =
            <span title="ParallelMatching.this.global.TermTree" class="keyword">if</span> (<a href="#536414" title="(n: Int)ParallelMatching.this.global.Symbol">tvars</a>(<a href="#539065" title="Int">j</a>).<a href="../symtab/Types.scala.html#30235" title="(that: ParallelMatching.this.global.Type)Boolean">tpe</a> &lt;:&lt; <a href="#539252" title="ParallelMatching.this.global.Symbol">arg</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; ParallelMatching.this.global.Type">tpe</a>) <a href="#539250" title="ParallelMatching.this.global.UnApply">ua</a> 
            <span class="keyword">else</span> <a href="../ast/Trees.scala.html#50375" title="(expr: ParallelMatching.this.global.Tree,tpt: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Typed">Typed</a><a href="../ast/Trees.scala.html#29366" title="(tp: ParallelMatching.this.global.Type)ParallelMatching.this.global.Typed">(</a><a href="#539250" title="ParallelMatching.this.global.UnApply">ua</a>, <a href="../ast/Trees.scala.html#26744" title="(tp: ParallelMatching.this.global.Type)ParallelMatching.this.global.TypeTree">TypeTree</a>(<a href="#539252" title="ParallelMatching.this.global.Symbol">arg</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; ParallelMatching.this.global.Type">tpe</a>)) setType <a href="#539252" title="ParallelMatching.this.global.Symbol">arg</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; ParallelMatching.this.global.Type">tpe</a>
            
          // TRACE(&quot;doUnapplyApply: %s &lt;:&lt; %s == %s&quot;, tvars(j).tpe, argtpe, (tvars(j).tpe &lt;:&lt; argtpe))
          <a href="#79285" title="(s: String,x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">logAndReturn</a>(<span title="java.lang.String(&quot;doUnapplyApply: &quot;)" class="string">&quot;doUnapplyApply: &quot;</span>, <a href="#539067" title="(t: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">rebind</a><a href="../ast/Trees.scala.html#29366" title="(tp: ParallelMatching.this.global.Type)ParallelMatching.this.global.Tree">(</a><a href="#539253" title="ParallelMatching.this.global.TermTree">npat</a>) setType <a href="#539252" title="ParallelMatching.this.global.Symbol">arg</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; ParallelMatching.this.global.Type">tpe</a>)
        }
        <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.Tree,fn: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree" id="539072">doValMatch</a>(<a title="ParallelMatching.this.global.Tree" id="539341">x</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="ParallelMatching.this.global.Tree" id="539342">fn</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>) = {
          <span class="keyword">def</span> <a title="(path: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Type" id="539343">examinePrefix</a>(<a title="ParallelMatching.this.global.Tree" id="539346">path</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>) = <span title="(_1: ParallelMatching.this.global.Tree,_2: ParallelMatching.this.global.Type)(ParallelMatching.this.global.Tree, ParallelMatching.this.global.Type)">(</span><a href="#539346" title="ParallelMatching.this.global.Tree">path</a>, <a href="#539346" title="ParallelMatching.this.global.Tree">path</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; ParallelMatching.this.global.Type">tpe</a>) <span title="ParallelMatching.this.global.Type" class="keyword">match</span> {
            <span title="ParallelMatching.this.global.Type" class="keyword">case</span> (_, <a title="ParallelMatching.this.global.ThisType" id="539357">t</a>: <a href="../symtab/Types.scala.html#26228" title="ParallelMatching.this.global.ThisType">ThisType</a>)     =&gt; <a href="../symtab/Types.scala.html#26287" title="(pre: ParallelMatching.this.global.Type,sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.Type">singleType</a>(<a href="#539357" title="ParallelMatching.this.global.ThisType">t</a>, <a href="#539341" title="ParallelMatching.this.global.Tree">x</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a>)            // cases 2/3 are e.g. `case Some(p._2)' in s.c.jcl.Map
            <span title="ParallelMatching.this.Types.PseudoType" class="keyword">case</span> (_: <a href="../ast/Trees.scala.html#26714" title="ParallelMatching.this.global.Apply">Apply</a>, _)        =&gt; <a href="PatternNodes.scala.html#539369" title="(o: ParallelMatching.this.global.Tree)ParallelMatching.this.Types.PseudoType">PseudoType</a>(<a href="#539341" title="ParallelMatching.this.global.Tree">x</a>)                      // outer-matching: test/files/pos/t154.scala
            <span title="ParallelMatching.this.global.Type" class="keyword">case</span> _                    =&gt; <a href="../symtab/Types.scala.html#26287" title="(pre: ParallelMatching.this.global.Type,sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.Type">singleType</a>(<a href="#539047" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Type">mkSingletonType</a>(<a href="#539346" title="ParallelMatching.this.global.Tree">path</a>), <a href="#539341" title="ParallelMatching.this.global.Tree">x</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a>)  // old
          }    
          <span class="keyword">val</span> <a title="ParallelMatching.this.global.Type" id="539344">singletonType</a> =
            <span title="ParallelMatching.this.global.Type" class="keyword">if</span> (<a href="#79298" title="(t: ParallelMatching.this.global.Tree)Boolean">isModule</a>(<a href="#539341" title="ParallelMatching.this.global.Tree">x</a>)) <a href="#539047" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Type">mkSingletonType</a>(<a href="#539341" title="ParallelMatching.this.global.Tree">x</a>) <span class="keyword">else</span> <a href="#539342" title="ParallelMatching.this.global.Tree">fn</a> <span title="ParallelMatching.this.global.Type" class="keyword">match</span> {
              <span title="ParallelMatching.this.global.Type" class="keyword">case</span> Select(<a title="ParallelMatching.this.global.Tree" id="539406">path</a>, _)  =&gt; <a href="#539343" title="(path: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Type">examinePrefix</a>(<a href="#539406" title="ParallelMatching.this.global.Tree">path</a>)
              <span title="ParallelMatching.this.global.Type" class="keyword">case</span> <a title="ParallelMatching.this.global.Ident" id="539411">x</a>: <a href="../ast/Trees.scala.html#26732" title="ParallelMatching.this.global.Ident">Ident</a>         =&gt; <a href="#539048" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Type">equalsCheck</a>(<a href="#539411" title="ParallelMatching.this.global.Ident">x</a>)
            }
          <span class="keyword">val</span> <a title="ParallelMatching.this.global.Type" id="539345">typeToTest</a> = <a href="PatternNodes.scala.html#79231" title="(xs: List[ParallelMatching.this.global.Type])ParallelMatching.this.global.Type">mkEqualsRef</a>(<span title="(xs: ParallelMatching.this.global.Type*)List[ParallelMatching.this.global.Type]">List</span>(<a href="#539344" title="ParallelMatching.this.global.Type">singletonType</a>))
            
          <a href="#539067" title="(t: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">rebind</a>(<a href="../ast/Trees.scala.html#50375" title="(expr: ParallelMatching.this.global.Tree,tpt: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Typed">Typed</a><a href="../ast/Trees.scala.html#29366" title="(tp: ParallelMatching.this.global.Type)ParallelMatching.this.global.Typed">(</a><a href="../ast/TreeDSL.scala.html#535945" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Ident">WILD</a>(<a href="#539345" title="ParallelMatching.this.global.Type">typeToTest</a>), <a href="../ast/Trees.scala.html#26744" title="(tp: ParallelMatching.this.global.Type)ParallelMatching.this.global.TypeTree">TypeTree</a>(<a href="#539344" title="ParallelMatching.this.global.Type">singletonType</a>)) setType <a href="#539345" title="ParallelMatching.this.global.Type">typeToTest</a>)
        }
        
        <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)Boolean" id="539073">doReturnOriginal</a>(<a title="ParallelMatching.this.global.Tree" id="539470">t</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>) = <a href="../ast/TreeDSL.scala.html#42477" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,Boolean])Boolean">cond</a>(<a href="#539470" title="ParallelMatching.this.global.Tree">t</a>) <a href="#539481" title="Boolean">{</a>
          <span title="Boolean(true)" class="keyword">case</span> <a href="../ast/Trees.scala.html#26602" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a> | <a href="../ast/TreeDSL.scala.html#535946" title="(other: Any)Boolean">WILD</a>() | _: <a href="../ast/Trees.scala.html#26737" title="ParallelMatching.this.global.Literal">Literal</a> | _: <a href="../ast/Trees.scala.html#26707" title="ParallelMatching.this.global.Typed">Typed</a> | _: <a href="../ast/Trees.scala.html#26676" title="ParallelMatching.this.global.ArrayValue">ArrayValue</a>   =&gt; <span title="Boolean(true)" class="keyword">true</span>
        }
        <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)Boolean" id="539074">doRebindTyped</a>(<a title="ParallelMatching.this.global.Tree" id="539488">t</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>) = <a href="../ast/TreeDSL.scala.html#42477" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,Boolean])Boolean">cond</a>(<a href="#539488" title="ParallelMatching.this.global.Tree">t</a>) <a href="#539499" title="Boolean">{</a> <span title="Boolean(true)" class="keyword">case</span> _: <a href="../ast/Trees.scala.html#26732" title="ParallelMatching.this.global.Ident">Ident</a> | _: <a href="../ast/Trees.scala.html#26728" title="ParallelMatching.this.global.Select">Select</a> =&gt; <span title="Boolean(true)" class="keyword">true</span> }
        
        // NOTE - this seemingly pointless representation has a point.  Until extractors
        // can be trusted, I only feel safe using them by using one to a match, because it is
        // in the transitions they are broken.  This will return to a more traditional
        // pattern match before the final curtain falls.
        <span class="keyword">val</span> <a title="PartialFunction[ParallelMatching.this.global.Tree,ParallelMatching.this.global.Tree]" id="539075">f</a> = <span title="[A](xs: A*)List[A]">List</span><span title="(xs: PartialFunction[ParallelMatching.this.global.Tree,ParallelMatching.this.global.Tree]*)List[PartialFunction[ParallelMatching.this.global.Tree,ParallelMatching.this.global.Tree]]">[</span><a title="PartialFunction[ParallelMatching.this.global.Tree,ParallelMatching.this.global.Tree]" id="1085">PartialFunction</a>[Tree, Tree]]<a title="(f: (PartialFunction[ParallelMatching.this.global.Tree,ParallelMatching.this.global.Tree], PartialFunction[ParallelMatching.this.global.Tree,ParallelMatching.this.global.Tree]) =&gt; PartialFunction[ParallelMatching.this.global.Tree,ParallelMatching.this.global.Tree])PartialFunction[ParallelMatching.this.global.Tree,ParallelMatching.this.global.Tree]" id="28951">(</a>
          <a href="#539508" title="ParallelMatching.this.global.Tree">{</a> <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> _: <a href="../ast/Trees.scala.html#26663" title="ParallelMatching.this.global.Alternative">Alternative</a>                       =&gt; <a href="#539064" title="ParallelMatching.this.global.Tree">opat</a> } ,
          <a href="#539510" title="ParallelMatching.this.global.Tree">{</a> <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> Typed(<a title="ParallelMatching.this.global.Tree" id="539513">p</a> @ <a href="PatternNodes.scala.html#539515" title="(x: ParallelMatching.this.global.Tree)Option[ParallelMatching.this.global.Tree]">Stripped</a>(_: <a href="../ast/Trees.scala.html#26673" title="ParallelMatching.this.global.UnApply">UnApply</a>), <a title="ParallelMatching.this.global.Tree" id="539524">tpt</a>) =&gt; <span title="ParallelMatching.this.global.Tree" class="keyword">if</span> (<a href="#536414" title="(n: Int)ParallelMatching.this.global.Symbol">tvars</a>(<a href="#539065" title="Int">j</a>).<a href="../symtab/Types.scala.html#30235" title="(that: ParallelMatching.this.global.Type)Boolean">tpe</a> &lt;:&lt; <a href="#539524" title="ParallelMatching.this.global.Tree">tpt</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; ParallelMatching.this.global.Type">tpe</a>) <a href="#539067" title="(t: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">rebind</a>(<a href="#539513" title="ParallelMatching.this.global.Tree">p</a>) <span class="keyword">else</span> <a href="#539064" title="ParallelMatching.this.global.Tree">opat</a> } ,
          <a href="#539542" title="ParallelMatching.this.global.Tree">{</a> <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a title="ParallelMatching.this.global.Tree" id="539543">x</a> <span class="keyword">if</span> <a href="#539073" title="(t: ParallelMatching.this.global.Tree)Boolean">doReturnOriginal</a>(<a href="#539543" title="ParallelMatching.this.global.Tree">x</a>)             =&gt; <a href="#539064" title="ParallelMatching.this.global.Tree">opat</a> } ,
          <a href="#539547" title="ParallelMatching.this.global.Tree">{</a> <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a title="ParallelMatching.this.global.Tree" id="539548">x</a> <span class="keyword">if</span> <a href="#539074" title="(t: ParallelMatching.this.global.Tree)Boolean">doRebindTyped</a>(<a href="#539548" title="ParallelMatching.this.global.Tree">x</a>)                =&gt; <a href="#539069" title="()ParallelMatching.this.global.Tree">rebindTyped</a>() } ,  // Ident(_) != nme.WILDCARD
          <a href="#539554" title="ParallelMatching.this.global.Tree">{</a> <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> _: <a href="../ast/Trees.scala.html#26724" title="ParallelMatching.this.global.This">This</a>                              =&gt; <a href="#539064" title="ParallelMatching.this.global.Tree">opat</a> } ,
          <a href="#539556" title="ParallelMatching.this.global.Tree">{</a> <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a href="PatternNodes.scala.html#539560" title="(x: ParallelMatching.this.global.UnApply)Option[(ParallelMatching.this.global.Tree, List[ParallelMatching.this.global.Tree])]">UnapplySeq</a>(<a title="ParallelMatching.this.global.Tree" id="539679">tptArg</a>, <a title="List[ParallelMatching.this.global.Tree]" id="539680">xs</a>)               =&gt; <a href="#539070" title="(tptArg: ParallelMatching.this.global.Tree,xs: List[ParallelMatching.this.global.Tree])ParallelMatching.this.global.Tree">doUnapplySeq</a>(<a href="#539679" title="ParallelMatching.this.global.Tree">tptArg</a>, <a href="#539680" title="List[ParallelMatching.this.global.Tree]">xs</a>) } ,
          <a href="#539685" title="ParallelMatching.this.global.Tree">{</a> <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a title="ParallelMatching.this.global.UnApply" id="539686">ua</a> @ UnApply(Apply(<a title="ParallelMatching.this.global.Tree" id="539691">fn</a>, _), _)        =&gt; <a href="#539071" title="(ua: ParallelMatching.this.global.UnApply,fn: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">doUnapplyApply</a>(<a href="#539686" title="ParallelMatching.this.global.UnApply">ua</a>, <a href="#539691" title="ParallelMatching.this.global.Tree">fn</a>) } ,
          <a href="#539699" title="ParallelMatching.this.global.Tree">{</a> <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a title="ParallelMatching.this.global.Tree" id="539700">x</a> @ <a href="PatternNodes.scala.html#539703" title="(x: Any)Option[ParallelMatching.this.global.Tree]">Apply_Function</a>(<a title="ParallelMatching.this.global.Tree" id="539797">fn</a>)               =&gt; <a href="#539072" title="(x: ParallelMatching.this.global.Tree,fn: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">doValMatch</a>(<a href="#539700" title="ParallelMatching.this.global.Tree">x</a>, <a href="#539797" title="ParallelMatching.this.global.Tree">fn</a>) } ,
          <a href="#539802" title="ParallelMatching.this.global.Tree">{</a> <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a href="PatternNodes.scala.html#539740" title="(x: Any)Option[(ParallelMatching.this.global.Type, ParallelMatching.this.global.Symbol)]">Apply_Value</a>(<a title="ParallelMatching.this.global.Type" id="539806">pre</a>, <a title="ParallelMatching.this.global.Symbol" id="539807">sym</a>)                =&gt; <a href="#539068" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Tree">rebindEmpty</a>(<a href="PatternNodes.scala.html#79231" title="(xs: List[ParallelMatching.this.global.Type])ParallelMatching.this.global.Type">mkEqualsRef</a>(<span title="(xs: ParallelMatching.this.global.Type*)List[ParallelMatching.this.global.Type]">List</span>(<a href="../symtab/Types.scala.html#26287" title="(pre: ParallelMatching.this.global.Type,sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.Type">singleType</a>(<a href="#539806" title="ParallelMatching.this.global.Type">pre</a>, <a href="#539807" title="ParallelMatching.this.global.Symbol">sym</a>)))) } ,
          <a href="#539828" title="ParallelMatching.this.global.Tree">{</a> <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a href="PatternNodes.scala.html#539830" title="(x: Any)Option[(ParallelMatching.this.global.Type, List[ParallelMatching.this.global.Tree])]">Apply_CaseClass</a>(<a title="ParallelMatching.this.global.Type" id="539868">tpe</a>, <a title="List[ParallelMatching.this.global.Tree]" id="539869">args</a>)           =&gt; <span title="ParallelMatching.this.global.Tree" class="keyword">if</span> (<a href="#539869" title="List[ParallelMatching.this.global.Tree]">args</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#539068" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Tree">rebindEmpty</a>(<a href="#539868" title="ParallelMatching.this.global.Type">tpe</a>) <span class="keyword">else</span> <a href="#539064" title="ParallelMatching.this.global.Tree">opat</a> } ,
          <a href="#539874" title="ParallelMatching.this.global.Tree">{</a> <span title="Nothing" class="keyword">case</span> <a title="ParallelMatching.this.global.Tree" id="539875">x</a>                                    =&gt; <a href="../Global.scala.html#39077" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Unexpected pattern: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#539875" title="ParallelMatching.this.global.Tree">x</a>.<span title="()java.lang.Class[_]">getClass</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; =&gt; &quot;)" class="string">&quot; =&gt; &quot;</span> + <a href="#539875" title="ParallelMatching.this.global.Tree">x</a>) }
        ) reduceLeft (<a href="#539905" title="(that: PartialFunction[ParallelMatching.this.global.Tree,ParallelMatching.this.global.Tree])PartialFunction[ParallelMatching.this.global.Tree,ParallelMatching.this.global.Tree]" id="25511">_</a> orElse <a href="#539906" title="PartialFunction[ParallelMatching.this.global.Tree,ParallelMatching.this.global.Tree]">_</a>)
        
        <a href="#539075" title="(v1: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">f</a>(<a href="../ast/TreeDSL.scala.html#42488" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#539064" title="ParallelMatching.this.global.Tree">opat</a>))
      }
    
      <span class="keyword">val</span> <a title="List[MatchMatrix.this.Row]" id="539050">rows</a> = <a href="#536415" title="(f: (MatchMatrix.this.Row) =&gt; Traversable[MatchMatrix.this.Row])(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[MatchMatrix.this.Row]])List[MatchMatrix.this.Row]">row1</a> <span title="scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List#Coll]">flatMap</span> (<a href="#539954" title="(classifyPat: (ParallelMatching.this.global.Tree, Int) =&gt; ParallelMatching.this.global.Tree)List[MatchMatrix.this.Row]">_</a> expandAlternatives <a href="#539049" title="(opat: ParallelMatching.this.global.Tree,j: Int)ParallelMatching.this.global.Tree">classifyPat</a>)
      <span title="MatchMatrix.this.Rep" class="keyword">if</span> (<a href="#539050" title="List[MatchMatrix.this.Row]">rows</a>.<a title="(x$1: Int)Boolean" id="2954">length</a> != <a href="#536415" title="List[MatchMatrix.this.Row]">row1</a>.<span title="=&gt; Int">length</span>) <a href="#81053" title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">make</a>(<a href="#536414" title="List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#539050" title="List[MatchMatrix.this.Row]">rows</a>)  // recursive call if any change
      <span class="keyword">else</span> <a href="#540070" title="(tvars: List[ParallelMatching.this.global.Symbol],rows: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">Rep</a>(<a href="#536414" title="List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#539050" title="List[MatchMatrix.this.Row]">rows</a>).<a href="#81132" title="=&gt; MatchMatrix.this.Rep">checkExhaustive</a>
    }
    
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="81054">toString</a>() = {
      <span class="keyword">val</span> <a title="List[(Any, Traversable[Any])]" id="540093">toPrint</a>: <span title="List[(Any, Traversable[Any])]">List</span>[(Any, Traversable[Any])] = (
        (<a href="#81042" title="=&gt; List[List[ParallelMatching.this.global.Symbol]]">vss</a>.<span title="(f: ((List[ParallelMatching.this.global.Symbol], Int)) =&gt; (Int, List[ParallelMatching.this.global.Symbol]))(implicit bf: scala.collection.generic.BuilderFactory[(Int, List[ParallelMatching.this.global.Symbol]),List[(Int, List[ParallelMatching.this.global.Symbol])],List[(List[ParallelMatching.this.global.Symbol], Int)]])List[(Int, List[ParallelMatching.this.global.Symbol])]">zipWithIndex</span> <span title="scala.collection.generic.BuilderFactory[(Int, List[ParallelMatching.this.global.Symbol]),List[(Int, List[ParallelMatching.this.global.Symbol])],List#Coll]">map</span> (<a href="#540185" title="(List[ParallelMatching.this.global.Symbol], Int)">_</a>.<a title="=&gt; (Int, List[ParallelMatching.this.global.Symbol])" id="36440">swap</a>)) <a href="#540095" title="(p: ((Any, Traversable[Any])) =&gt; Boolean)List[(Any, Traversable[Any])]" id="25271">:::</a>
        <span title="[A](xs: A*)List[A]">List</span><span title="(xs: (Any, Traversable[Any])*)List[(Any, Traversable[Any])]">[</span><span title="(Any, Traversable[Any])">(</span>Any, Traversable[Any])]<span title="(prefix: List[(Any, Traversable[Any])])List[(Any, Traversable[Any])]">(</span>
          <span title="(y: scala.collection.mutable.HashMap[Int,ParallelMatching.this.global.Symbol])(java.lang.String, scala.collection.mutable.HashMap[Int,ParallelMatching.this.global.Symbol])" class="string">&quot;labels&quot;</span> -&gt; <a href="#81032" title="=&gt; scala.collection.mutable.HashMap[Int,ParallelMatching.this.global.Symbol]">labels</a>,
          <span title="(y: List[MatchMatrix.this.FinalState])(java.lang.String, List[MatchMatrix.this.FinalState])" class="string">&quot;targets&quot;</span> -&gt; <a href="#81040" title="=&gt; List[MatchMatrix.this.FinalState]">targets</a>,
          <span title="(y: scala.collection.mutable.BitSet)(java.lang.String, scala.collection.mutable.BitSet)" class="string">&quot;reached&quot;</span> -&gt; <a href="#81036" title="=&gt; scala.collection.mutable.BitSet">reached</a>,
          <span title="(y: List[ParallelMatching.this.global.Symbol])(java.lang.String, List[ParallelMatching.this.global.Symbol])" class="string">&quot;shortCuts&quot;</span> -&gt; <a href="#81034" title="=&gt; scala.collection.mutable.ListBuffer[ParallelMatching.this.global.Symbol]">shortCuts</a>.<a title="=&gt; List[ParallelMatching.this.global.Symbol]" id="61592">toList</a>
        ) filterNot (<a href="#540369" title="(Any, Traversable[Any])">_</a>.<span title="=&gt; Traversable[Any]">_2</span>.<a title="=&gt; Boolean" id="25217">isEmpty</a>)
      )

      <span class="keyword">val</span> <a title="List[String]" id="540094">strs</a> = <a href="#540093" title="(f: ((Any, Traversable[Any])) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[(Any, Traversable[Any])]])List[String]">toPrint</a> <span title="scala.collection.generic.BuilderFactory[String,List[String],List#Coll]">map</span> <a href="#540380" title="String">{</a> <span title="String" class="keyword">case</span> (<a title="Any" id="540383">k</a>, <a title="Traversable[Any]" id="540384">v</a>) =&gt; <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;    %s = %s\n&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#540383" title="Any">k</a>, <a href="#540384" title="Traversable[Any]">v</a>) }
      <span title="java.lang.String" class="keyword">if</span> (<a href="#540093" title="List[(Any, Traversable[Any])]">toPrint</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="java.lang.String(&quot;MatchMatrix()&quot;)" class="string">&quot;MatchMatrix()&quot;</span>
      <span class="keyword">else</span> <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;MatchMatrix(\n%s)&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#540094" title="List[String]">strs</a> <span title="=&gt; String">mkString</span>)
    }
    
    /**
     * Encapsulates a symbol being matched on.
     * 
     * sym match { ... }
     *
     * results in Scrutinee(sym).
     *
     * Note that we only ever match on Symbols, not Trees: a temporary variable
     * is created for any expressions being matched on. 
     */ 
    case <span class="keyword">class</span> <a title="class Scrutinee extends java.lang.Object with ScalaObject with Product" id="540676">Scrutinee</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="ParallelMatching.this.global.Symbol" id="540678">sym</a>: <a href="../symtab/Symbols.scala.html#26127" title="ParallelMatching.this.global.Symbol">Symbol</a>) {
      <span class="keyword">import</span> definitions._

      // presenting a face of our symbol
      <span class="keyword">def</span> <a title="=&gt; ParallelMatching.this.global.Type" id="540516">tpe</a>       = <a href="#540678" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; ParallelMatching.this.global.Type">tpe</a>
      <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.util.Position" id="540517">pos</a>       = <a href="#540678" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26847" title="=&gt; scala.tools.nsc.util.Position">pos</a>
      <span class="keyword">def</span> <a title="=&gt; List[ParallelMatching.this.global.Symbol]" id="540518">accessors</a> = <a href="#540678" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27038" title="=&gt; List[ParallelMatching.this.global.Symbol]">caseFieldAccessors</a>
      <span class="keyword">def</span> <a title="=&gt; ParallelMatching.this.global.gen.global.Tree" id="540519">id</a>        = <a href="../ast/TreeDSL.scala.html#42532" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.gen.global.Tree">ID</a>(<a href="#540678" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>)   // attributed ident

      // tests
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="540520">isDefined</a> = <a href="#540678" title="(x$1: AnyRef)Boolean">sym</a> ne <a href="../symtab/Symbols.scala.html#26134" title="object ParallelMatching.this.global.NoSymbol">NoSymbol</a>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="540521">isSimple</a>  = <a href="PatternNodes.scala.html#81155" title="implicit scala.tools.nsc.matching.PatternNodes.Types.enrichType : (_tpe: ParallelMatching.this.global.Type)ParallelMatching.this.Types.RichType">tpe</a>.<a href="PatternNodes.scala.html#537168" title="(x$1: Boolean)Boolean">isChar</a> || <a href="PatternNodes.scala.html#81155" title="implicit scala.tools.nsc.matching.PatternNodes.Types.enrichType : (_tpe: ParallelMatching.this.global.Type)ParallelMatching.this.Types.RichType">tpe</a>.<a href="PatternNodes.scala.html#537167" title="=&gt; Boolean">isInt</a>

      // sequences
      <span class="keyword">def</span> <a title="=&gt; ParallelMatching.this.global.Type" id="540522">seqType</a>   = <a href="#540516" title="=&gt; ParallelMatching.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30220" title="(clazz: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.Type">widen</a> baseType <a href="../symtab/Definitions.scala.html#28374" title="=&gt; ParallelMatching.this.global.Symbol">SeqClass</a>
      <span class="keyword">def</span> <a title="=&gt; ParallelMatching.this.global.Type" id="540523">elemType</a>  = <a href="../symtab/Types.scala.html#30192" title="(n: Int)ParallelMatching.this.global.Type">tpe</a> typeArgs <span title="Int(0)" class="int">0</span>  // can this happen? if (seqType == NoType) error(&quot;...&quot;)

      // for propagating &quot;unchecked&quot; to synthetic vars
      <span class="keyword">def</span> <a title="=&gt; List[Long]" id="540524">flags</a>: <span title="List[Long]">List</span>[Long] = <span title="(xs: Long*)List[Long]">List</span><span title="(p: (Long) =&gt; Boolean)List[Long]">(</span>Flags.<span title="Long(274877906944L)">TRANS_FLAG</span>) filter (<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">sym</a> hasFlag <a href="#540626" title="Long">_</a>)

      <span class="keyword">def</span> <a title="(other: ParallelMatching.this.global.Type)Unit" id="540525">assertIsSubtype</a>(<a title="ParallelMatching.this.global.Type" id="540631">other</a>: <a href="../symtab/Types.scala.html#26205" title="ParallelMatching.this.global.Type">Type</a>) = <a title="(assertion: Boolean,message: =&gt; Any)Unit" id="7876">assert</a>(<a href="../symtab/Types.scala.html#26402" title="(tp1: ParallelMatching.this.global.Type,tp2: ParallelMatching.this.global.Type)Boolean">isSubType</a>(<a href="#540516" title="=&gt; ParallelMatching.this.global.Type">tpe</a>, <a href="#540631" title="ParallelMatching.this.global.Type">other</a>), <span title="(x$1: Any)java.lang.String" class="string">&quot;problem &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#540516" title="=&gt; ParallelMatching.this.global.Type">tpe</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; not &lt;: &quot;)" class="string">&quot; not &lt;: &quot;</span>+<a href="#540631" title="ParallelMatching.this.global.Type">other</a>)
      <span class="keyword">def</span> <a title="(headType: ParallelMatching.this.global.Type)MatchMatrix.this.Scrutinee" id="540526">casted</a>(<a title="ParallelMatching.this.global.Type" id="540659">headType</a>: <a href="../symtab/Types.scala.html#26205" title="ParallelMatching.this.global.Type">Type</a>) =
        <span title="MatchMatrix.this.Scrutinee" class="keyword">if</span> (<a href="../symtab/Types.scala.html#30236" title="(that: ParallelMatching.this.global.Type)Boolean">tpe</a> =:= <a href="#540659" title="ParallelMatching.this.global.Type">headType</a>) <a href="#540676" title="MatchMatrix.this.Scrutinee" class="keyword">this</a>
        <span class="keyword">else</span> <span title="MatchMatrix.this.Scrutinee" class="keyword">new</span> <a href="#540676" title="MatchMatrix.this.Scrutinee">Scrutinee</a>(<a href="TransMatcher.scala.html#79385" title="(pos: scala.tools.nsc.util.Position,tpe: ParallelMatching.this.global.Type,flags: List[Long],name: ParallelMatching.this.global.Name)ParallelMatching.this.global.Symbol">newVar</a>(<a href="#540517" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="#540659" title="ParallelMatching.this.global.Type">headType</a>, flags = <a href="#540524" title="=&gt; List[Long]">flags</a>))
    }

    case <span class="keyword">class</span> <a title="class Patterns extends java.lang.Object with ScalaObject with Product" id="540875">Patterns</a><span title="ScalaObject">(</span><a title="MatchMatrix.this.Scrutinee" id="540877">scrut</a>: <a href="#540676" title="MatchMatrix.this.Scrutinee">Scrutinee</a>, <a title="List[ParallelMatching.this.Pattern]" id="540878">ps</a>: <span title="List[ParallelMatching.this.Pattern]">List</span>[Pattern]) {
      <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Tree]" id="540754">trees</a> = <a href="#540878" title="(f: (ParallelMatching.this.Pattern) =&gt; ParallelMatching.this.global.Tree)(implicit bf: scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Tree,List[ParallelMatching.this.global.Tree],List[ParallelMatching.this.Pattern]])List[ParallelMatching.this.global.Tree]">ps</a> <span title="scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Tree,List[ParallelMatching.this.global.Tree],List#Coll]">map</span> (<a href="#540794" title="ParallelMatching.this.Pattern">_</a>.<a href="#535774" title="=&gt; ParallelMatching.this.global.Tree">tree</a>)
      <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ParallelMatching.this.Pattern" id="540756">head</a> = <a href="#540878" title="=&gt; List[ParallelMatching.this.Pattern]">ps</a>.<span title="=&gt; ParallelMatching.this.Pattern">head</span>
      <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="MatchMatrix.this.Patterns" id="540758">tail</a> = <a href="#540875" title="(scrut: MatchMatrix.this.Scrutinee,ps: List[ParallelMatching.this.Pattern])MatchMatrix.this.Patterns">Patterns</a>(<a href="#540877" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>, <a href="#540878" title="=&gt; List[ParallelMatching.this.Pattern]">ps</a>.<span title="=&gt; List[ParallelMatching.this.Pattern]">tail</span>)
      <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="540760">last</a> = <a href="#540878" title="=&gt; List[ParallelMatching.this.Pattern]">ps</a>.<span title="=&gt; ParallelMatching.this.Pattern">last</span>.<a href="#535774" title="=&gt; ParallelMatching.this.global.Tree">tree</a>
      <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ParallelMatching.this.global.Type" id="540762">headType</a> = <a href="#540755" title="=&gt; ParallelMatching.this.Pattern">head</a>.<a href="#535762" title="=&gt; ParallelMatching.this.global.Type">tpeIfHead</a>
      <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="540764">isCaseHead</a> = <a href="PatternNodes.scala.html#79217" title="(t: ParallelMatching.this.global.Type)Boolean">isCaseClass</a>(<a href="#540761" title="=&gt; ParallelMatching.this.global.Type">headType</a>)
      <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Tree]" id="540766">dummies</a> = <span title="List[ParallelMatching.this.global.Tree]" class="keyword">if</span> (<a href="#540763" title="=&gt; Boolean">isCaseHead</a>) <a href="PatternNodes.scala.html#79226" title="(i: Int)List[ParallelMatching.this.global.Tree]">getDummies</a>(<a href="#540761" title="=&gt; ParallelMatching.this.global.Type">headType</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; ParallelMatching.this.global.Symbol">typeSymbol</a>.<a href="../symtab/Symbols.scala.html#27038" title="=&gt; List[ParallelMatching.this.global.Symbol]">caseFieldAccessors</a>.<span title="=&gt; Int">length</span>) <span class="keyword">else</span> <span title="object Nil">Nil</span>
      <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Int" id="540768">size</a> = <a href="#540878" title="=&gt; List[ParallelMatching.this.Pattern]">ps</a>.<span title="=&gt; Int">length</span>

      <span class="keyword">def</span> <a title="(i: Int)ParallelMatching.this.global.Tree" id="540769">apply</a>(<a title="Int" id="540904">i</a>: <span title="Int">Int</span>): <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a> = <a href="#540878" title="(n: Int)ParallelMatching.this.Pattern">ps</a>(<a href="#540904" title="Int">i</a>).<a href="#535774" title="=&gt; ParallelMatching.this.global.Tree">tree</a>
      <span class="keyword">def</span> <a title="()List[(ParallelMatching.this.global.Tree, Int)]" id="540770">zip</a>() = <a href="#540753" title="=&gt; List[ParallelMatching.this.global.Tree]">trees</a>.<span title="(implicit bf: scala.collection.generic.BuilderFactory[(ParallelMatching.this.global.Tree, Int),List[(ParallelMatching.this.global.Tree, Int)],List[ParallelMatching.this.global.Tree]])List[(ParallelMatching.this.global.Tree, Int)]">zipWithIndex</span>
      <span class="keyword">def</span> <a title="[T](others: List[T])List[(ParallelMatching.this.global.Tree, T)]" id="540771">zip</a>[<a title="&gt;: Nothing &lt;: Any" id="540773">T</a>](<a title="List[T]" id="540998">others</a>: <span title="List[T]">List</span>[T]) = <a href="#540753" title="(that: Iterable[T])(implicit bf: scala.collection.generic.BuilderFactory[(ParallelMatching.this.global.Tree, T),List[(ParallelMatching.this.global.Tree, T)],List[ParallelMatching.this.global.Tree]])List[(ParallelMatching.this.global.Tree, T)]">trees</a> <span title="scala.collection.generic.BuilderFactory[(ParallelMatching.this.global.Tree, T),List[(ParallelMatching.this.global.Tree, T)],List#Coll]">zip</span> <a href="#540998" title="List[T]">others</a>

      <span class="keyword">def</span> <a title="(pat: ParallelMatching.this.Pattern)Boolean" id="540774">isObjectTest</a>(<a title="ParallelMatching.this.Pattern" id="541093">pat</a>: <a href="#535750" title="ParallelMatching.this.Pattern">Pattern</a>)  = <a href="#535771" title="(head: ParallelMatching.this.global.Type)Boolean">pat</a> isObjectTest <a href="#540761" title="=&gt; ParallelMatching.this.global.Type">headType</a>
      <span class="keyword">def</span> <a title="(pat: ParallelMatching.this.global.Tree)Boolean" id="540775">isObjectTest</a>(<a title="ParallelMatching.this.global.Tree" id="541098">pat</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>)     = <a href="#535750" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.Pattern">Pattern</a><a href="#535771" title="(head: ParallelMatching.this.global.Type)Boolean">(</a><a href="#541098" title="ParallelMatching.this.global.Tree">pat</a>) isObjectTest <a href="#540761" title="=&gt; ParallelMatching.this.global.Type">headType</a>
      
      <span class="keyword">def</span> <a title="()Option[(List[ParallelMatching.this.global.Tree], Option[ParallelMatching.this.global.Tree])]" id="540776">extractSimpleSwitch</a>(): <span title="Option[(List[ParallelMatching.this.global.Tree], Option[ParallelMatching.this.global.Tree])]">Option</span>[(List[Tree], Option[Tree])] = {
        <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.Tree)Boolean" id="541110">isSwitchableDefault</a>(<a title="ParallelMatching.this.global.Tree" id="541114">x</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>) = <a href="#79292" title="(t: ParallelMatching.this.global.Tree)Boolean">isSwitchableConst</a><span title="(x$1: Boolean)Boolean">(</span><a href="#541114" title="ParallelMatching.this.global.Tree">x</a>) || <a href="#79296" title="(t: ParallelMatching.this.global.Tree)Boolean">isDefaultPattern</a>(<a href="#541114" title="ParallelMatching.this.global.Tree">x</a>)
        <span class="keyword">val</span> <a href="#541112" title="(List[ParallelMatching.this.global.Tree], List[ParallelMatching.this.global.Tree])">(</a><a href="#541111" title="List[ParallelMatching.this.global.Tree]" id="541112">lits</a>, <a href="#541111" title="List[ParallelMatching.this.global.Tree]" id="541113">others</a>) = <a href="#540753" title="(p: (ParallelMatching.this.global.Tree) =&gt; Boolean)(List[ParallelMatching.this.global.Tree], List[ParallelMatching.this.global.Tree])">trees</a> <span title="(List[ParallelMatching.this.global.Tree], List[ParallelMatching.this.global.Tree]) @unchecked">span</span> <a href="#79292" title="(t: ParallelMatching.this.global.Tree)Boolean">isSwitchableConst</a>
        <a href="#541113" title="List[ParallelMatching.this.global.Tree]">others</a> <span title="Option[(List[ParallelMatching.this.global.Tree], Option[ParallelMatching.this.global.Tree])]" class="keyword">match</span> {
          <span title="Some[(List[ParallelMatching.this.global.Tree], object None)]" class="keyword">case</span> <span title="object Nil">Nil</span>                                =&gt; <span title="(x: (List[ParallelMatching.this.global.Tree], object None))Some[(List[ParallelMatching.this.global.Tree], object None)]">Some</span><span title="(_1: List[ParallelMatching.this.global.Tree],_2: object None)(List[ParallelMatching.this.global.Tree], object None)">(</span><a href="#541112" title="List[ParallelMatching.this.global.Tree]">lits</a>, <span title="object None">None</span>)
          // TODO: This needs to also allow the case that the last is a compatible type pattern.
          <span title="Some[(List[ParallelMatching.this.global.Tree], Some[ParallelMatching.this.global.Tree])]" class="keyword">case</span> <a href="#541162" title="(x: List[ParallelMatching.this.global.Tree])Some[List[ParallelMatching.this.global.Tree]]">List</a>(<a title="ParallelMatching.this.global.Tree" id="541171">x</a>) <span class="keyword">if</span> <a href="#541110" title="(x: ParallelMatching.this.global.Tree)Boolean">isSwitchableDefault</a>(<a href="#541171" title="ParallelMatching.this.global.Tree">x</a>)  =&gt; <span title="(x: (List[ParallelMatching.this.global.Tree], Some[ParallelMatching.this.global.Tree]))Some[(List[ParallelMatching.this.global.Tree], Some[ParallelMatching.this.global.Tree])]">Some</span><span title="(_1: List[ParallelMatching.this.global.Tree],_2: Some[ParallelMatching.this.global.Tree])(List[ParallelMatching.this.global.Tree], Some[ParallelMatching.this.global.Tree])">(</span><a href="#541112" title="List[ParallelMatching.this.global.Tree]">lits</a>, <span title="(x: ParallelMatching.this.global.Tree)Some[ParallelMatching.this.global.Tree]">Some</span>(<a href="#541171" title="ParallelMatching.this.global.Tree">x</a>))
          <span title="None.type" class="keyword">case</span> _                                  =&gt; <span title="object None">None</span>
        } 
      }
      
      // an unapply for which we don't need a type test (the scrutinee's static type conforms
      // to the unapply's argument type.)
      <span class="keyword">object</span> <a title="object Patterns.this.SafeUnapply" id="540777">SafeUnapply</a> <span title="ScalaObject">{</span>
        <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.Tree)Boolean" id="541194">unapply</a>(<a title="ParallelMatching.this.global.Tree" id="541198">x</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>): <span title="Boolean">Boolean</span> = <a href="../ast/TreeDSL.scala.html#42477" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,Boolean])Boolean">cond</a>(<a href="#541198" title="ParallelMatching.this.global.Tree">x</a>) <a href="#541210" title="Boolean">{</a> <span title="Boolean" class="keyword">case</span> <a href="PatternNodes.scala.html#536120" title="(x: ParallelMatching.this.global.Tree)Option[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Type, List[ParallelMatching.this.global.Tree])]">__UnApply</a>(_,<a title="ParallelMatching.this.global.Type" id="541216">tpe</a>,_) =&gt; <a href="#540877" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="../symtab/Types.scala.html#30235" title="(that: ParallelMatching.this.global.Type)Boolean">tpe</a> &lt;:&lt; <a href="#541216" title="ParallelMatching.this.global.Type">tpe</a> }
      }
      
      <span class="keyword">object</span> <a title="object Patterns.this.SimpleSwitch" id="540779">SimpleSwitch</a> <span title="ScalaObject">{</span>
        // TODO - scala&gt; (5: Any) match { case 5 =&gt; 5 ; case 6 =&gt; 7 }
        // ... should compile to a switch.  It doesn't because the scrut isn't Int/Char, but
        // that could be handle in an if/else since every pattern requires an Int.
        // More immediately, Byte and Short scruts should also work.
        <span class="keyword">def</span> <a title="(x: MatchMatrix.this.Patterns)Option[(List[ParallelMatching.this.global.Tree], Option[ParallelMatching.this.global.Tree])]" id="541224">unapply</a>(<a title="MatchMatrix.this.Patterns" id="541228">x</a>: <a href="#540875" title="MatchMatrix.this.Patterns">Patterns</a>) = <span title="Option[(List[ParallelMatching.this.global.Tree], Option[ParallelMatching.this.global.Tree])]" class="keyword">if</span> (<a href="#541228" title="MatchMatrix.this.Patterns">x</a>.<a href="#540877" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540521" title="=&gt; Boolean">isSimple</a>) <a href="#541228" title="MatchMatrix.this.Patterns">x</a>.<a href="#540776" title="()Option[(List[ParallelMatching.this.global.Tree], Option[ParallelMatching.this.global.Tree])]">extractSimpleSwitch</a> <span class="keyword">else</span> <span title="object None">None</span>
      }

      <span class="keyword">def</span> <a title="(rest: MatchMatrix.this.Rep)MatchMatrix.this.RuleApplication" id="540781">mkRule</a>(<a title="MatchMatrix.this.Rep" id="541233">rest</a>: <a href="#540070" title="MatchMatrix.this.Rep">Rep</a>): <a href="#81067" title="MatchMatrix.this.RuleApplication">RuleApplication</a> =
        <a href="#79285" title="(s: String,x: MatchMatrix.this.RuleApplication)MatchMatrix.this.RuleApplication">logAndReturn</a>(<span title="java.lang.String(&quot;mkRule: &quot;)" class="string">&quot;mkRule: &quot;</span>, <a href="#540755" title="=&gt; ParallelMatching.this.Pattern">head</a>.<a href="#535774" title="=&gt; ParallelMatching.this.global.Tree">tree</a> <span title="MatchMatrix.this.RuleApplication" class="keyword">match</span> {
            <span title="MatchMatrix.this.MixEquals" class="keyword">case</span> <a title="ParallelMatching.this.global.Tree" id="541255">x</a> <span class="keyword">if</span> <a href="PatternNodes.scala.html#79215" title="(t: ParallelMatching.this.global.Type)Boolean">isEquals</a>(<a href="#541255" title="ParallelMatching.this.global.Tree">x</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; ParallelMatching.this.global.Type">tpe</a>)                 =&gt; <span title="MatchMatrix.this.MixEquals" class="keyword">new</span> <a href="#81078" title="MatchMatrix.this.MixEquals">MixEquals</a>(<a href="#540875" title="MatchMatrix.this.Patterns" class="keyword">this</a>, <a href="#541233" title="MatchMatrix.this.Rep">rest</a>)
            <span title="MatchMatrix.this.MixSequenceStar" class="keyword">case</span> <a title="ParallelMatching.this.global.ArrayValue" id="541293">x</a>: <a href="../ast/Trees.scala.html#26676" title="ParallelMatching.this.global.ArrayValue">ArrayValue</a> <span class="keyword">if</span> <a href="#79295" title="(t: ParallelMatching.this.global.Tree)Boolean">isRightIgnoring</a>(<a href="#541293" title="ParallelMatching.this.global.ArrayValue">x</a>)  =&gt; <span title="MatchMatrix.this.MixSequenceStar" class="keyword">new</span> <a href="#81077" title="MatchMatrix.this.MixSequenceStar">MixSequenceStar</a>(<a href="#540875" title="MatchMatrix.this.Patterns" class="keyword">this</a>, <a href="#541233" title="MatchMatrix.this.Rep">rest</a>)
            <span title="MatchMatrix.this.MixSequence" class="keyword">case</span> <a title="ParallelMatching.this.global.ArrayValue" id="541329">x</a>: <a href="../ast/Trees.scala.html#26676" title="ParallelMatching.this.global.ArrayValue">ArrayValue</a>                        =&gt; <span title="MatchMatrix.this.MixSequence" class="keyword">new</span> <a href="#81076" title="MatchMatrix.this.MixSequence">MixSequence</a>(<a href="#540875" title="MatchMatrix.this.Patterns" class="keyword">this</a>, <a href="#541233" title="MatchMatrix.this.Rep">rest</a>)
            <span title="MatchMatrix.this.MixUnapply" class="keyword">case</span> <a href="#541194" title="(x: ParallelMatching.this.global.Tree)Boolean">SafeUnapply</a>()                        =&gt; <span title="MatchMatrix.this.MixUnapply" class="keyword">new</span> <a href="#81075" title="MatchMatrix.this.MixUnapply">MixUnapply</a>(<a href="#540875" title="MatchMatrix.this.Patterns" class="keyword">this</a>, <a href="#541233" title="MatchMatrix.this.Rep">rest</a>)
            <span title="MatchMatrix.this.RuleApplication" class="keyword">case</span> _ =&gt; <a href="#540875" title="MatchMatrix.this.Patterns" class="keyword">this</a> <span title="MatchMatrix.this.RuleApplication" class="keyword">match</span> {
              <span title="MatchMatrix.this.MixLiteralInts" class="keyword">case</span> <a href="#541224" title="(x: MatchMatrix.this.Patterns)Option[(List[ParallelMatching.this.global.Tree], Option[ParallelMatching.this.global.Tree])]">SimpleSwitch</a>(<a title="List[ParallelMatching.this.global.Tree]" id="541372">lits</a>, <a title="Option[ParallelMatching.this.global.Tree]" id="541373">d</a>)              =&gt; <span title="MatchMatrix.this.MixLiteralInts" class="keyword">new</span> <a href="#81074" title="MatchMatrix.this.MixLiteralInts">MixLiteralInts</a>(<a href="#540875" title="MatchMatrix.this.Patterns" class="keyword">this</a>, <a href="#541233" title="MatchMatrix.this.Rep">rest</a>, <a href="#541372" title="List[ParallelMatching.this.global.Tree]">lits</a>, <a href="#541373" title="Option[ParallelMatching.this.global.Tree]">d</a>)
              <span title="MatchMatrix.this.MixTypes" class="keyword">case</span> _                                  =&gt; <span title="MatchMatrix.this.MixTypes" class="keyword">new</span> <a href="#81082" title="MatchMatrix.this.MixTypes">MixTypes</a>(<a href="#540875" title="MatchMatrix.this.Patterns" class="keyword">this</a>, <a href="#541233" title="MatchMatrix.this.Rep">rest</a>)
            }
          }
        )
    }

    /**
     * Class encapsulating a guard expression in a pattern match:
     *   case ... if(tree) =&gt; ...
     */ 
    case <span class="keyword">class</span> <a title="class Guard extends java.lang.Object with ScalaObject with Product" id="536393">Guard</a><span title="ScalaObject">(</span><a title="ParallelMatching.this.global.Tree" id="536403">tree</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>) {
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="536398">isEmpty</a>   = <a href="#536403" title="(x$1: AnyRef)Boolean">tree</a> eq <a href="../ast/Trees.scala.html#26602" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a>
      <span class="keyword">def</span> <a title="=&gt; MatchMatrix.this.Guard" id="536399">duplicate</a> = <a href="#536393" title="(tree: ParallelMatching.this.global.Tree)MatchMatrix.this.Guard">Guard</a>(<a href="#536403" title="=&gt; ParallelMatching.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29387" title="=&gt; Guard.this.tree.type">duplicate</a>)
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="536400">toString</a>() = <span title="java.lang.String" class="keyword">if</span> (<a href="#536398" title="=&gt; Boolean">isEmpty</a>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <span title="(args: Any*)String" class="string">&quot; // if %s&quot;</span> format <a href="#536403" title="=&gt; ParallelMatching.this.global.Tree">tree</a>
    }
    <span class="keyword">val</span> <a title="MatchMatrix.this.Guard" id="81064">NoGuard</a> = <a href="#536393" title="(tree: ParallelMatching.this.global.Tree)MatchMatrix.this.Guard">Guard</a>(<a href="../ast/Trees.scala.html#26602" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a>)

    /** &quot;The Mixture Rule&quot;

          {v=pat1, pats1 .. } {q1} 
    match {..               } {..} 
          {v=patn, patsn .. } {qn} 

    The is the real work-horse of the algorithm. There is some column whose top-most pattern is a 
    constructor. (Forsimplicity, itisdepicted above asthe left-most column, but anycolumn will do.) 
    The goal is to build a test state with the variablevand some outgoing arcs (one for each construc- 
    tor and possibly a default arc). Foreach constructorcin the selected column, its arc is dened as 
    follows: 

    Let {i1,...,ij} be the rows-indices of the patterns in the column that match c. Since the pat- 
    terns are viewed as regular expressions, this will be the indices of the patterns that either 
    have the same constructor c, or are wildcards. 

    Let {pat1,...,patj} be the patterns in the column corresponding to the indices computed 
    above, and let nbe the arity of the constructor c, i.e. the number of sub-patterns it has. For 
    eachpati, its n sub-patterns are extracted; if pat i is a wildcard, nwildcards are produced 
    instead, each tagged with the right path variable. This results in a pattern matrix with n 
    columns and j rows. This matrix is then appended to the result of selecting, from each col- 
    umn in the rest of the original matrix, those rows whose indices are in {i1,...,ij}. Finally 
    the indices are used to select the corresponding nal states that go with these rows. Note 
    that the order of the indices is signicant; selected rows do not change their relative orders. 
    The arc for the constructor c is now dened as (c,state), where c is cwith any 
    immediate sub-patterns replaced by their path variables (thus c is a simple pattern), and 
    state is the result of recursively applying match to the new matrix and the new sequence 
    of nal states. 

    Finally, the possibility for matching failure is considered. If the set of constructors is exhaustive, 
    then no more arcs are computed. Otherwise, a default arc(_,state)is the last arc. If there are 
    any wildcard patterns in the selected column, then their rows are selected from the rest of the 
    matrix and the nal states, and the state is the result of applying match to the new matrix and 
    states. Otherwise,the error state is used after its reference count has been incremented. 
    **/

    /** picks which rewrite rule to apply
     *  @precondition: column does not contain alternatives
     */
    <span class="keyword">def</span> <a title="(scrut: MatchMatrix.this.Scrutinee,column: List[ParallelMatching.this.global.Tree],rest: MatchMatrix.this.Rep)MatchMatrix.this.RuleApplication" id="81066">MixtureRule</a>(<a title="MatchMatrix.this.Scrutinee" id="541603">scrut</a>: <a href="#540676" title="MatchMatrix.this.Scrutinee">Scrutinee</a>, <a title="List[ParallelMatching.this.global.Tree]" id="541604">column</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree], <a title="MatchMatrix.this.Rep" id="541605">rest</a>: <a href="#540070" title="MatchMatrix.this.Rep">Rep</a>): <a href="#81067" title="MatchMatrix.this.RuleApplication">RuleApplication</a> =
      <a href="#540875" title="(scrut: MatchMatrix.this.Scrutinee,ps: List[ParallelMatching.this.Pattern])MatchMatrix.this.Patterns">Patterns</a><a href="#540781" title="(rest: MatchMatrix.this.Rep)MatchMatrix.this.RuleApplication">(</a><a href="#541603" title="MatchMatrix.this.Scrutinee">scrut</a>, <a href="#541604" title="(f: (ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.Pattern)(implicit bf: scala.collection.generic.BuilderFactory[ParallelMatching.this.Pattern,List[ParallelMatching.this.Pattern],List[ParallelMatching.this.global.Tree]])List[ParallelMatching.this.Pattern]">column</a> <span title="scala.collection.generic.BuilderFactory[ParallelMatching.this.Pattern,List[ParallelMatching.this.Pattern],List#Coll]">map</span> <a href="#535750" title="object ParallelMatching.this.Pattern">Pattern</a>) mkRule <a href="#541605" title="MatchMatrix.this.Rep">rest</a>

    <span class="keyword">sealed</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class RuleApplication extends java.lang.Object with ScalaObject" id="81067">RuleApplication</a> <span title="ScalaObject">{</span>
      <span class="keyword">def</span> <a title="=&gt; MatchMatrix.this.Patterns" id="541236">pats</a>: <a href="#540875" title="MatchMatrix.this.Patterns">Patterns</a>
      <span class="keyword">def</span> <a title="=&gt; MatchMatrix.this.Rep" id="541237">rest</a>: <a href="#540070" title="MatchMatrix.this.Rep">Rep</a>
      <span class="keyword">lazy</span> <span class="keyword">val</span> Patterns<a href="#541241" title="(MatchMatrix.this.Scrutinee, List[ParallelMatching.this.Pattern])" id="541239">(</a><a href="#541238" title="MatchMatrix.this.Scrutinee" id="541241">scrut</a>, <a href="#541238" title="List[ParallelMatching.this.Pattern]" id="541243">patterns</a>) = <a href="#541236" title="=&gt; MatchMatrix.this.Patterns">pats</a>
      <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ParallelMatching.this.Pattern" id="541245">head</a> = <a href="#541236" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#540755" title="=&gt; ParallelMatching.this.Pattern">head</a>
      <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ParallelMatching.this.global.Symbol" id="541247">sym</a> = <a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540678" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>

      /** Creates Some(fail rule) even if xs == Nil. */
      <span class="keyword">def</span> <a title="(xs: List[MatchMatrix.this.Row])Option[MatchMatrix.this.Rep]" id="541248">mkFail</a>(<a title="List[MatchMatrix.this.Row]" id="541673">xs</a>: <span title="List[MatchMatrix.this.Row]">List</span>[Row]): <span title="Option[MatchMatrix.this.Rep]">Option</span>[Rep] = <span title="(x: MatchMatrix.this.Rep)Some[MatchMatrix.this.Rep]">Some</span>(<a href="#81053" title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">make</a>(<a href="#541246" title="=&gt; ParallelMatching.this.global.Symbol">sym</a> <a href="#541677" title="ParallelMatching.this.global.Symbol">::</a> <a href="#541237" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#540072" title="(x: ParallelMatching.this.global.Symbol)List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#541673" title="List[MatchMatrix.this.Row]">xs</a>))
      
      /** Returns None if xs == Nil, Some(fail rule) otherwise. */
      <span class="keyword">def</span> <a title="(xs: List[MatchMatrix.this.Row])Option[MatchMatrix.this.Rep]" id="541249">mkFailOpt</a>(<a title="List[MatchMatrix.this.Row]" id="541690">xs</a>: <span title="List[MatchMatrix.this.Row]">List</span>[Row]): <span title="Option[MatchMatrix.this.Rep]">Option</span>[Rep] = <span title="Option[MatchMatrix.this.Rep]" class="keyword">if</span> (<a href="#541690" title="List[MatchMatrix.this.Row]">xs</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="object None">None</span> <span class="keyword">else</span> <a href="#541248" title="(xs: List[MatchMatrix.this.Row])Option[MatchMatrix.this.Rep]">mkFail</a>(<a href="#541690" title="List[MatchMatrix.this.Row]">xs</a>)
        
      /** Splices scrutinee's symbol in between the given lists */
      <span class="keyword">def</span> <a title="(pre: List[ParallelMatching.this.global.Symbol],post: List[ParallelMatching.this.global.Symbol],rows: List[MatchMatrix.this.Row])MatchMatrix.this.Rep" id="541250">mkNewRep</a>(<a title="List[ParallelMatching.this.global.Symbol]" id="541694">pre</a>: <span title="List[ParallelMatching.this.global.Symbol]">List</span>[Symbol], <a title="List[ParallelMatching.this.global.Symbol]" id="541695">post</a>: <span title="List[ParallelMatching.this.global.Symbol]">List</span>[Symbol], <a title="List[MatchMatrix.this.Row]" id="541696">rows</a>: <span title="List[MatchMatrix.this.Row]">List</span>[Row]) =
        <a href="#81053" title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">make</a>(<a href="#541694" title="List[ParallelMatching.this.global.Symbol]">pre</a> <a href="#541699" title="List[ParallelMatching.this.global.Symbol]">:::</a> <a href="#541246" title="=&gt; ParallelMatching.this.global.Symbol">sym</a> <a href="#541700" title="(prefix: List[ParallelMatching.this.global.Symbol])List[ParallelMatching.this.global.Symbol]">::</a> <a href="#541695" title="(x: ParallelMatching.this.global.Symbol)List[ParallelMatching.this.global.Symbol]">post</a>, <a href="#541696" title="List[MatchMatrix.this.Row]">rows</a>)

      /** translate outcome of the rule application into code (possible involving recursive application of rewriting) */
      <span class="keyword">def</span> <a title="()ParallelMatching.this.global.Tree" id="541251">tree</a>(): <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a> 
    }

    case <span class="keyword">class</span> <a title="class ErrorRule extends MatchMatrix.this.RuleApplication with ScalaObject with Product" id="541744">ErrorRule</a><span title="ScalaObject">(</span>) <span class="keyword">extends</span> <a href="#81067" title="MatchMatrix.this.RuleApplication">RuleApplication</a> {
      <span class="keyword">def</span> <a title="=&gt; MatchMatrix.this.Patterns" id="541719">pats</a>: <a href="#540875" title="MatchMatrix.this.Patterns">Patterns</a> = <a href="MatchUtil.scala.html#79259" title="=&gt; Nothing">impossible</a>
      <span class="keyword">def</span> <a title="=&gt; MatchMatrix.this.Rep" id="541720">rest</a>: <a href="#540070" title="MatchMatrix.this.Rep">Rep</a> = <a href="MatchUtil.scala.html#79259" title="=&gt; Nothing">impossible</a>
      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()ParallelMatching.this.global.Tree" id="541721">tree</a>() = <a href="#81030" title="=&gt; ParallelMatching.this.global.Tree">failTree</a>
    }

    /** {case ... if guard =&gt; bx} else {guardedRest} */
    /** VariableRule: The top-most rows has only variable (non-constructor) patterns. */
    case <span class="keyword">class</span> <a title="class VariableRule extends MatchMatrix.this.RuleApplication with ScalaObject with Product" id="541871">VariableRule</a><span title="ScalaObject">(</span><a title="ParallelMatching.this.Bindings" id="550905">subst</a>: <a href="PatternNodes.scala.html#79252" title="ParallelMatching.this.Bindings">Bindings</a>, <a title="MatchMatrix.this.Guard" id="550906">guard</a>: <a href="#536393" title="MatchMatrix.this.Guard">Guard</a>, <a title="MatchMatrix.this.Rep" id="550907">guardedRest</a>: <a href="#540070" title="MatchMatrix.this.Rep">Rep</a>, <a title="Int" id="550908">bx</a>: <span title="Int">Int</span>) <span class="keyword">extends</span> <a href="#81067" title="MatchMatrix.this.RuleApplication">RuleApplication</a> {
      <span class="keyword">def</span> <a title="=&gt; MatchMatrix.this.Patterns" id="541782">pats</a>: <a href="#540875" title="MatchMatrix.this.Patterns">Patterns</a> = <a href="MatchUtil.scala.html#79259" title="=&gt; Nothing">impossible</a>
      <span class="keyword">def</span> <a title="=&gt; MatchMatrix.this.Rep" id="541783">rest</a>: <a href="#540070" title="MatchMatrix.this.Rep">Rep</a> = <a href="#550907" title="=&gt; MatchMatrix.this.Rep">guardedRest</a>

      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()ParallelMatching.this.global.Tree" id="541784">tree</a>(): <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a> = {
        <span class="keyword">def</span> <a title="=&gt; ParallelMatching.this.global.Tree" id="541802">body</a>      = <a href="#81052" title="(bx: Int,subst: ParallelMatching.this.Bindings)ParallelMatching.this.global.Tree">requestBody</a>(<a href="#550908" title="=&gt; Int">bx</a>, <a href="#550905" title="=&gt; ParallelMatching.this.Bindings">subst</a>)
        <span class="keyword">def</span> <a title="=&gt; ParallelMatching.this.global.If" id="541803">guardTest</a> = <a href="../ast/TreeDSL.scala.html#42524" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">IF</a> <a href="../ast/TreeDSL.scala.html#49788" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">(</a><a href="#550906" title="=&gt; MatchMatrix.this.Guard">guard</a>.<a href="#536399" title="=&gt; MatchMatrix.this.Guard">duplicate</a>.<a href="#536403" title="=&gt; ParallelMatching.this.global.Tree">tree</a>) <a href="../ast/TreeDSL.scala.html#49789" title="(elsep: ParallelMatching.this.global.Tree)ParallelMatching.this.global.If">THEN</a> <a href="#541802" title="=&gt; ParallelMatching.this.global.Tree">body</a> ELSE <a href="#550907" title="=&gt; MatchMatrix.this.Rep">guardedRest</a>.<a href="#81124" title="()ParallelMatching.this.global.Tree">toTree</a>

        <a href="../typechecker/Typers.scala.html#42640" title="(tree: ParallelMatching.this.global.analyzer.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typer</a> typed(
          <span title="ParallelMatching.this.global.analyzer.global.Tree" class="keyword">if</span> (<a href="#550906" title="=&gt; MatchMatrix.this.Guard">guard</a>.<a href="#536398" title="=&gt; Boolean">isEmpty</a>) <a href="#541802" title="=&gt; ParallelMatching.this.global.Tree">body</a>
          <span class="keyword">else</span> <a href="TransMatcher.scala.html#79387" title="(vds: List[ParallelMatching.this.global.Tree],exp: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">squeezedBlock</a>(<a href="PatternNodes.scala.html#536841" title="(implicit typer: ParallelMatching.this.global.analyzer.Typer)List[ParallelMatching.this.global.ValDef]">subst</a> targetParams <a href="TransMatcher.scala.html#79378" title="=&gt; ParallelMatching.this.global.analyzer.Typer">typer</a>, <a href="#541803" title="=&gt; ParallelMatching.this.global.If">guardTest</a>)
        )
      }
    } 

    /** Mixture rule for all literal ints (and chars) i.e. hopefully a switch
     *  will be emitted on the JVM.
     */
    <span class="keyword">class</span> <a title="class MixLiteralInts extends MatchMatrix.this.RuleApplication with ScalaObject" id="81074">MixLiteralInts</a><span title="ScalaObject">(</span>
      <span class="keyword">val</span> <a title="MatchMatrix.this.Patterns" id="541400">pats</a>: <a href="#540875" title="MatchMatrix.this.Patterns">Patterns</a>,
      <span class="keyword">val</span> <a title="MatchMatrix.this.Rep" id="541401">rest</a>: <a href="#540070" title="MatchMatrix.this.Rep">Rep</a>, 
      <a title="List[ParallelMatching.this.global.Tree]" id="541402">literals</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree],
      <a title="Option[ParallelMatching.this.global.Tree]" id="541403">defaultPattern</a>: <span title="Option[ParallelMatching.this.global.Tree]">Option</span>[Tree])
    <span class="keyword">extends</span> <a href="#81067" title="MatchMatrix.this.RuleApplication">RuleApplication</a>
    {
      <span class="keyword">private</span> <span class="keyword">object</span> <a title="object MixLiteralInts.this.NUM" id="541386">NUM</a> <span title="ScalaObject">{</span>
        <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.Tree)Option[Int]" id="542070">unapply</a>(<a title="ParallelMatching.this.global.Tree" id="542071">x</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>): <span title="Option[Int]">Option</span>[Int] = <a href="../ast/TreeDSL.scala.html#42480" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,Int])Option[Int]">condOpt</a>(<a href="../ast/TreeDSL.scala.html#42488" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#542071" title="ParallelMatching.this.global.Tree">x</a>)) <a href="#542777" title="Int">{</a> <span title="Int" class="keyword">case</span> Literal(<a title="ParallelMatching.this.global.Constant" id="542781">c</a>) =&gt; <a href="#542781" title="ParallelMatching.this.global.Constant">c</a>.<a href="../symtab/Constants.scala.html#42817" title="=&gt; Int">intValue</a> }
      }
      // bound vars and rows for default pattern (only one row, but a list is easier to use later)
      <span class="keyword">val</span> <a href="#541389" title="(List[ParallelMatching.this.global.Symbol], List[MatchMatrix.this.Row])">(</a><a href="#541388" title="List[ParallelMatching.this.global.Symbol]" id="541389">defaultVars</a>, <a href="#541388" title="List[MatchMatrix.this.Row]" id="541391">defaultRows</a>) = <a href="#541403" title="Option[ParallelMatching.this.global.Tree]">defaultPattern</a> <span title="(List[ParallelMatching.this.global.Symbol], List[MatchMatrix.this.Row])" class="keyword">match</span> {
        <span title="(object Nil, object Nil)" class="keyword">case</span> <span title="object None">None</span>               =&gt; <span title="(_1: object Nil,_2: object Nil)(object Nil, object Nil)">(</span><span title="object Nil">Nil</span>, <span title="object Nil">Nil</span>)
        <span title="(List[ParallelMatching.this.global.Symbol], List[MatchMatrix.this.Row])" class="keyword">case</span> Some(<a href="PatternNodes.scala.html#536059" title="(x: ParallelMatching.this.global.Tree)Option[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Tree)]">Strip</a>(<a title="List[ParallelMatching.this.global.Symbol]" id="541968">vs</a>, <a title="ParallelMatching.this.global.Tree" id="541969">p</a>)) =&gt; <span title="(_1: List[ParallelMatching.this.global.Symbol],_2: List[MatchMatrix.this.Row])(List[ParallelMatching.this.global.Symbol], List[MatchMatrix.this.Row])">(</span><a href="#541968" title="List[ParallelMatching.this.global.Symbol]">vs</a>, <span title="(xs: MatchMatrix.this.Row*)List[MatchMatrix.this.Row]">List</span>((<a href="#540073" title="(n: Int)MatchMatrix.this.Row">rest</a> rows <a href="#541402" title="List[ParallelMatching.this.global.Tree]">literals</a>.<span title="=&gt; Int">size</span>).<a href="#539950" title="(vs: Iterable[ParallelMatching.this.global.Symbol],tvars: ParallelMatching.this.global.Symbol)MatchMatrix.this.Row">rebind2</a>(<a href="#541968" title="List[ParallelMatching.this.global.Symbol]">vs</a>, <a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540678" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>)))
      }
      // literalMap is a map from each literal to a list of row indices.
      // varMap is a list from each literal to a list of the defined vars.
      <span class="keyword">val</span> <a href="#541394" title="(scala.collection.immutable.IntMap[List[Int]], List[(Int, List[ParallelMatching.this.global.Symbol])])">(</a><a href="#541393" title="scala.collection.immutable.IntMap[List[Int]]" id="541394">literalMap</a>, <a href="#541393" title="List[(Int, List[ParallelMatching.this.global.Symbol])]" id="541396">varMap</a>) = <span title="(scala.collection.immutable.IntMap[List[Int]], List[(Int, List[ParallelMatching.this.global.Symbol])]) @unchecked">{</span>
        <span class="keyword">val</span> <a title="List[Int]" id="542057">tags</a>    = <a href="#541402" title="(f: (ParallelMatching.this.global.Tree) =&gt; Int)(implicit bf: scala.collection.generic.BuilderFactory[Int,List[Int],List[ParallelMatching.this.global.Tree]])List[Int]">literals</a> <span title="scala.collection.generic.BuilderFactory[Int,List[Int],List#Coll]">map</span> <a href="#542068" title="Int">{</a> <span title="Int" class="keyword">case</span> <a href="#542070" title="(x: ParallelMatching.this.global.Tree)Option[Int]">NUM</a>(<a title="Int" id="542076">tag</a>) =&gt; <a href="#542076" title="Int">tag</a> }
        <span class="keyword">val</span> <a title="List[(Int, List[ParallelMatching.this.global.Symbol])]" id="542058">varMap</a>  = <a href="#542057" title="(that: Iterable[List[ParallelMatching.this.global.Symbol]])(implicit bf: scala.collection.generic.BuilderFactory[(Int, List[ParallelMatching.this.global.Symbol]),List[(Int, List[ParallelMatching.this.global.Symbol])],List[Int]])List[(Int, List[ParallelMatching.this.global.Symbol])]">tags</a> <span title="scala.collection.generic.BuilderFactory[(Int, List[ParallelMatching.this.global.Symbol]),List[(Int, List[ParallelMatching.this.global.Symbol])],List#Coll]">zip</span> (<a href="#541402" title="(f: (ParallelMatching.this.global.Tree) =&gt; List[ParallelMatching.this.global.Symbol])(implicit bf: scala.collection.generic.BuilderFactory[List[ParallelMatching.this.global.Symbol],List[List[ParallelMatching.this.global.Symbol]],List[ParallelMatching.this.global.Tree]])List[List[ParallelMatching.this.global.Symbol]]">literals</a> <span title="scala.collection.generic.BuilderFactory[List[ParallelMatching.this.global.Symbol],List[List[ParallelMatching.this.global.Symbol]],List#Coll]">map</span> <a href="PatternNodes.scala.html#79248" title="(x: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Symbol]">definedVars</a>)
        <span class="keyword">val</span> <a title="scala.collection.immutable.IntMap[List[Int]]" id="542059">litMap</a>  = 
          <a href="#542057" title="List[Int]">tags</a>.<span title="(implicit bf: scala.collection.generic.BuilderFactory[(Int, Int),List[(Int, Int)],List[Int]])List[(Int, Int)]">zipWithIndex</span>.<a title="=&gt; List[(Int, Int)]" id="24301">reverse</a>.<span title="(z: scala.collection.immutable.IntMap[List[Int]])(f: (scala.collection.immutable.IntMap[List[Int]], (Int, Int)) =&gt; scala.collection.immutable.IntMap[List[Int]])scala.collection.immutable.IntMap[List[Int]]">foldLeft</span>(<a title="object scala.collection.immutable.IntMap" id="7298">IntMap</a>.<a title="[T]scala.collection.immutable.IntMap[T]" id="542431">empty</a><span title="scala.collection.immutable.IntMap[List[Int]]">[</span><span title="List[Int]">List</span>[Int]]) <a href="#542623" title="scala.collection.immutable.IntMap[List[Int]]">{</a>
            // we reverse before the fold so the list can be built with :: 
            <span title="scala.collection.immutable.IntMap[List[Int]]" class="keyword">case</span> (<a title="scala.collection.immutable.IntMap[List[Int]]" id="542635">map</a>, (<a title="Int" id="542638">tag</a>, <a title="Int" id="542639">index</a>)) =&gt; <a href="#542635" title="scala.collection.immutable.IntMap[List[Int]]">map</a>.<a title="(key: Int,value: List[Int])scala.collection.immutable.IntMap[List[Int]]" id="542465">updated</a>(<a href="#542638" title="Int">tag</a>, <a href="#542639" title="Int">index</a> <a href="#542700" title="Int">::</a> <a href="#542635" title="scala.collection.immutable.IntMap[List[Int]]">map</a>.<a title="(key: Int,default: =&gt; List[Int])List[Int]" id="542456">getOrElse</a><span title="(x: Int)List[Int]">(</span><a href="#542638" title="Int">tag</a>, <span title="object Nil">Nil</span>))
          }
        
        <span title="(_1: scala.collection.immutable.IntMap[List[Int]],_2: List[(Int, List[ParallelMatching.this.global.Symbol])])(scala.collection.immutable.IntMap[List[Int]], List[(Int, List[ParallelMatching.this.global.Symbol])])">(</span><a href="#542059" title="scala.collection.immutable.IntMap[List[Int]]">litMap</a>, <a href="#542058" title="List[(Int, List[ParallelMatching.this.global.Symbol])]">varMap</a>)
      }

      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()ParallelMatching.this.global.Tree" id="541398">tree</a>(): <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a> = {
        // Just a demo of breakIf
        // Interpreter.breakIf(true, &quot;lits&quot; -&gt; literals, &quot;mixlit&quot; -&gt; this, literalMap)
        
        <span class="keyword">def</span> <a title="(Tag: Int,orig: ParallelMatching.this.Bindings)ParallelMatching.this.Bindings" id="542789">bindVars</a>(<a title="Int" id="542794">Tag</a>: <span title="Int">Int</span>, <a title="ParallelMatching.this.Bindings" id="542795">orig</a>: <a href="PatternNodes.scala.html#79252" title="ParallelMatching.this.Bindings">Bindings</a>): <a href="PatternNodes.scala.html#79252" title="ParallelMatching.this.Bindings">Bindings</a> = {
          <span class="keyword">def</span> <a title="(rest: List[(Int, List[ParallelMatching.this.global.Symbol])],bnd: ParallelMatching.this.Bindings)ParallelMatching.this.Bindings" id="542796">myBindVars</a>(<a title="List[(Int, List[ParallelMatching.this.global.Symbol])]" id="542797">rest</a>: <span title="List[(Int, List[ParallelMatching.this.global.Symbol])]">List</span>[(Int, List[Symbol])], <a title="ParallelMatching.this.Bindings" id="542798">bnd</a>: <a href="PatternNodes.scala.html#79252" title="ParallelMatching.this.Bindings">Bindings</a>): <a href="PatternNodes.scala.html#79252" title="ParallelMatching.this.Bindings">Bindings</a> = <a href="#542797" title="List[(Int, List[ParallelMatching.this.global.Symbol])]">rest</a> <span title="ParallelMatching.this.Bindings" class="keyword">match</span> {
            <span title="ParallelMatching.this.Bindings" class="keyword">case</span> <span title="object Nil">Nil</span> =&gt; <a href="#542798" title="ParallelMatching.this.Bindings">bnd</a>
            <span title="ParallelMatching.this.Bindings" class="keyword">case</span> (<a href="#542794" title="Int">Tag</a>,<a title="List[ParallelMatching.this.global.Symbol]" id="542805">vs</a>)::<a title="List[(Int, List[ParallelMatching.this.global.Symbol])]" id="542808">xs</a> =&gt; <a href="#542796" title="(rest: List[(Int, List[ParallelMatching.this.global.Symbol])],bnd: ParallelMatching.this.Bindings)ParallelMatching.this.Bindings">myBindVars</a>(<a href="#542808" title="List[(Int, List[ParallelMatching.this.global.Symbol])]">xs</a>, <a href="#542798" title="ParallelMatching.this.Bindings">bnd</a>.<a href="PatternNodes.scala.html#536838" title="(vs: Iterable[ParallelMatching.this.global.Symbol],tvar: ParallelMatching.this.global.Symbol)ParallelMatching.this.Bindings">add</a>(<a href="#542805" title="List[ParallelMatching.this.global.Symbol]">vs</a>, <a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540678" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>))
            <span title="ParallelMatching.this.Bindings" class="keyword">case</span> (_,  <a title="List[ParallelMatching.this.global.Symbol]" id="542823">vs</a>)::<a title="List[(Int, List[ParallelMatching.this.global.Symbol])]" id="542826">xs</a> =&gt; <a href="#542796" title="(rest: List[(Int, List[ParallelMatching.this.global.Symbol])],bnd: ParallelMatching.this.Bindings)ParallelMatching.this.Bindings">myBindVars</a>(<a href="#542826" title="List[(Int, List[ParallelMatching.this.global.Symbol])]">xs</a>, <a href="#542798" title="ParallelMatching.this.Bindings">bnd</a>)
          }
          <a href="#542796" title="(rest: List[(Int, List[ParallelMatching.this.global.Symbol])],bnd: ParallelMatching.this.Bindings)ParallelMatching.this.Bindings">myBindVars</a>(<a href="#541396" title="=&gt; List[(Int, List[ParallelMatching.this.global.Symbol])]">varMap</a>, <a href="#542795" title="ParallelMatching.this.Bindings">orig</a>)
        }
        
        // creates a row transformer for injecting the default case bindings at a given index
        <span class="keyword">def</span> <a title="(index: Int)(MatchMatrix.this.Row) =&gt; MatchMatrix.this.Row" id="542790">addDefaultVars</a>(<a title="Int" id="542833">index</a>: <span title="Int">Int</span>): Row =&gt; Row =
          <span title="(MatchMatrix.this.Row) =&gt; MatchMatrix.this.Row" class="keyword">if</span> (<a href="#541389" title="=&gt; List[ParallelMatching.this.global.Symbol]">defaultVars</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#542839" title="(x: MatchMatrix.this.Row)MatchMatrix.this.Row">identity</a>
          <span class="keyword">else</span> (r: <a href="#539973" title="MatchMatrix.this.Row">Row</a>) =&gt; <a href="#542844" title="MatchMatrix.this.Row">r</a>.<a href="#539950" title="(vs: Iterable[ParallelMatching.this.global.Symbol],tvars: ParallelMatching.this.global.Symbol)MatchMatrix.this.Row">rebind2</a>(<a href="#540769" title="(i: Int)ParallelMatching.this.global.Tree">pats</a><a href="#81152" title="implicit scala.tools.nsc.matching.ParallelMatching.Implicits.mkPattern : (t: ParallelMatching.this.global.Tree)ParallelMatching.this.Pattern">(</a><a href="#542833" title="Int">index</a>).<a href="#535767" title="=&gt; List[ParallelMatching.this.global.Symbol]">boundVariables</a>, <a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540678" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>)
        
        <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.CaseDef]" id="542791">cases</a> =
          <span class="keyword">for</span> ((<a title="Int" id="542887">tag</a>, <a title="List[Int]" id="542888">indices</a>) &lt;- <a href="#541394" title="=&gt; scala.collection.immutable.IntMap[List[Int]]">literalMap</a>.<a href="#542863" title="(f: ((Int, List[Int])) =&gt; ParallelMatching.this.global.CaseDef)(implicit bf: scala.collection.generic.BuilderFactory[ParallelMatching.this.global.CaseDef,List[ParallelMatching.this.global.CaseDef],List[(Int, List[Int])]])List[ParallelMatching.this.global.CaseDef]" id="542435">toList</a>) <span class="keyword">yield</span> {
            <span class="keyword">val</span> <a title="List[MatchMatrix.this.Row]" id="542891">newRows</a> = <a href="#542888" title="(f: (Int) =&gt; MatchMatrix.this.Row)(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[Int]])List[MatchMatrix.this.Row]">indices</a> <span title="scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List#Coll]">map</span> (<a title="Int" id="542902">i</a> =&gt; <a href="#542790" title="(index: Int)(MatchMatrix.this.Row) =&gt; MatchMatrix.this.Row">addDefaultVars</a><span title="(v1: MatchMatrix.this.Row)MatchMatrix.this.Row">(</span><a href="#542902" title="Int">i</a>)(<a href="#540073" title="(n: Int)MatchMatrix.this.Row">rest</a> rows <a href="#542902" title="Int">i</a>))
            <span class="keyword">val</span> <a title="MatchMatrix.this.Rep" id="542892">r</a>       = <a href="#81053" title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">make</a>(<a href="#541401" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#540072" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#542891" title="List[MatchMatrix.this.Row]">newRows</a> <a href="#542999" title="List[MatchMatrix.this.Row]">:::</a> <a href="#541391" title="(prefix: List[MatchMatrix.this.Row])List[MatchMatrix.this.Row]">defaultRows</a>)
            <span class="keyword">val</span> <a title="MatchMatrix.this.Rep" id="542893">r2</a>      = <a href="#81053" title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">make</a>(<a href="#542892" title="MatchMatrix.this.Rep">r</a>.<a href="#540072" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#542892" title="MatchMatrix.this.Rep">r</a>.<a href="#540073" title="(f: (MatchMatrix.this.Row) =&gt; MatchMatrix.this.Row)(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[MatchMatrix.this.Row]])List[MatchMatrix.this.Row]">rows</a> <span title="scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List#Coll]">map</span> (<a title="MatchMatrix.this.Row" id="543017">x</a> =&gt; <a href="#539949" title="(b: ParallelMatching.this.Bindings)MatchMatrix.this.Row">x</a> rebind <a href="#542789" title="(Tag: Int,orig: ParallelMatching.this.Bindings)ParallelMatching.this.Bindings">bindVars</a>(<a href="#542887" title="Int">tag</a>, <a href="#543017" title="MatchMatrix.this.Row">x</a>.<a href="#539976" title="=&gt; ParallelMatching.this.Bindings">subst</a>)))

            <a href="../ast/TreeDSL.scala.html#42514" title="(pat: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.CaseStart">CASE</a><a href="../ast/TreeDSL.scala.html#543087" title="(body: ParallelMatching.this.global.Tree)ParallelMatching.this.global.CaseDef">(</a><a href="../ast/Trees.scala.html#26740" title="(value: Any)ParallelMatching.this.global.Literal">Literal</a>(<a href="#542887" title="Int">tag</a>)) ==&gt; <a href="#542893" title="MatchMatrix.this.Rep">r2</a>.<a href="#81124" title="()ParallelMatching.this.global.Tree">toTree</a>
          }
        
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="542792">defaultTree</a>       = <a href="#81053" title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">make</a>(<a href="#541401" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#540072" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#541391" title="=&gt; List[MatchMatrix.this.Row]">defaultRows</a>).<a href="#81124" title="()ParallelMatching.this.global.Tree">toTree</a>
        <span class="keyword">def</span> <a title="=&gt; List[ParallelMatching.this.global.CaseDef]" id="542793">casesWithDefault</a>  = <a href="#542791" title="List[ParallelMatching.this.global.CaseDef]">cases</a> <a href="#543183" title="List[ParallelMatching.this.global.CaseDef]">:::</a> <span title="(xs: ParallelMatching.this.global.CaseDef*)List[ParallelMatching.this.global.CaseDef]">List</span><span title="(prefix: List[ParallelMatching.this.global.CaseDef])List[ParallelMatching.this.global.CaseDef]">(</span><a href="../ast/TreeDSL.scala.html#42514" title="(pat: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.CaseStart">CASE</a><a href="../ast/TreeDSL.scala.html#543087" title="(body: ParallelMatching.this.global.Tree)ParallelMatching.this.global.CaseDef">(</a><a href="../ast/TreeDSL.scala.html#535945" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Ident">WILD</a>(<a href="../symtab/Definitions.scala.html#28285" title="=&gt; ParallelMatching.this.global.Symbol">IntClass</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; ParallelMatching.this.global.Type">tpe</a>)) ==&gt; <a href="#542792" title="ParallelMatching.this.global.Tree">defaultTree</a>)

        <a href="#542791" title="List[ParallelMatching.this.global.CaseDef]">cases</a> <span title="ParallelMatching.this.global.Tree" class="keyword">match</span> {
          <span title="ParallelMatching.this.global.If" class="keyword">case</span> <a href="#543210" title="(x: List[ParallelMatching.this.global.CaseDef])Some[List[ParallelMatching.this.global.CaseDef]]">List</a>(CaseDef(<a title="ParallelMatching.this.global.Tree" id="543224">lit</a>, _, <a title="ParallelMatching.this.global.Tree" id="543225">body</a>))  =&gt;
            // only one case becomes if/else
            <a href="../ast/TreeDSL.scala.html#42524" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">IF</a> <a href="../ast/TreeDSL.scala.html#49788" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">(</a><a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="../ast/TreeDSL.scala.html#45071" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Apply">id</a> ANY_== <a href="#543224" title="ParallelMatching.this.global.Tree">lit</a>) <a href="../ast/TreeDSL.scala.html#49789" title="(elsep: ParallelMatching.this.global.Tree)ParallelMatching.this.global.If">THEN</a> <a href="#543225" title="ParallelMatching.this.global.Tree">body</a> ELSE <a href="#542792" title="ParallelMatching.this.global.Tree">defaultTree</a>
          <span title="ParallelMatching.this.global.Match" class="keyword">case</span> _                            =&gt;
            // otherwise cast to an Int if necessary and run match
            <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="543266">target</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a> = <span title="ParallelMatching.this.global.Tree" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="PatternNodes.scala.html#81155" title="implicit scala.tools.nsc.matching.PatternNodes.Types.enrichType : (_tpe: ParallelMatching.this.global.Type)ParallelMatching.this.Types.RichType">tpe</a>.<a href="PatternNodes.scala.html#537167" title="=&gt; Boolean">isInt</a>) <a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="../ast/TreeDSL.scala.html#45084" title="(member: ParallelMatching.this.global.Name)ParallelMatching.this.CODE.SelectStart">id</a> <a href="../ast/TreeDSL.scala.html#42545" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeFromSelectStart : (ss: ParallelMatching.this.CODE.SelectStart)ParallelMatching.this.global.Select">DOT</a> <a href="../symtab/StdNames.scala.html#26531" title="object ParallelMatching.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#30054" title="=&gt; ParallelMatching.this.global.Name">toInt</a> <span class="keyword">else</span> <a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540519" title="=&gt; ParallelMatching.this.global.gen.global.Tree">id</a>
            <a href="../ast/TreeDSL.scala.html#45083" title="(cases: ParallelMatching.this.global.CaseDef*)ParallelMatching.this.global.Match">target</a> MATCH (<a href="#542793" title="=&gt; List[ParallelMatching.this.global.CaseDef]">casesWithDefault</a>: _*)
        }
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="541399">toString</a> = {
        <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;MixLiteralInts {\n  pats: %s\n  varMap: %s\n}&quot;</span>.<span title="(args: Any*)String">format</span>(
          <a href="#541400" title="=&gt; MatchMatrix.this.Patterns">pats</a>, <a href="#541396" title="=&gt; List[(Int, List[ParallelMatching.this.global.Symbol])]">varMap</a>
        )
      }
    }

    /** mixture rule for unapply pattern
     */
    <span class="keyword">class</span> <a title="class MixUnapply extends MatchMatrix.this.RuleApplication with ScalaObject" id="81075">MixUnapply</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="MatchMatrix.this.Patterns" id="541365">pats</a>: <a href="#540875" title="MatchMatrix.this.Patterns">Patterns</a>, <span class="keyword">val</span> <a title="MatchMatrix.this.Rep" id="541366">rest</a>: <a href="#540070" title="MatchMatrix.this.Rep">Rep</a>) <span class="keyword">extends</span> <a href="#81067" title="MatchMatrix.this.RuleApplication">RuleApplication</a> {
      <span class="keyword">lazy</span> <span class="keyword">val</span> <a href="PatternNodes.scala.html#536059" title="(x: ParallelMatching.this.global.Tree)Option[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Tree)]">Strip</a><a href="#52214" title="(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.UnApply, ParallelMatching.this.global.Apply, ParallelMatching.this.global.Tree, List[ParallelMatching.this.global.Tree], List[ParallelMatching.this.global.Tree])" id="1146">(</a><a href="#541345" title="List[ParallelMatching.this.global.Symbol]" id="52214">vs</a>, <a href="#541345" title="ParallelMatching.this.global.UnApply" id="52216">ua</a> @ UnApply(<a href="#541345" title="ParallelMatching.this.global.Apply" id="52218">app</a> @ Apply(<a href="#541345" title="ParallelMatching.this.global.Tree" id="52220">fxn</a>, _ :: <a href="#541345" title="List[ParallelMatching.this.global.Tree]" id="52222">applyTail</a>), <a href="#541345" title="List[ParallelMatching.this.global.Tree]" id="52224">args</a>)) = <a href="#541244" title="=&gt; ParallelMatching.this.Pattern">head</a>.<a href="#535774" title="=&gt; ParallelMatching.this.global.Tree">tree</a>

      <span class="keyword">object</span> <a title="object MixUnapply.this.sameUnapplyCall" id="541359">sameUnapplyCall</a> <span title="ScalaObject">{</span>
        <span class="keyword">def</span> <a title="(fn1: ParallelMatching.this.global.Tree)Boolean" id="543446">sameFunction</a>(<a title="ParallelMatching.this.global.Tree" id="543451">fn1</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>) = <a href="#541353" title="=&gt; ParallelMatching.this.global.Tree">fxn</a>.<a href="../ast/Trees.scala.html#29367" title="(x$1: AnyRef)Boolean">symbol</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="#543451" title="ParallelMatching.this.global.Tree">fn1</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a> &amp;&amp; (<a href="../ast/Trees.scala.html#29385" title="(that: ParallelMatching.this.global.Tree)Boolean">fxn</a> equalsStructure <a href="#543451" title="ParallelMatching.this.global.Tree">fn1</a>)
        <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)Option[List[ParallelMatching.this.global.Tree]]" id="543447">unapply</a>(<a title="ParallelMatching.this.global.Tree" id="543466">t</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>) = <a href="../ast/TreeDSL.scala.html#42480" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,List[ParallelMatching.this.global.Tree]])Option[List[ParallelMatching.this.global.Tree]]">condOpt</a>(<a href="#543466" title="ParallelMatching.this.global.Tree">t</a>) <a href="#543480" title="List[ParallelMatching.this.global.Tree]">{</a> <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> UnApply(Apply(<a title="ParallelMatching.this.global.Tree" id="543485">fn1</a>, _), <a title="List[ParallelMatching.this.global.Tree]" id="543488">args</a>) <span class="keyword">if</span> <a href="#543446" title="(fn1: ParallelMatching.this.global.Tree)Boolean">sameFunction</a>(<a href="#543485" title="ParallelMatching.this.global.Tree">fn1</a>)  =&gt; <a href="#543488" title="List[ParallelMatching.this.global.Tree]">args</a> }
      }

      <span class="keyword">def</span> <a title="(pos: scala.tools.nsc.util.Position,tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Symbol" id="541361">newVarCapture</a>(<a title="scala.tools.nsc.util.Position" id="543497">pos</a>: <a href="../util/Position.scala.html#14710" title="scala.tools.nsc.util.Position">Position</a>, <a title="ParallelMatching.this.global.Type" id="543498">tpe</a>: <a href="../symtab/Types.scala.html#26205" title="ParallelMatching.this.global.Type">Type</a>) =
        <a href="TransMatcher.scala.html#79385" title="(pos: scala.tools.nsc.util.Position,tpe: ParallelMatching.this.global.Type,flags: List[Long],name: ParallelMatching.this.global.Name)ParallelMatching.this.global.Symbol">newVar</a>(<a href="#543497" title="scala.tools.nsc.util.Position">pos</a>, <a href="#543498" title="ParallelMatching.this.global.Type">tpe</a>, flags = <a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540524" title="=&gt; List[Long]">flags</a>)

      /** returns (unapply-call, success-rep, optional fail-rep*/
      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]" id="541362">getTransition</a>(): <a href="#543747" title="MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]">Branch</a>[UnapplyCall] = {
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Symbol" id="543521">unapplyRes</a>  = <a href="#541361" title="(pos: scala.tools.nsc.util.Position,tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Symbol">newVarCapture</a>(<a href="#541349" title="=&gt; ParallelMatching.this.global.UnApply">ua</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="#541351" title="=&gt; ParallelMatching.this.global.Apply">app</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; ParallelMatching.this.global.Type">tpe</a>)
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Apply" id="543522">rhs</a>         = <a href="../ast/Trees.scala.html#49125" title="(fun: ParallelMatching.this.global.Tree,args: List[ParallelMatching.this.global.Tree])ParallelMatching.this.global.Apply">Apply</a><a href="../ast/Trees.scala.html#29366" title="(tp: ParallelMatching.this.global.Type)ParallelMatching.this.global.Apply">(</a><a href="#541353" title="=&gt; ParallelMatching.this.global.Tree">fxn</a>, <a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540519" title="=&gt; ParallelMatching.this.global.gen.global.Tree">id</a> <a href="#543549" title="ParallelMatching.this.global.gen.global.Tree">::</a> <a href="#541355" title="(x: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">applyTail</a>) setType <a href="#543521" title="ParallelMatching.this.global.Symbol">unapplyRes</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; ParallelMatching.this.global.Type">tpe</a>
        <span class="keyword">val</span> <a title="List[(ParallelMatching.this.global.Tree, MatchMatrix.this.Row)]" id="543523">zipped</a>      = <a href="#540771" title="(others: List[MatchMatrix.this.Row])List[(ParallelMatching.this.global.Tree, MatchMatrix.this.Row)]">pats</a> zip <a href="#541366" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#540073" title="=&gt; List[MatchMatrix.this.Row]">rows</a>
        <span class="keyword">val</span> <a title="List[MatchMatrix.this.Row]" id="543524">nrowsOther</a>  = <a href="#543523" title="List[(ParallelMatching.this.global.Tree, MatchMatrix.this.Row)]">zipped</a>.<span title="(f: ((ParallelMatching.this.global.Tree, MatchMatrix.this.Row)) =&gt; Traversable[MatchMatrix.this.Row])(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[(ParallelMatching.this.global.Tree, MatchMatrix.this.Row)]])List[MatchMatrix.this.Row]">tail</span> <span title="scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List#Coll]">flatMap</span> <a href="#543581" title="List[MatchMatrix.this.Row]">{</a> 
          <span title="scala.collection.immutable.Nil.type" class="keyword">case</span> (<a href="PatternNodes.scala.html#539515" title="(x: ParallelMatching.this.global.Tree)Option[ParallelMatching.this.global.Tree]">Stripped</a>(<a href="#543447" title="(t: ParallelMatching.this.global.Tree)Option[List[ParallelMatching.this.global.Tree]]">sameUnapplyCall</a>(_)), _)  =&gt; <span title="object Nil">Nil</span>
          <span title="List[MatchMatrix.this.Row]" class="keyword">case</span> (<a title="ParallelMatching.this.global.Tree" id="543598">pat</a>, <a title="MatchMatrix.this.Row" id="543599">r</a>)                           =&gt; <span title="(xs: MatchMatrix.this.Row*)List[MatchMatrix.this.Row]">List</span>(<a href="#539946" title="(h: ParallelMatching.this.global.Tree)MatchMatrix.this.Row">r</a> insert <a href="#543598" title="ParallelMatching.this.global.Tree">pat</a>)
        }

        <span class="keyword">def</span> <a title="(vdefs: List[ParallelMatching.this.global.Tree],ntemps: List[ParallelMatching.this.global.Symbol],nrows: List[MatchMatrix.this.Row])MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]" id="543525">mkTransition</a>(<a title="List[ParallelMatching.this.global.Tree]" id="543743">vdefs</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree], <a title="List[ParallelMatching.this.global.Symbol]" id="543744">ntemps</a>: <span title="List[ParallelMatching.this.global.Symbol]">List</span>[Symbol], <a title="List[MatchMatrix.this.Row]" id="543745">nrows</a>: <span title="List[MatchMatrix.this.Row]">List</span>[Row]) =
          <a href="#543747" title="(action: MatchMatrix.this.UnapplyCall,succ: MatchMatrix.this.Rep,fail: Option[MatchMatrix.this.Rep])MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]">Branch</a>(
            <a href="#543765" title="(ua: ParallelMatching.this.global.Tree,args: List[ParallelMatching.this.global.Tree])MatchMatrix.this.UnapplyCall">UnapplyCall</a>(<a href="TransMatcher.scala.html#79386" title="(x: ParallelMatching.this.global.Symbol,rhs: ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typedValDef</a>(<a href="#543521" title="ParallelMatching.this.global.Symbol">unapplyRes</a>, <a href="#543522" title="ParallelMatching.this.global.Apply">rhs</a>), <a href="#543743" title="List[ParallelMatching.this.global.Tree]">vdefs</a>),
            <a href="#541250" title="(pre: List[ParallelMatching.this.global.Symbol],post: List[ParallelMatching.this.global.Symbol],rows: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">mkNewRep</a>(<a href="#543744" title="List[ParallelMatching.this.global.Symbol]">ntemps</a>, <a href="#541366" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#540072" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#543745" title="List[MatchMatrix.this.Row]">nrows</a>),
            <a href="#541249" title="(xs: List[MatchMatrix.this.Row])Option[MatchMatrix.this.Rep]">mkFailOpt</a>(<a href="#543524" title="List[MatchMatrix.this.Row]">nrowsOther</a>)
          )

        // Second argument is number of dummies to prepend in the default case
        <span class="keyword">def</span> <a title="(sameFilter: (List[ParallelMatching.this.global.Tree]) =&gt; List[ParallelMatching.this.global.Tree],dum: Int)List[MatchMatrix.this.Row]" id="543526">mkNewRows</a>(<a title="(List[ParallelMatching.this.global.Tree]) =&gt; List[ParallelMatching.this.global.Tree]" id="543803">sameFilter</a>: (List[Tree]) =&gt; List[Tree], <a title="Int" id="543804">dum</a>: <span title="Int">Int</span>) =
          <span class="keyword">for</span> ((<a title="ParallelMatching.this.global.Tree" id="543839">pat</a> @ <a href="PatternNodes.scala.html#536059" title="(x: ParallelMatching.this.global.Tree)Option[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Tree)]">Strip</a>(<a title="List[ParallelMatching.this.global.Symbol]" id="543845">vs</a>, <a title="ParallelMatching.this.global.Tree" id="543846">p</a>), <a title="MatchMatrix.this.Row" id="543848">r</a>) &lt;- <a href="#543523" title="(f: ((ParallelMatching.this.global.Tree, MatchMatrix.this.Row)) =&gt; MatchMatrix.this.Row)(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[(ParallelMatching.this.global.Tree, MatchMatrix.this.Row)]])List[MatchMatrix.this.Row]">zipped</a>) <span class="keyword">yield</span> <a href="#543846" title="ParallelMatching.this.global.Tree">p</a> <span title="MatchMatrix.this.Row" class="keyword">match</span> {
            <span title="MatchMatrix.this.Row" class="keyword">case</span> <a href="#543447" title="(t: ParallelMatching.this.global.Tree)Option[List[ParallelMatching.this.global.Tree]]">sameUnapplyCall</a>(<a title="List[ParallelMatching.this.global.Tree]" id="543854">args</a>)  =&gt; <a href="#543848" title="MatchMatrix.this.Row">r</a>.<a href="#539951" title="(hs: List[ParallelMatching.this.global.Tree],vs: Iterable[ParallelMatching.this.global.Symbol],tvars: ParallelMatching.this.global.Symbol)MatchMatrix.this.Row">insert2</a>(<a href="#543803" title="(v1: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">sameFilter</a>(<a href="#543854" title="List[ParallelMatching.this.global.Tree]">args</a>) <a href="#543875" title="List[ParallelMatching.this.global.Tree]">:::</a> <span title="(xs: object ParallelMatching.this.global.EmptyTree*)List[object ParallelMatching.this.global.EmptyTree]">List</span><span title="(prefix: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">(</span><a href="../ast/Trees.scala.html#26602" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a>), <a href="#543845" title="List[ParallelMatching.this.global.Symbol]">vs</a>, <a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540678" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>)
            <span title="MatchMatrix.this.Row" class="keyword">case</span> _                      =&gt; <a href="#539947" title="(hs: List[ParallelMatching.this.global.Tree])MatchMatrix.this.Row">r</a> insert (<a href="PatternNodes.scala.html#79226" title="(i: Int)List[ParallelMatching.this.global.Tree]">getDummies</a>(<a href="#543804" title="Int">dum</a>) <a href="#543901" title="List[ParallelMatching.this.global.Tree]">:::</a> <span title="(xs: ParallelMatching.this.global.Tree*)List[ParallelMatching.this.global.Tree]">List</span><span title="(prefix: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">(</span><a href="#543839" title="ParallelMatching.this.global.Tree">pat</a>))
          }
        <span class="keyword">def</span> <a title="(s: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.analyzer.global.Tree" id="543527">mkGet</a>(<a title="ParallelMatching.this.global.Symbol" id="544006">s</a>: <a href="../symtab/Symbols.scala.html#26127" title="ParallelMatching.this.global.Symbol">Symbol</a>) = <a href="TransMatcher.scala.html#79386" title="(x: ParallelMatching.this.global.Symbol,rhs: ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typedValDef</a>(<a href="#544006" title="ParallelMatching.this.global.Symbol">s</a>, <a href="../ast/TreeDSL.scala.html#42502" title="(lhs: ParallelMatching.this.global.Tree,op: ParallelMatching.this.global.Name,args: ParallelMatching.this.global.Tree*)ParallelMatching.this.global.Apply">fn</a>(<a href="../ast/TreeDSL.scala.html#42532" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.gen.global.Tree">ID</a>(<a href="#543521" title="ParallelMatching.this.global.Symbol">unapplyRes</a>), <a href="../symtab/StdNames.scala.html#26531" title="object ParallelMatching.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29892" title="=&gt; ParallelMatching.this.global.Name">get</a>))
        <span class="keyword">def</span> <a title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Symbol" id="543528">mkVar</a>(<a title="ParallelMatching.this.global.Type" id="544040">tpe</a>: <a href="../symtab/Types.scala.html#26205" title="ParallelMatching.this.global.Type">Type</a>) = <a href="#541361" title="(pos: scala.tools.nsc.util.Position,tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Symbol">newVarCapture</a>(<a href="#541349" title="=&gt; ParallelMatching.this.global.UnApply">ua</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="#544040" title="ParallelMatching.this.global.Type">tpe</a>)

        // 0 args =&gt; Boolean, 1 =&gt; Option[T], &gt;1 =&gt; Option[? &lt;: ProductN[T1,...,Tn]]
        <a href="#541357" title="=&gt; List[ParallelMatching.this.global.Tree]">args</a>.<span title="=&gt; Int">length</span> <span title="MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]" class="keyword">match</span> {
          <span title="MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]" class="keyword">case</span> <span title="Int(0)" class="int">0</span>  =&gt;
            <a href="#543525" title="(vdefs: List[ParallelMatching.this.global.Tree],ntemps: List[ParallelMatching.this.global.Symbol],nrows: List[MatchMatrix.this.Row])MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]">mkTransition</a>(<span title="object Nil">Nil</span>, <span title="object Nil">Nil</span>, <a href="#543526" title="(sameFilter: (List[ParallelMatching.this.global.Tree]) =&gt; List[ParallelMatching.this.global.Tree],dum: Int)List[MatchMatrix.this.Row]">mkNewRows</a>((<a title="List[ParallelMatching.this.global.Tree]" id="544044">xs</a>) =&gt; <span title="object Nil">Nil</span>, <span title="Int(0)" class="int">0</span>))

          <span title="MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]" class="keyword">case</span> <span title="Int(1)" class="int">1</span> =&gt;
            <span class="keyword">val</span> <a title="ParallelMatching.this.global.Symbol" id="544049">vsym</a>  = <a href="#543528" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Symbol">mkVar</a>(<a href="#541351" title="=&gt; ParallelMatching.this.global.Apply">app</a>.<a href="../symtab/Types.scala.html#30192" title="(n: Int)ParallelMatching.this.global.Type">tpe</a> typeArgs <span title="Int(0)" class="int">0</span>)
            <span class="keyword">val</span> <a title="List[MatchMatrix.this.Row]" id="544050">nrows</a> = <a href="#543526" title="(sameFilter: (List[ParallelMatching.this.global.Tree]) =&gt; List[ParallelMatching.this.global.Tree],dum: Int)List[MatchMatrix.this.Row]">mkNewRows</a>(<a title="List[ParallelMatching.this.global.Tree]" id="544065">xs</a> =&gt; <span title="(xs: ParallelMatching.this.global.Tree*)List[ParallelMatching.this.global.Tree]">List</span>(<a href="#544065" title="List[ParallelMatching.this.global.Tree]">xs</a>.<span title="=&gt; ParallelMatching.this.global.Tree">head</span>), <span title="Int(1)" class="int">1</span>)
            <span class="keyword">val</span> <a title="ParallelMatching.this.global.analyzer.global.Tree" id="544051">vdef</a>  = <a href="#543527" title="(s: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.analyzer.global.Tree">mkGet</a>(<a href="#544049" title="ParallelMatching.this.global.Symbol">vsym</a>)

            <a href="#543525" title="(vdefs: List[ParallelMatching.this.global.Tree],ntemps: List[ParallelMatching.this.global.Symbol],nrows: List[MatchMatrix.this.Row])MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]">mkTransition</a>(<span title="(xs: ParallelMatching.this.global.analyzer.global.Tree*)List[ParallelMatching.this.global.analyzer.global.Tree]">List</span>(<a href="#544051" title="ParallelMatching.this.global.analyzer.global.Tree">vdef</a>), <span title="(xs: ParallelMatching.this.global.Symbol*)List[ParallelMatching.this.global.Symbol]">List</span>(<a href="#544049" title="ParallelMatching.this.global.Symbol">vsym</a>), <a href="#544050" title="List[MatchMatrix.this.Row]">nrows</a>)

          <span title="MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]" class="keyword">case</span> _ =&gt;
            <span class="keyword">val</span> <a title="ParallelMatching.this.global.Symbol" id="544099">uresGet</a>   = <a href="#543528" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Symbol">mkVar</a>(<a href="#541351" title="=&gt; ParallelMatching.this.global.Apply">app</a>.<a href="../symtab/Types.scala.html#30192" title="(n: Int)ParallelMatching.this.global.Type">tpe</a> typeArgs <span title="Int(0)" class="int">0</span>)
            <span class="keyword">val</span> <a title="ParallelMatching.this.global.analyzer.global.Tree" id="544100">vdefHead</a>  = <a href="#543527" title="(s: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.analyzer.global.Tree">mkGet</a>(<a href="#544099" title="ParallelMatching.this.global.Symbol">uresGet</a>)
            <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Type]" id="544101">ts</a>        = <a href="../symtab/Definitions.scala.html#28470" title="(tpe: ParallelMatching.this.global.Type)Option[List[ParallelMatching.this.global.Type]]">getProductArgs</a>(<a href="#544099" title="ParallelMatching.this.global.Symbol">uresGet</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; ParallelMatching.this.global.Type">tpe</a>).<a title="=&gt; List[ParallelMatching.this.global.Type]" id="35043">get</a>
            <span class="keyword">val</span> <a title="List[MatchMatrix.this.Row]" id="544102">nrows</a>     = <a href="#543526" title="(sameFilter: (List[ParallelMatching.this.global.Tree]) =&gt; List[ParallelMatching.this.global.Tree],dum: Int)List[MatchMatrix.this.Row]">mkNewRows</a>(<a href="#544136" title="(x: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">identity</a>, <a href="#544101" title="List[ParallelMatching.this.global.Type]">ts</a>.<span title="=&gt; Int">size</span>)

            <span class="keyword">val</span> <a href="#544104" title="(List[ParallelMatching.this.global.analyzer.global.Tree], List[ParallelMatching.this.global.Symbol])">(</a><a href="#544103" title="List[ParallelMatching.this.global.analyzer.global.Tree]" id="544104">vdefs</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree], <a href="#544103" title="List[ParallelMatching.this.global.Symbol]" id="544105">vsyms</a>: <span title="List[ParallelMatching.this.global.Symbol]">List</span>[Symbol]) = <span title="object List">List</span>.<span title="(xs: List[(ParallelMatching.this.global.analyzer.global.Tree, ParallelMatching.this.global.Symbol)])(List[ParallelMatching.this.global.analyzer.global.Tree], List[ParallelMatching.this.global.Symbol])">unzip</span><span title="(List[ParallelMatching.this.global.analyzer.global.Tree], List[ParallelMatching.this.global.Symbol]) @unchecked">(</span>
              <span class="keyword">for</span> ((<a title="ParallelMatching.this.global.Type" id="544259">vtpe</a>, <a title="Int" id="544260">i</a>) &lt;- <a href="#544101" title="List[ParallelMatching.this.global.Type]">ts</a>.<a href="#544235" title="(f: ((ParallelMatching.this.global.Type, Int)) =&gt; (ParallelMatching.this.global.analyzer.global.Tree, ParallelMatching.this.global.Symbol))(implicit bf: scala.collection.generic.BuilderFactory[(ParallelMatching.this.global.analyzer.global.Tree, ParallelMatching.this.global.Symbol),List[(ParallelMatching.this.global.analyzer.global.Tree, ParallelMatching.this.global.Symbol)],List[(ParallelMatching.this.global.Type, Int)]])List[(ParallelMatching.this.global.analyzer.global.Tree, ParallelMatching.this.global.Symbol)]">zipWithIndex</a>) <span class="keyword">yield</span> {
                <span class="keyword">val</span> <a title="ParallelMatching.this.global.Symbol" id="544263">vchild</a>  = <a href="#543528" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Symbol">mkVar</a>(<a href="#544259" title="ParallelMatching.this.global.Type">vtpe</a>)
                <span class="keyword">val</span> <a title="ParallelMatching.this.global.Symbol" id="544264">accSym</a>  = <a href="../symtab/Definitions.scala.html#28466" title="(z: ParallelMatching.this.global.Symbol,j: Int)ParallelMatching.this.global.Symbol">productProj</a>(<a href="#544099" title="ParallelMatching.this.global.Symbol">uresGet</a>, <a href="#544260" title="(x$1: Int)Int">i</a>+<span title="Int(1)" class="int">1</span>)
                <span class="keyword">val</span> <a title="ParallelMatching.this.global.analyzer.global.Tree" id="544265">rhs</a>     = <a href="../typechecker/Typers.scala.html#42640" title="(tree: ParallelMatching.this.global.analyzer.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typer</a> typed <a href="../ast/TreeDSL.scala.html#42503" title="(lhs: ParallelMatching.this.global.Tree,op: ParallelMatching.this.global.Symbol,args: ParallelMatching.this.global.Tree*)ParallelMatching.this.global.Apply">fn</a>(<a href="../ast/TreeDSL.scala.html#42532" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.gen.global.Tree">ID</a>(<a href="#544099" title="ParallelMatching.this.global.Symbol">uresGet</a>), <a href="#544264" title="ParallelMatching.this.global.Symbol">accSym</a>)

                <span title="(_1: ParallelMatching.this.global.analyzer.global.Tree,_2: ParallelMatching.this.global.Symbol)(ParallelMatching.this.global.analyzer.global.Tree, ParallelMatching.this.global.Symbol)">(</span><a href="TransMatcher.scala.html#79386" title="(x: ParallelMatching.this.global.Symbol,rhs: ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typedValDef</a>(<a href="#544263" title="ParallelMatching.this.global.Symbol">vchild</a>, <a href="#544265" title="ParallelMatching.this.global.analyzer.global.Tree">rhs</a>), <a href="#544263" title="ParallelMatching.this.global.Symbol">vchild</a>)
              })

            <a href="#543525" title="(vdefs: List[ParallelMatching.this.global.Tree],ntemps: List[ParallelMatching.this.global.Symbol],nrows: List[MatchMatrix.this.Row])MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]">mkTransition</a>(<a href="#544100" title="ParallelMatching.this.global.analyzer.global.Tree">vdefHead</a> <a href="#544452" title="ParallelMatching.this.global.analyzer.global.Tree">::</a> <a href="#544104" title="(x: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">vdefs</a>, <a href="#544105" title="List[ParallelMatching.this.global.Symbol]">vsyms</a>, <a href="#544102" title="List[MatchMatrix.this.Row]">nrows</a>)
        }
      } /* def getTransition(...) */

      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()ParallelMatching.this.global.analyzer.global.Tree" id="541363">tree</a>() = {
        <span class="keyword">val</span> Branch<a href="#544465" title="(ParallelMatching.this.global.Tree, List[ParallelMatching.this.global.Tree], MatchMatrix.this.Rep, Option[MatchMatrix.this.Rep])">(</a>UnapplyCall(<a href="#544464" title="ParallelMatching.this.global.Tree" id="544465">uacall</a>, <a href="#544464" title="List[ParallelMatching.this.global.Tree]" id="544466">vdefs</a>), <a href="#544464" title="MatchMatrix.this.Rep" id="544467">srep</a>, <a href="#544464" title="Option[MatchMatrix.this.Rep]" id="544468">frep</a>) = <a href="#81075" title="MixUnapply.this.type" class="keyword">this</a>.<a href="#541362" title="()MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]">getTransition</a>
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="544469">succ</a> = <a href="#544467" title="MatchMatrix.this.Rep">srep</a>.<a href="#81124" title="()ParallelMatching.this.global.Tree">toTree</a>
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="544470">fail</a> = <a href="#544468" title="(f: (MatchMatrix.this.Rep) =&gt; ParallelMatching.this.global.Tree)Option[ParallelMatching.this.global.Tree]">frep</a> <span title="(default: =&gt; ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">map</span> (<a href="#544548" title="MatchMatrix.this.Rep">_</a>.<a href="#81124" title="()ParallelMatching.this.global.Tree">toTree</a>) getOrElse (<a href="#81030" title="=&gt; ParallelMatching.this.global.Tree">failTree</a>)
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.gen.global.Tree" id="544471">cond</a> = 
          <span title="ParallelMatching.this.global.gen.global.Tree" class="keyword">if</span> (<a href="#544465" title="ParallelMatching.this.global.Tree">uacall</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a>.<a href="PatternNodes.scala.html#81155" title="implicit scala.tools.nsc.matching.PatternNodes.Types.enrichType : (_tpe: ParallelMatching.this.global.Type)ParallelMatching.this.Types.RichType">tpe</a>.<a href="PatternNodes.scala.html#537169" title="=&gt; Boolean">isBoolean</a>) <a href="../ast/TreeDSL.scala.html#42532" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.gen.global.Tree">ID</a>(<a href="#544465" title="ParallelMatching.this.global.Tree">uacall</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a>)
          <span class="keyword">else</span> <a href="#544465" title="ParallelMatching.this.global.Tree">uacall</a>.<a href="../ast/TreeDSL.scala.html#42544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkSymbolMethodsFromSymbol : (target: ParallelMatching.this.global.Symbol)ParallelMatching.this.CODE.SymbolMethods">symbol</a> <a href="../ast/TreeDSL.scala.html#45059" title="()ParallelMatching.this.global.Tree">IS_DEFINED</a>

        <a href="../typechecker/Typers.scala.html#42640" title="(tree: ParallelMatching.this.global.analyzer.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typer</a> typed <a href="TransMatcher.scala.html#79387" title="(vds: List[ParallelMatching.this.global.Tree],exp: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">squeezedBlock</a>(
          <span title="(xs: ParallelMatching.this.global.Tree*)List[ParallelMatching.this.global.Tree]">List</span>(<a href="TransMatcher.scala.html#79376" title="(v1: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">handleOuter</a>(<a href="#544465" title="ParallelMatching.this.global.Tree">uacall</a>)),
          <a href="../ast/TreeDSL.scala.html#42524" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">IF</a> <a href="../ast/TreeDSL.scala.html#49788" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">(</a><a href="#544471" title="ParallelMatching.this.global.gen.global.Tree">cond</a>) <a href="../ast/TreeDSL.scala.html#49789" title="(elsep: ParallelMatching.this.global.Tree)ParallelMatching.this.global.If">THEN</a> <a href="TransMatcher.scala.html#79387" title="(vds: List[ParallelMatching.this.global.Tree],exp: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">squeezedBlock</a>(<a href="#544466" title="List[ParallelMatching.this.global.Tree]">vdefs</a>, <a href="#544469" title="ParallelMatching.this.global.Tree">succ</a>) ELSE <a href="#544470" title="ParallelMatching.this.global.Tree">fail</a>
        )
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="541364">toString</a> = {
        <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;MixUnapply {\n  pats: %s\n  ua: %s\n}&quot;</span>.<span title="(args: Any*)String">format</span>(
          <a href="#541365" title="=&gt; MatchMatrix.this.Patterns">pats</a>, <a href="#541349" title="=&gt; ParallelMatching.this.global.UnApply">ua</a>
        )
      }
    }

    /** handle sequence pattern and ArrayValue (but not star patterns)
     */
    <span class="keyword">sealed</span> <span class="keyword">class</span> <a title="class MixSequence extends MatchMatrix.this.RuleApplication with ScalaObject" id="81076">MixSequence</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="MatchMatrix.this.Patterns" id="541330">pats</a>: <a href="#540875" title="MatchMatrix.this.Patterns">Patterns</a>, <span class="keyword">val</span> <a title="MatchMatrix.this.Rep" id="541331">rest</a>: <a href="#540070" title="MatchMatrix.this.Rep">Rep</a>) <span class="keyword">extends</span> <a href="#81067" title="MatchMatrix.this.RuleApplication">RuleApplication</a> {
      /** array elements except for star (if present) */
      <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.ArrayValue)List[ParallelMatching.this.global.Tree]" id="541303">nonStarElems</a>(<a title="ParallelMatching.this.global.ArrayValue" id="544758">x</a>: <a href="../ast/Trees.scala.html#26676" title="ParallelMatching.this.global.ArrayValue">ArrayValue</a>) =
        <span title="List[ParallelMatching.this.global.Tree]" class="keyword">if</span> (<a href="#79295" title="(t: ParallelMatching.this.global.Tree)Boolean">isRightIgnoring</a>(<a href="#544758" title="ParallelMatching.this.global.ArrayValue">x</a>)) <a href="#544758" title="ParallelMatching.this.global.ArrayValue">x</a>.<a href="../ast/Trees.scala.html#145524" title="=&gt; List[ParallelMatching.this.global.Tree]">elems</a>.<span title="=&gt; List[ParallelMatching.this.global.Tree]">init</span> <span class="keyword">else</span> <a href="#544758" title="ParallelMatching.this.global.ArrayValue">x</a>.<a href="../ast/Trees.scala.html#145524" title="=&gt; List[ParallelMatching.this.global.Tree]">elems</a>
        
      <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.ArrayValue)Int" id="541304">elemLength</a>(<a title="ParallelMatching.this.global.ArrayValue" id="544763">x</a>: <a href="../ast/Trees.scala.html#26676" title="ParallelMatching.this.global.ArrayValue">ArrayValue</a>)     = <a href="#541303" title="(x: ParallelMatching.this.global.ArrayValue)List[ParallelMatching.this.global.Tree]">nonStarElems</a>(<a href="#544763" title="ParallelMatching.this.global.ArrayValue">x</a>).<span title="=&gt; Int">length</span>
      <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.ArrayValue)Boolean" id="541305">isAllDefaults</a>(<a title="ParallelMatching.this.global.ArrayValue" id="544769">x</a>: <a href="../ast/Trees.scala.html#26676" title="ParallelMatching.this.global.ArrayValue">ArrayValue</a>)  = <a href="#541303" title="(x: ParallelMatching.this.global.ArrayValue)List[ParallelMatching.this.global.Tree]">nonStarElems</a><span title="(p: (ParallelMatching.this.global.Tree) =&gt; Boolean)Boolean">(</span><a href="#544769" title="ParallelMatching.this.global.ArrayValue">x</a>) forall <a href="#79296" title="(t: ParallelMatching.this.global.Tree)Boolean">isDefaultPattern</a>

      <span class="keyword">final</span> <span class="keyword">def</span> <a title="(xs: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]" id="541306">removeStar</a>(<a title="List[ParallelMatching.this.global.Tree]" id="544784">xs</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree]): <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree] = 
        <a href="#544784" title="List[ParallelMatching.this.global.Tree]">xs</a>.<span title="=&gt; List[ParallelMatching.this.global.Tree]">init</span> <a href="#544786" title="List[ParallelMatching.this.global.Tree]">:::</a> <span title="(xs: ParallelMatching.this.global.Tree*)List[ParallelMatching.this.global.Tree]">List</span><span title="(prefix: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">(</span><a href="PatternNodes.scala.html#79227" title="(vs: List[ParallelMatching.this.global.Symbol],pat: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">makeBind</a>(<a href="#544784" title="List[ParallelMatching.this.global.Tree]">xs</a>.<a href="#81152" title="implicit scala.tools.nsc.matching.ParallelMatching.Implicits.mkPattern : (t: ParallelMatching.this.global.Tree)ParallelMatching.this.Pattern">last</a>.<a href="#535767" title="=&gt; List[ParallelMatching.this.global.Symbol]">boundVariables</a>, <a href="../ast/TreeDSL.scala.html#535945" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Ident">WILD</a>(<a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540522" title="=&gt; ParallelMatching.this.global.Type">seqType</a>)))

      <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(len: Int,x: ParallelMatching.this.global.Tree)Option[List[ParallelMatching.this.global.Tree]]" id="541307">getSubPatterns</a>(<a title="Int" id="544822">len</a>: <span title="Int">Int</span>, <a title="ParallelMatching.this.global.Tree" id="544823">x</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>): <span title="Option[List[ParallelMatching.this.global.Tree]]">Option</span>[List[Tree]] = <a href="../ast/TreeDSL.scala.html#42480" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,List[ParallelMatching.this.global.Tree]])Option[List[ParallelMatching.this.global.Tree]]">condOpt</a>(<a href="#544823" title="ParallelMatching.this.global.Tree">x</a>) <a href="#544836" title="List[ParallelMatching.this.global.Tree]">{</a>
        <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> <a title="ParallelMatching.this.global.ArrayValue" id="544837">av</a> @ ArrayValue(_,<a title="List[ParallelMatching.this.global.Tree]" id="544840">xs</a>) <span class="keyword">if</span> <span title="(x$1: Boolean)Boolean">!</span><a href="#79295" title="(t: ParallelMatching.this.global.Tree)Boolean">isRightIgnoring</a>(<a href="#544837" title="ParallelMatching.this.global.ArrayValue">av</a>) &amp;&amp; <a href="#544840" title="List[ParallelMatching.this.global.Tree]">xs</a>.<span title="(x$1: Int)Boolean">length</span> == <a href="#544822" title="Int">len</a>   =&gt; <a href="#544840" title="List[ParallelMatching.this.global.Tree]">xs</a> <a href="#544854" title="List[ParallelMatching.this.global.Tree]">:::</a> <span title="(xs: object ParallelMatching.this.global.EmptyTree*)List[object ParallelMatching.this.global.EmptyTree]">List</span><span title="(prefix: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">(</span><a href="../ast/Trees.scala.html#26602" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a>)
        <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> <a title="ParallelMatching.this.global.ArrayValue" id="544871">av</a> @ ArrayValue(_,<a title="List[ParallelMatching.this.global.Tree]" id="544874">xs</a>) <span class="keyword">if</span>  <a href="#79295" title="(t: ParallelMatching.this.global.Tree)Boolean">isRightIgnoring</a><span title="(x$1: Boolean)Boolean">(</span><a href="#544871" title="ParallelMatching.this.global.ArrayValue">av</a>) &amp;&amp; <a href="#544874" title="List[ParallelMatching.this.global.Tree]">xs</a>.<span title="(x$1: Int)Boolean">length</span> == <a href="#544822" title="(x$1: Int)Int">len</a>+<span title="Int(1)" class="int">1</span> =&gt; <a href="#541306" title="(xs: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">removeStar</a>(<a href="#544874" title="List[ParallelMatching.this.global.Tree]">xs</a>) // (*) 
        <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> <a href="../ast/Trees.scala.html#26602" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a> | <a href="../ast/TreeDSL.scala.html#535946" title="(other: Any)Boolean">WILD</a>()                                                  =&gt; <a href="PatternNodes.scala.html#79226" title="(i: Int)List[ParallelMatching.this.global.Tree]">getDummies</a>(<a href="#544822" title="(x$1: Int)Int">len</a> + <span title="Int(1)" class="int">1</span>)
      }

      <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(vs: List[ParallelMatching.this.global.Symbol],tail: ParallelMatching.this.global.Symbol,nrows: List[MatchMatrix.this.Row])MatchMatrix.this.Rep" id="541308">makeSuccRep</a>(<a title="List[ParallelMatching.this.global.Symbol]" id="544928">vs</a>: <span title="List[ParallelMatching.this.global.Symbol]">List</span>[Symbol], <a title="ParallelMatching.this.global.Symbol" id="544929">tail</a>: <a href="../symtab/Symbols.scala.html#26127" title="ParallelMatching.this.global.Symbol">Symbol</a>, <a title="List[MatchMatrix.this.Row]" id="544930">nrows</a>: <span title="List[MatchMatrix.this.Row]">List</span>[Row]) =
        <a href="#81053" title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">make</a>(<a href="#544928" title="List[ParallelMatching.this.global.Symbol]">vs</a> <a href="#544933" title="List[ParallelMatching.this.global.Symbol]">:::</a> <a href="#544929" title="ParallelMatching.this.global.Symbol">tail</a> <a href="#544934" title="(prefix: List[ParallelMatching.this.global.Symbol])List[ParallelMatching.this.global.Symbol]">::</a> <a href="#541331" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#540072" title="(x: ParallelMatching.this.global.Symbol)List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#544930" title="List[MatchMatrix.this.Row]">nrows</a>)

      /** True if 'next' must be checked even if 'first' failed to match after passing its length test
        * (the conditional supplied by getPrecondition.) This is an optimization to avoid checking sequences
        * which cannot match due to a length incompatibility.
        */
      <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(first: ParallelMatching.this.global.Tree,next: ParallelMatching.this.global.Tree)Boolean" id="541309">mustCheck</a>(<a title="ParallelMatching.this.global.Tree" id="544951">first</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="ParallelMatching.this.global.Tree" id="544952">next</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>): <span title="Boolean">Boolean</span> =
        <span title="(x$1: Boolean)Boolean">(</span><a href="#544951" title="(x$1: AnyRef)Boolean">first</a> ne <a href="#544952" title="ParallelMatching.this.global.Tree">next</a>) &amp;&amp; (<a href="#79296" title="(t: ParallelMatching.this.global.Tree)Boolean">isDefaultPattern</a><span title="(x$1: Boolean)Boolean">(</span><a href="#544952" title="ParallelMatching.this.global.Tree">next</a>) || <a href="../ast/TreeDSL.scala.html#42477" title="(x: (ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree))(f: PartialFunction[(ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree),Boolean])Boolean">cond</a>(<span title="(_1: ParallelMatching.this.global.Tree,_2: ParallelMatching.this.global.Tree)(ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree)">(</span><a href="#544951" title="ParallelMatching.this.global.Tree">first</a>, <a href="#544952" title="ParallelMatching.this.global.Tree">next</a>)) <a href="#544976" title="Boolean">{</a>
          <span title="Boolean" class="keyword">case</span> (<a title="ParallelMatching.this.global.ArrayValue" id="544979">av</a>: <a href="../ast/Trees.scala.html#26676" title="ParallelMatching.this.global.ArrayValue">ArrayValue</a>, <a title="ParallelMatching.this.global.ArrayValue" id="544980">bv</a>: <a href="../ast/Trees.scala.html#26676" title="ParallelMatching.this.global.ArrayValue">ArrayValue</a>) =&gt;
            // number of non-star elements in each sequence
            <span class="keyword">val</span> <a href="#544984" title="(Int, Int)">(</a><a href="#544983" title="Int" id="544984">firstLen</a>, <a href="#544983" title="Int" id="544985">nextLen</a>) = <span title="(_1: Int,_2: Int)(Int, Int)">(</span><a href="#541304" title="(x: ParallelMatching.this.global.ArrayValue)Int">elemLength</a>(<a href="#544979" title="ParallelMatching.this.global.ArrayValue">av</a>), <a href="#541304" title="(x: ParallelMatching.this.global.ArrayValue)Int">elemLength</a>(<a href="#544980" title="ParallelMatching.this.global.ArrayValue">bv</a>))
            
            // !isAllDefaults(av) || 
            (<span title="(_1: Boolean,_2: Boolean)(Boolean, Boolean)">(</span><a href="#79295" title="(t: ParallelMatching.this.global.Tree)Boolean">isRightIgnoring</a>(<a href="#544979" title="ParallelMatching.this.global.ArrayValue">av</a>), <a href="#79295" title="(t: ParallelMatching.this.global.Tree)Boolean">isRightIgnoring</a>(<a href="#544980" title="ParallelMatching.this.global.ArrayValue">bv</a>)) <span title="Boolean" class="keyword">match</span> {
              <span title="Boolean" class="keyword">case</span> (<span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(true)" class="keyword">true</span>)   =&gt; <a href="#544985" title="(x$1: Int)Boolean">nextLen</a> &lt; <a href="#544984" title="Int">firstLen</a>   // Seq(a,b,c,_*) followed by Seq(a,b,_*) because of (a,b)
              <span title="Boolean" class="keyword">case</span> (<span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(false)" class="keyword">false</span>)  =&gt; 
                <a href="#541305" title="(x: ParallelMatching.this.global.ArrayValue)Boolean">isAllDefaults</a><span title="(x$1: Boolean)Boolean">(</span><a href="#544979" title="ParallelMatching.this.global.ArrayValue">av</a>) &amp;&amp; (<a href="#544985" title="(x$1: Int)Boolean">nextLen</a> &lt; <a href="#544984" title="Int">firstLen</a>)
                // nextLen &lt; firstLen   // Seq(a,b,c,_*) followed by Seq(a,b) because of (a,b)
              <span title="Boolean(true)" class="keyword">case</span> (<span title="Boolean(false)" class="keyword">false</span>, <span title="Boolean(true)" class="keyword">true</span>)  =&gt; <span title="Boolean(true)" class="keyword">true</span>
              // case (false, true)  =&gt; nextLen &lt;= firstLen  // Seq(a,b) followed by Seq(a,b,c,_*) cannot match since len == 2
              // however that conditional causes the following to fail with 2nd case unreachable:
              // def not_unreachable2(xs:Seq[Char]) = xs match {
              //   case Seq(x, y) =&gt; x::y::Nil
              //   case Seq(x, y, z, _*) =&gt; List(x,y)
              // }
              // ...which means this logic must be applied more broadly than I had inferred from the comment
              // &quot;...even if [x] failed to match *after* passing its length test.&quot; So one would think that means
              // the second case would only not be tried if scrut.length == 2, and reachable the rest of the time.
              // XXX note this used to say &quot;nextLen == firstLen&quot; and this caused #2187.  Rewrite this.
              <span title="Boolean" class="keyword">case</span> (<span title="Boolean(false)" class="keyword">false</span>, <span title="Boolean(false)" class="keyword">false</span>) =&gt; <a href="#544985" title="(x$1: Int)Boolean">nextLen</a> &gt;= <a href="#544984" title="Int">firstLen</a>   // same length (self compare ruled out up top)
            })
        })

      case <span class="keyword">class</span> <a title="class TransitionContext extends java.lang.Object with ScalaObject with Product" id="545099">TransitionContext</a><span title="ScalaObject">(</span><a title="(ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree" id="546189">f</a>: <span title="(ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree">TreeFunction2</span>)

      // context (to be used in IF), success and failure Rep 
      <span class="keyword">def</span> <a title="()MatchMatrix.this.Branch[MixSequence.this.TransitionContext]" id="541313">getTransition</a>(): <a href="#543747" title="MatchMatrix.this.Branch[MixSequence.this.TransitionContext]">Branch</a>[TransitionContext] = {
        <a href="#540525" title="(other: ParallelMatching.this.global.Type)Unit">scrut</a> assertIsSubtype <a href="#541244" title="=&gt; ParallelMatching.this.Pattern">head</a>.<a href="#535758" title="=&gt; ParallelMatching.this.global.Type">tpe</a>   // scrut.tpe &lt;:&lt; column.head.tpe confirmed by assertion
        <span class="keyword">val</span> <a title="(ParallelMatching.this.global.ArrayValue, List[ParallelMatching.this.global.Tree])" id="545138">av</a> @ ArrayValue(_, <a href="#545137" title="List[ParallelMatching.this.global.Tree]" id="545139">elems</a>)   = <a href="#541244" title="=&gt; ParallelMatching.this.Pattern">head</a>.<a href="#535774" title="=&gt; ParallelMatching.this.global.Tree">tree</a>
        <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Tree]" id="545140">ys</a>                          = <span title="List[ParallelMatching.this.global.Tree]" class="keyword">if</span> (<a href="#79295" title="(t: ParallelMatching.this.global.Tree)Boolean">isRightIgnoring</a>(<a href="#545138" title="ParallelMatching.this.global.ArrayValue">av</a>)) <a href="#545139" title="List[ParallelMatching.this.global.Tree]">elems</a>.<span title="=&gt; List[ParallelMatching.this.global.Tree]">init</span> <span class="keyword">else</span> <a href="#545139" title="List[ParallelMatching.this.global.Tree]">elems</a>
        <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Symbol]" id="545141">vs</a>                          = <a href="#545140" title="(f: (ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Symbol)(implicit bf: scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Symbol,List[ParallelMatching.this.global.Symbol],List[ParallelMatching.this.global.Tree]])List[ParallelMatching.this.global.Symbol]">ys</a> <span title="scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Symbol,List[ParallelMatching.this.global.Symbol],List#Coll]">map</span> (<a title="ParallelMatching.this.global.Tree" id="545183">y</a> =&gt; <a href="TransMatcher.scala.html#79385" title="(pos: scala.tools.nsc.util.Position,tpe: ParallelMatching.this.global.Type,flags: List[Long],name: ParallelMatching.this.global.Name)ParallelMatching.this.global.Symbol">newVar</a>(<a href="../ast/TreeDSL.scala.html#42488" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#545183" title="ParallelMatching.this.global.Tree">y</a>).<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540523" title="=&gt; ParallelMatching.this.global.Type">elemType</a>))
        <span class="keyword">def</span> <a title="=&gt; ParallelMatching.this.global.gen.global.Tree" id="545142">scrutCopy</a>                   = <a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540519" title="=&gt; ParallelMatching.this.global.gen.global.Tree">id</a>.<a href="../ast/Trees.scala.html#29387" title="=&gt; ParallelMatching.this.global.gen.global.Tree">duplicate</a>

        <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ParallelMatching.this.global.Symbol" id="545144">tail</a>                   = <a href="TransMatcher.scala.html#79385" title="(pos: scala.tools.nsc.util.Position,tpe: ParallelMatching.this.global.Type,flags: List[Long],name: ParallelMatching.this.global.Name)ParallelMatching.this.global.Symbol">newVar</a>(<a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540517" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540522" title="=&gt; ParallelMatching.this.global.Type">seqType</a>)
        <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ParallelMatching.this.global.analyzer.global.Tree" id="545146">lastBinding</a>            = <a href="TransMatcher.scala.html#79386" title="(x: ParallelMatching.this.global.Symbol,rhs: ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typedValDef</a>(<a href="#545143" title="=&gt; ParallelMatching.this.global.Symbol">tail</a>, <a href="../ast/TreeDSL.scala.html#45087" title="(count: Int)ParallelMatching.this.global.Tree">scrutCopy</a> DROP <a href="#545140" title="List[ParallelMatching.this.global.Tree]">ys</a>.<span title="=&gt; Int">size</span>)
        <span class="keyword">def</span> <a title="(i: Int)ParallelMatching.this.global.analyzer.global.Tree" id="545147">elemAt</a>(<a title="Int" id="545299">i</a>: <span title="Int">Int</span>)              = <a href="../typechecker/Typers.scala.html#42640" title="(tree: ParallelMatching.this.global.analyzer.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typer</a> typed ((<a href="../ast/TreeDSL.scala.html#45085" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.CODE.SelectStart">scrutCopy</a> <a href="../ast/TreeDSL.scala.html#44723" title="(args: ParallelMatching.this.global.Tree*)ParallelMatching.this.global.Apply">DOT</a> (<a href="#545142" title="=&gt; ParallelMatching.this.global.gen.global.Tree">scrutCopy</a>.<a href="../symtab/Types.scala.html#30217" title="(name: ParallelMatching.this.global.gen.global.Name)ParallelMatching.this.global.gen.global.Symbol">tpe</a> member <a href="../symtab/StdNames.scala.html#26531" title="object ParallelMatching.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29828" title="=&gt; ParallelMatching.this.global.Name">apply</a>))(<a href="../ast/TreeDSL.scala.html#49329" title="(x: Any)ParallelMatching.this.global.Literal">LIT</a>(<a href="#545299" title="Int">i</a>)))

        <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.analyzer.global.Tree]" id="545148">bindings</a> =
          (<a href="#545141" title="List[ParallelMatching.this.global.Symbol]">vs</a>.<span title="(f: ((ParallelMatching.this.global.Symbol, Int)) =&gt; ParallelMatching.this.global.analyzer.global.Tree)(implicit bf: scala.collection.generic.BuilderFactory[ParallelMatching.this.global.analyzer.global.Tree,List[ParallelMatching.this.global.analyzer.global.Tree],List[(ParallelMatching.this.global.Symbol, Int)]])List[ParallelMatching.this.global.analyzer.global.Tree]">zipWithIndex</span> <span title="scala.collection.generic.BuilderFactory[ParallelMatching.this.global.analyzer.global.Tree,List[ParallelMatching.this.global.analyzer.global.Tree],List#Coll]">map</span> <span title="(f: (ParallelMatching.this.global.Symbol, Int) =&gt; ParallelMatching.this.global.analyzer.global.Tree)((ParallelMatching.this.global.Symbol, Int)) =&gt; ParallelMatching.this.global.analyzer.global.Tree">tupled</span>((<a title="ParallelMatching.this.global.Symbol" id="545546">v</a>, <a title="Int" id="545547">i</a>) =&gt; <a href="TransMatcher.scala.html#79386" title="(x: ParallelMatching.this.global.Symbol,rhs: ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typedValDef</a>(<a href="#545546" title="ParallelMatching.this.global.Symbol">v</a>, <a href="#545147" title="(i: Int)ParallelMatching.this.global.analyzer.global.Tree">elemAt</a>(<a href="#545547" title="Int">i</a>)))) <a href="#545374" title="List[ParallelMatching.this.global.analyzer.global.Tree]">:::</a> <span title="(xs: ParallelMatching.this.global.analyzer.global.Tree*)List[ParallelMatching.this.global.analyzer.global.Tree]">List</span><span title="(prefix: List[ParallelMatching.this.global.analyzer.global.Tree])List[ParallelMatching.this.global.analyzer.global.Tree]">(</span><a href="#545145" title="=&gt; ParallelMatching.this.global.analyzer.global.Tree">lastBinding</a>)

        <span class="keyword">val</span> <a href="#545150" title="(List[Option[MatchMatrix.this.Row]], List[Option[MatchMatrix.this.Row]])">(</a><a href="#545149" title="List[Option[MatchMatrix.this.Row]]" id="545150">nrows</a>, <a href="#545149" title="List[Option[MatchMatrix.this.Row]]" id="545151">frows</a>) = <span title="object List">List</span>.<span title="(xs: List[(Option[MatchMatrix.this.Row], Option[MatchMatrix.this.Row])])(List[Option[MatchMatrix.this.Row]], List[Option[MatchMatrix.this.Row]])">unzip</span><span title="(List[Option[MatchMatrix.this.Row]], List[Option[MatchMatrix.this.Row]]) @unchecked">(</span>
          <span class="keyword">for</span> ((<a title="ParallelMatching.this.global.Tree" id="545697">c</a>, <a title="MatchMatrix.this.Row" id="545698">rows</a>) &lt;- <a href="#540771" title="(others: List[MatchMatrix.this.Row])List[(ParallelMatching.this.global.Tree, MatchMatrix.this.Row)]">pats</a> <a href="#545673" title="(f: ((ParallelMatching.this.global.Tree, MatchMatrix.this.Row)) =&gt; (Option[MatchMatrix.this.Row], Option[MatchMatrix.this.Row]))(implicit bf: scala.collection.generic.BuilderFactory[(Option[MatchMatrix.this.Row], Option[MatchMatrix.this.Row]),List[(Option[MatchMatrix.this.Row], Option[MatchMatrix.this.Row])],List[(ParallelMatching.this.global.Tree, MatchMatrix.this.Row)]])List[(Option[MatchMatrix.this.Row], Option[MatchMatrix.this.Row])]">zip</a> <a href="#541331" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#540073" title="=&gt; List[MatchMatrix.this.Row]">rows</a>) <span class="keyword">yield</span> <a href="#541307" title="(len: Int,x: ParallelMatching.this.global.Tree)Option[List[ParallelMatching.this.global.Tree]]">getSubPatterns</a>(<a href="#545140" title="List[ParallelMatching.this.global.Tree]">ys</a>.<span title="=&gt; Int">size</span>, <a href="#545697" title="ParallelMatching.this.global.Tree">c</a>) <span title="(Option[MatchMatrix.this.Row], Option[MatchMatrix.this.Row])" class="keyword">match</span> {
            <span title="(Some[MatchMatrix.this.Row], Option[MatchMatrix.this.Row])" class="keyword">case</span> Some(<a title="List[ParallelMatching.this.global.Tree]" id="545704">ps</a>) =&gt; <span title="(_1: Some[MatchMatrix.this.Row],_2: Option[MatchMatrix.this.Row])(Some[MatchMatrix.this.Row], Option[MatchMatrix.this.Row])">(</span><span title="(x: MatchMatrix.this.Row)Some[MatchMatrix.this.Row]">Some</span>(<a href="#539947" title="(hs: List[ParallelMatching.this.global.Tree])MatchMatrix.this.Row">rows</a> insert <a href="#545704" title="List[ParallelMatching.this.global.Tree]">ps</a>), <span title="Option[MatchMatrix.this.Row]" class="keyword">if</span> (<a href="#541309" title="(first: ParallelMatching.this.global.Tree,next: ParallelMatching.this.global.Tree)Boolean">mustCheck</a>(<a href="#545138" title="ParallelMatching.this.global.ArrayValue">av</a>, <a href="#545697" title="ParallelMatching.this.global.Tree">c</a>)) <span title="(x: MatchMatrix.this.Row)Some[MatchMatrix.this.Row]">Some</span>(<a href="#539946" title="(h: ParallelMatching.this.global.Tree)MatchMatrix.this.Row">rows</a> insert <a href="#545697" title="ParallelMatching.this.global.Tree">c</a>) <span class="keyword">else</span> <span title="object None">None</span>)
            <span title="(object None, Some[MatchMatrix.this.Row])" class="keyword">case</span> <span title="object None">None</span>     =&gt; <span title="(_1: object None,_2: Some[MatchMatrix.this.Row])(object None, Some[MatchMatrix.this.Row])">(</span><span title="object None">None</span>, <span title="(x: MatchMatrix.this.Row)Some[MatchMatrix.this.Row]">Some</span>(<a href="#539946" title="(h: ParallelMatching.this.global.Tree)MatchMatrix.this.Row">rows</a> insert <a href="#545697" title="ParallelMatching.this.global.Tree">c</a>))
          })

        <span class="keyword">val</span> <a title="MatchMatrix.this.Rep" id="545152">succ</a> = <a href="#541308" title="(vs: List[ParallelMatching.this.global.Symbol],tail: ParallelMatching.this.global.Symbol,nrows: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">makeSuccRep</a>(<a href="#545141" title="List[ParallelMatching.this.global.Symbol]">vs</a>, <a href="#545143" title="=&gt; ParallelMatching.this.global.Symbol">tail</a>, <a href="#545150" title="(f: (Option[MatchMatrix.this.Row]) =&gt; Traversable[MatchMatrix.this.Row])(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[Option[MatchMatrix.this.Row]]])List[MatchMatrix.this.Row]">nrows</a> <span title="scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List#Coll]">flatMap</span> (<a title="Option[MatchMatrix.this.Row]" id="545976">x</a> =&gt; <a href="#545976" title="(xo: Option[MatchMatrix.this.Row])Iterable[MatchMatrix.this.Row]">x</a>))
        <span class="keyword">val</span> <a title="Option[MatchMatrix.this.Rep]" id="545153">fail</a> = <a href="#541248" title="(xs: List[MatchMatrix.this.Row])Option[MatchMatrix.this.Rep]">mkFail</a>(<a href="#545151" title="(f: (Option[MatchMatrix.this.Row]) =&gt; Traversable[MatchMatrix.this.Row])(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[Option[MatchMatrix.this.Row]]])List[MatchMatrix.this.Row]">frows</a> <span title="scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List#Coll]">flatMap</span> (<a title="Option[MatchMatrix.this.Row]" id="546034">x</a> =&gt; <a href="#546034" title="(xo: Option[MatchMatrix.this.Row])Iterable[MatchMatrix.this.Row]">x</a>))
        <span class="keyword">def</span> <a title="=&gt; (ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.If" id="545154">transition</a> = (thenp: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>, elsep: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>) =&gt;
          <a href="../ast/TreeDSL.scala.html#42524" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">IF</a> <a href="../ast/TreeDSL.scala.html#49788" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">(</a><a href="#541315" title="(tree: ParallelMatching.this.global.Tree,lengthArg: Int)ParallelMatching.this.global.analyzer.global.Tree">getPrecondition</a>(<a href="#545142" title="=&gt; ParallelMatching.this.global.gen.global.Tree">scrutCopy</a>, <a href="#541304" title="(x: ParallelMatching.this.global.ArrayValue)Int">elemLength</a>(<a href="#545138" title="ParallelMatching.this.global.ArrayValue">av</a>))) <a href="../ast/TreeDSL.scala.html#49789" title="(elsep: ParallelMatching.this.global.Tree)ParallelMatching.this.global.If">THEN</a> <a href="TransMatcher.scala.html#79387" title="(vds: List[ParallelMatching.this.global.Tree],exp: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">squeezedBlock</a>(<a href="#545148" title="List[ParallelMatching.this.global.analyzer.global.Tree]">bindings</a>, <a href="#546052" title="ParallelMatching.this.global.Tree">thenp</a>) ELSE <a href="#546053" title="ParallelMatching.this.global.Tree">elsep</a>

        <a href="#543747" title="(action: MixSequence.this.TransitionContext,succ: MatchMatrix.this.Rep,fail: Option[MatchMatrix.this.Rep])MatchMatrix.this.Branch[MixSequence.this.TransitionContext]">Branch</a>(<a href="#545099" title="(f: (ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree)MixSequence.this.TransitionContext">TransitionContext</a>(<a href="#545154" title="=&gt; (ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.If">transition</a>), <a href="#545152" title="MatchMatrix.this.Rep">succ</a>, <a href="#545153" title="Option[MatchMatrix.this.Rep]">fail</a>)
      }

      <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tree: ParallelMatching.this.global.Tree,len: Int,op: (ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree" id="541314">lengthCheck</a>(<a title="ParallelMatching.this.global.Tree" id="546059">tree</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="Int" id="546060">len</a>: <span title="Int">Int</span>, <a title="(ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree" id="546061">op</a>: <span title="(ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree">TreeFunction2</span>) = {
        <span class="keyword">def</span> <a title="=&gt; ParallelMatching.this.global.Symbol" id="546064">compareOp</a> = <a href="#541244" title="=&gt; ParallelMatching.this.Pattern">head</a>.<a href="../symtab/Types.scala.html#30217" title="(name: ParallelMatching.this.global.Name)ParallelMatching.this.global.Symbol">tpe</a> member <a href="../symtab/StdNames.scala.html#26531" title="object ParallelMatching.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29920" title="=&gt; ParallelMatching.this.global.Name">lengthCompare</a>  // symbol for &quot;lengthCompare&quot; method
        <span class="keyword">def</span> <a title="(t1: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree" id="546065">cmpFunction</a>(<a title="ParallelMatching.this.global.Tree" id="546074">t1</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>) = <a href="#546061" title="(v1: ParallelMatching.this.global.Tree,v2: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">op</a>((<a href="#546074" title="ParallelMatching.this.global.Tree">t1</a>.<a href="../ast/TreeDSL.scala.html#45085" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.CODE.SelectStart">duplicate</a> <a href="../ast/TreeDSL.scala.html#44723" title="(args: ParallelMatching.this.global.Tree*)ParallelMatching.this.global.Apply">DOT</a> <a href="#546064" title="=&gt; ParallelMatching.this.global.Symbol">compareOp</a>)(<a href="../ast/TreeDSL.scala.html#49329" title="(x: Any)ParallelMatching.this.global.Literal">LIT</a>(<a href="#546060" title="Int">len</a>)), <a href="../ast/TreeDSL.scala.html#42497" title="=&gt; ParallelMatching.this.global.Literal">ZERO</a>)
        // first ascertain lhs is not null: bug #2241
        <a href="../typechecker/Typers.scala.html#42640" title="(tree: ParallelMatching.this.global.analyzer.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typer</a> typed <a href="../ast/TreeDSL.scala.html#42474" title="(f: (ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree)(ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree">nullSafe</a><span title="(v1: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">(</span><a href="#546065" title="(t1: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">cmpFunction</a> _)(<a href="#546059" title="ParallelMatching.this.global.Tree">tree</a>)
      }

      // precondition for matching: sequence is exactly length of arg
      <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tree: ParallelMatching.this.global.Tree,lengthArg: Int)ParallelMatching.this.global.analyzer.global.Tree" id="541315">getPrecondition</a>(<a title="ParallelMatching.this.global.Tree" id="546055">tree</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="Int" id="546056">lengthArg</a>: <span title="Int">Int</span>) =
        <a href="#541314" title="(tree: ParallelMatching.this.global.Tree,len: Int,op: (ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">lengthCheck</a>(<a href="#546055" title="ParallelMatching.this.global.Tree">tree</a>, <a href="#546056" title="Int">lengthArg</a>, <a href="../ast/TreeDSL.scala.html#45071" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Apply">_</a> ANY_== <a href="#546148" title="ParallelMatching.this.global.Tree">_</a>)

      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()ParallelMatching.this.global.Tree" id="541316">tree</a>() = {
        <span class="keyword">val</span> Branch<a href="#546206" title="((ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree, MatchMatrix.this.Rep, MatchMatrix.this.Rep)">(</a>TransitionContext(<a href="#546205" title="(ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree" id="546206">transition</a>), <a href="#546205" title="MatchMatrix.this.Rep" id="546207">succ</a>, Some(<a href="#546205" title="MatchMatrix.this.Rep" id="546208">fail</a>)) = <a href="#81076" title="MixSequence.this.type" class="keyword">this</a>.<a href="#541313" title="()MatchMatrix.this.Branch[MixSequence.this.TransitionContext]">getTransition</a>
        <a href="#546206" title="(v1: ParallelMatching.this.global.Tree,v2: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">transition</a>(<a href="#546207" title="MatchMatrix.this.Rep">succ</a>.<a href="#81124" title="()ParallelMatching.this.global.Tree">toTree</a>, <a href="#546208" title="MatchMatrix.this.Rep">fail</a>.<a href="#81124" title="()ParallelMatching.this.global.Tree">toTree</a>)
      }
    }

    /** handle sequence pattern and ArrayValue with star patterns
     */
    <span class="keyword">final</span> <span class="keyword">class</span> <a title="class MixSequenceStar extends MatchMatrix.this.MixSequence with ScalaObject" id="81077">MixSequenceStar</a><span title="ScalaObject">(</span><a title="MatchMatrix.this.Patterns" id="541325">pats</a>: <a href="#540875" title="MatchMatrix.this.Patterns">Patterns</a>, <a title="MatchMatrix.this.Rep" id="541326">rest</a>: <a href="#540070" title="MatchMatrix.this.Rep">Rep</a>) <span class="keyword">extends</span> <a href="#81076" title="MatchMatrix.this.MixSequence">MixSequence</a>(<a href="#541325" title="MatchMatrix.this.Patterns">pats</a>, <a href="#541326" title="MatchMatrix.this.Rep">rest</a>) {
      // in principle, we could optimize more, but variable binding gets complicated (@todo use finite state methods instead)
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(minlen: Int,x: ParallelMatching.this.global.Tree)Option[List[ParallelMatching.this.global.Tree]]" id="541322">getSubPatterns</a>(<a title="Int" id="546255">minlen</a>: <span title="Int">Int</span>, <a title="ParallelMatching.this.global.Tree" id="546256">x</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>) = <a href="../ast/TreeDSL.scala.html#42480" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,List[ParallelMatching.this.global.Tree]])Option[List[ParallelMatching.this.global.Tree]]">condOpt</a>(<a href="#546256" title="ParallelMatching.this.global.Tree">x</a>) <a href="#546270" title="List[ParallelMatching.this.global.Tree]">{</a>
        <span title="List[ParallelMatching.this.global.gen.global.Tree]" class="keyword">case</span> <a title="ParallelMatching.this.global.ArrayValue" id="546271">av</a> @ ArrayValue(_,<a title="List[ParallelMatching.this.global.Tree]" id="546274">xs</a>) <span class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="#79295" title="(t: ParallelMatching.this.global.Tree)Boolean">isRightIgnoring</a>(<a href="#546271" title="ParallelMatching.this.global.ArrayValue">av</a>) &amp;&amp; <a href="#546274" title="List[ParallelMatching.this.global.Tree]">xs</a>.<span title="(x$1: Int)Boolean">length</span>   == <a href="#546255" title="Int">minlen</a>) =&gt;  // Seq(p1,...,pN)
          <a href="#546274" title="List[ParallelMatching.this.global.Tree]">xs</a> <a href="#546288" title="List[ParallelMatching.this.global.Tree]">:::</a> <span title="(xs: ParallelMatching.this.global.gen.global.Tree*)List[ParallelMatching.this.global.gen.global.Tree]">List</span><span title="(prefix: List[ParallelMatching.this.global.gen.global.Tree])List[ParallelMatching.this.global.gen.global.Tree]">(</span><a href="../Global.scala.html#39031" title="object ParallelMatching.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42690" title="=&gt; ParallelMatching.this.global.gen.global.Tree">mkNil</a>, <a href="../ast/Trees.scala.html#26602" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a>)
        <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> <a title="ParallelMatching.this.global.ArrayValue" id="546306">av</a> @ ArrayValue(_,<a title="List[ParallelMatching.this.global.Tree]" id="546309">xs</a>) <span class="keyword">if</span> ( <a href="#79295" title="(t: ParallelMatching.this.global.Tree)Boolean">isRightIgnoring</a><span title="(x$1: Boolean)Boolean">(</span><a href="#546306" title="ParallelMatching.this.global.ArrayValue">av</a>) &amp;&amp; <a href="#546309" title="List[ParallelMatching.this.global.Tree]">xs</a>.<span title="(x$1: Int)Int">length</span><span title="(x$1: Int)Boolean">-</span><span title="Int(1)" class="int">1</span> == <a href="#546255" title="Int">minlen</a>) =&gt;  // Seq(p1,...,pN,_*)
          <a href="#541306" title="(xs: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">removeStar</a>(<a href="#546309" title="List[ParallelMatching.this.global.Tree]">xs</a>) <a href="#546329" title="List[ParallelMatching.this.global.Tree]">:::</a> <span title="(xs: object ParallelMatching.this.global.EmptyTree*)List[object ParallelMatching.this.global.EmptyTree]">List</span><span title="(prefix: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">(</span><a href="../ast/Trees.scala.html#26602" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a>)
        <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> <a title="ParallelMatching.this.global.ArrayValue" id="546348">av</a> @ ArrayValue(_,<a title="List[ParallelMatching.this.global.Tree]" id="546351">xs</a>) <span class="keyword">if</span> ( <a href="#79295" title="(t: ParallelMatching.this.global.Tree)Boolean">isRightIgnoring</a><span title="(x$1: Boolean)Boolean">(</span><a href="#546348" title="ParallelMatching.this.global.ArrayValue">av</a>) &amp;&amp; <a href="#546351" title="List[ParallelMatching.this.global.Tree]">xs</a>.<span title="(x$1: Int)Int">length</span><span title="(x$1: Int)Boolean">-</span><span title="Int(1)" class="int">1</span>  &lt; <a href="#546255" title="Int">minlen</a>) =&gt;  // Seq(p1..,pJ,_*)   J &lt; N
          <a href="PatternNodes.scala.html#79226" title="(i: Int)List[ParallelMatching.this.global.Tree]">getDummies</a>(<a href="#546255" title="(x$1: Int)Int">minlen</a> + <span title="Int(1)" class="int">1</span>) <a href="#546370" title="List[ParallelMatching.this.global.Tree]">:::</a> <span title="(xs: ParallelMatching.this.global.Tree*)List[ParallelMatching.this.global.Tree]">List</span><span title="(prefix: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">(</span><a href="#546256" title="ParallelMatching.this.global.Tree">x</a>)
        <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> <a href="../ast/Trees.scala.html#26602" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a> | <a href="../ast/TreeDSL.scala.html#535946" title="(other: Any)Boolean">WILD</a>()                   =&gt; 
          <a href="PatternNodes.scala.html#79226" title="(i: Int)List[ParallelMatching.this.global.Tree]">getDummies</a>(<a href="#546255" title="(x$1: Int)Int">minlen</a> <span title="(x$1: Int)Int">+</span> <span title="Int(1)" class="int">1</span>          + <span title="Int(1)" class="int">1</span>)
      }

      <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(vs: List[ParallelMatching.this.global.Symbol],tail: ParallelMatching.this.global.Symbol,nrows: List[MatchMatrix.this.Row])MatchMatrix.this.Rep" id="541323">makeSuccRep</a>(<a title="List[ParallelMatching.this.global.Symbol]" id="546449">vs</a>: <span title="List[ParallelMatching.this.global.Symbol]">List</span>[Symbol], <a title="ParallelMatching.this.global.Symbol" id="546450">tail</a>: <a href="../symtab/Symbols.scala.html#26127" title="ParallelMatching.this.global.Symbol">Symbol</a>, <a title="List[MatchMatrix.this.Row]" id="546451">nrows</a>: <span title="List[MatchMatrix.this.Row]">List</span>[Row]) =
        <a href="#541250" title="(pre: List[ParallelMatching.this.global.Symbol],post: List[ParallelMatching.this.global.Symbol],rows: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">mkNewRep</a>(<a href="#546449" title="List[ParallelMatching.this.global.Symbol]">vs</a> <a href="#546454" title="List[ParallelMatching.this.global.Symbol]">:::</a> <span title="(xs: ParallelMatching.this.global.Symbol*)List[ParallelMatching.this.global.Symbol]">List</span><span title="(prefix: List[ParallelMatching.this.global.Symbol])List[ParallelMatching.this.global.Symbol]">(</span><a href="#546450" title="ParallelMatching.this.global.Symbol">tail</a>), <a href="#541331" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#540072" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#546451" title="List[MatchMatrix.this.Row]">nrows</a>)

      // precondition for matching
      <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tree: ParallelMatching.this.global.Tree,lengthArg: Int)ParallelMatching.this.global.analyzer.global.Tree" id="541324">getPrecondition</a>(<a title="ParallelMatching.this.global.Tree" id="546473">tree</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="Int" id="546474">lengthArg</a>: <span title="Int">Int</span>) =
        <a href="#541314" title="(tree: ParallelMatching.this.global.Tree,len: Int,op: (ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">lengthCheck</a>(<a href="#546473" title="ParallelMatching.this.global.Tree">tree</a>, <a href="#546474" title="Int">lengthArg</a>, <a href="../ast/TreeDSL.scala.html#45072" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Apply">_</a> ANY_&gt;= <a href="#546479" title="ParallelMatching.this.global.Tree">_</a>)
    }

    // @todo: equals test for same constant
    <span class="keyword">class</span> <a title="class MixEquals extends MatchMatrix.this.RuleApplication with ScalaObject" id="81078">MixEquals</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="MatchMatrix.this.Patterns" id="541289">pats</a>: <a href="#540875" title="MatchMatrix.this.Patterns">Patterns</a>, <span class="keyword">val</span> <a title="MatchMatrix.this.Rep" id="541290">rest</a>: <a href="#540070" title="MatchMatrix.this.Rep">Rep</a>) <span class="keyword">extends</span> <a href="#81067" title="MatchMatrix.this.RuleApplication">RuleApplication</a> {    
      /** condition (to be used in IF), success and failure Rep */
      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()(MatchMatrix.this.Branch[ParallelMatching.this.global.Tree], ParallelMatching.this.global.Symbol)" id="541287">getTransition</a>(): <span title="(MatchMatrix.this.Branch[ParallelMatching.this.global.Tree], ParallelMatching.this.global.Symbol)">(</span>Branch[Tree], Symbol) = {
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.gen.global.Tree" id="546516">value</a> = {
          // how is it known these are the only possible typerefs here?
          <span class="keyword">val</span> TypeRef<a href="#546537" title="ParallelMatching.this.global.Type" id="546521">(</a>_,_,<a href="#546528" title="(x: List[ParallelMatching.this.global.Type])Some[List[ParallelMatching.this.global.Type]]">List</a>(<a title="ParallelMatching.this.global.Type" id="546537">arg</a>)) = <a href="#541244" title="=&gt; ParallelMatching.this.Pattern">head</a>.<a href="#535758" title="=&gt; ParallelMatching.this.global.Type">tpe</a>
          <a href="#546521" title="ParallelMatching.this.global.Type">arg</a> <span title="ParallelMatching.this.global.gen.global.Tree" class="keyword">match</span> {
            <span title="ParallelMatching.this.global.gen.global.Tree" class="keyword">case</span> SingleType(<a title="ParallelMatching.this.global.Type" id="546543">pre</a>, <a title="ParallelMatching.this.global.Symbol" id="546544">sym</a>) =&gt; <a href="../ast/TreeDSL.scala.html#42534" title="(pre: ParallelMatching.this.global.Type,sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.gen.global.Tree">REF</a>(<a href="#546543" title="ParallelMatching.this.global.Type">pre</a>, <a href="#546544" title="ParallelMatching.this.global.Symbol">sym</a>)
            <span title="o.type" class="keyword">case</span> PseudoType(<a title="ParallelMatching.this.global.Tree" id="546574">o</a>)        =&gt; <a href="#546574" title="ParallelMatching.this.global.Tree">o</a>.<a href="../ast/Trees.scala.html#29387" title="=&gt; o.type">duplicate</a>
          }
        }

        <span class="keyword">val</span> <a title="ParallelMatching.this.global.TermSymbol" id="546517">label</a>       = <a href="TransMatcher.scala.html#79380" title="=&gt; ParallelMatching.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26868" title="(pos: scala.tools.nsc.util.Position,name: ParallelMatching.this.global.Name)ParallelMatching.this.global.TermSymbol">newLabel</a>(<a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540517" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="TransMatcher.scala.html#79169" title="(pos: scala.tools.nsc.util.Position,s: String)String">newName</a><a href="../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)ParallelMatching.this.global.Name">(</a><a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540517" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="java.lang.String(&quot;failCont%&quot;)" class="string">&quot;failCont%&quot;</span>)) // warning, untyped
        <span class="keyword">val</span> <a title="List[MatchMatrix.this.Row]" id="546518">succ</a>        = <span title="(xs: MatchMatrix.this.Row*)List[MatchMatrix.this.Row]">List</span>(
          <a href="#541290" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#540073" title="=&gt; List[MatchMatrix.this.Row]">rows</a>.<span title="=&gt; MatchMatrix.this.Row">head</span>.<a href="#539951" title="(hs: List[ParallelMatching.this.global.Tree],vs: Iterable[ParallelMatching.this.global.Symbol],tvars: ParallelMatching.this.global.Symbol)MatchMatrix.this.Row">insert2</a>(<span title="(xs: object ParallelMatching.this.global.EmptyTree*)List[object ParallelMatching.this.global.EmptyTree]">List</span>(<a href="../ast/Trees.scala.html#26602" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a>), <a href="#541244" title="=&gt; ParallelMatching.this.Pattern">head</a>.<a href="#535767" title="=&gt; List[ParallelMatching.this.global.Symbol]">boundVariables</a>, <a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540678" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>),
          <a href="#539973" title="(pat: List[ParallelMatching.this.global.Tree],subst: ParallelMatching.this.Bindings,guard: MatchMatrix.this.Guard,bx: Int)MatchMatrix.this.Row">Row</a>(<a href="PatternNodes.scala.html#79226" title="(i: Int)List[ParallelMatching.this.global.Tree]">getDummies</a>(<span title="(x$1: Int)Int" class="int">1</span> + <a href="#541290" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#540072" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>.<span title="=&gt; Int">length</span>), <a href="PatternNodes.scala.html#79255" title="=&gt; ParallelMatching.this.Bindings">NoBinding</a>, <a href="#81064" title="=&gt; MatchMatrix.this.Guard">NoGuard</a>, <a href="#81046" title="(theLabel: ParallelMatching.this.global.Symbol)Int">shortCut</a>(<a href="#546517" title="ParallelMatching.this.global.TermSymbol">label</a>))
        )

        // todo: optimize if no guard, and no further tests
        <span class="keyword">val</span> <a title="Option[MatchMatrix.this.Rep]" id="546519">fail</a>    = <a href="#541248" title="(xs: List[MatchMatrix.this.Row])Option[MatchMatrix.this.Rep]">mkFail</a>(<span title="object List">List</span>.<span title="(xs: List[MatchMatrix.this.Row],ys: List[ParallelMatching.this.Pattern])(f: (MatchMatrix.this.Row, ParallelMatching.this.Pattern) =&gt; MatchMatrix.this.Row)List[MatchMatrix.this.Row]">map2</span>(<a href="#541290" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#540073" title="=&gt; List[MatchMatrix.this.Row]">rows</a>.<span title="=&gt; List[MatchMatrix.this.Row]">tail</span>, <a href="#541289" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#540757" title="=&gt; MatchMatrix.this.Patterns">tail</a>.<a href="#540878" title="=&gt; List[ParallelMatching.this.Pattern]">ps</a>)(<a href="#539952" title="(p: ParallelMatching.this.Pattern)MatchMatrix.this.Row">_</a> insert <a href="#546668" title="ParallelMatching.this.Pattern">_</a>))
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.analyzer.global.Tree" id="546520">action</a>  = <a href="../typechecker/Typers.scala.html#42640" title="(tree: ParallelMatching.this.global.analyzer.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typer</a> typed (<a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="../ast/TreeDSL.scala.html#45071" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Apply">id</a> ANY_== <a href="#546516" title="ParallelMatching.this.global.gen.global.Tree">value</a>)

        <span title="(_1: MatchMatrix.this.Branch[ParallelMatching.this.global.analyzer.global.Tree],_2: ParallelMatching.this.global.TermSymbol)(MatchMatrix.this.Branch[ParallelMatching.this.global.analyzer.global.Tree], ParallelMatching.this.global.TermSymbol)">(</span><a href="#543747" title="(action: ParallelMatching.this.global.analyzer.global.Tree,succ: MatchMatrix.this.Rep,fail: Option[MatchMatrix.this.Rep])MatchMatrix.this.Branch[ParallelMatching.this.global.analyzer.global.Tree]">Branch</a>(<a href="#546520" title="ParallelMatching.this.global.analyzer.global.Tree">action</a>, <a href="#541250" title="(pre: List[ParallelMatching.this.global.Symbol],post: List[ParallelMatching.this.global.Symbol],rows: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">mkNewRep</a>(<span title="object Nil">Nil</span>, <a href="#541290" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#540072" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#546518" title="List[MatchMatrix.this.Row]">succ</a>), <a href="#546519" title="Option[MatchMatrix.this.Rep]">fail</a>), <a href="#546517" title="ParallelMatching.this.global.TermSymbol">label</a>)
      }

      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()ParallelMatching.this.global.analyzer.global.Tree" id="541288">tree</a>() = {
        <span class="keyword">val</span> <a href="#546732" title="(ParallelMatching.this.global.Tree, MatchMatrix.this.Rep, MatchMatrix.this.Rep, ParallelMatching.this.global.Symbol)">(</a>Branch(<a href="#546731" title="ParallelMatching.this.global.Tree" id="546732">cond</a>, <a href="#546731" title="MatchMatrix.this.Rep" id="546733">srep</a>, Some(<a href="#546731" title="MatchMatrix.this.Rep" id="546734">frep</a>)), <a href="#546731" title="ParallelMatching.this.global.Symbol" id="546735">failLabel</a>) = <a href="#81078" title="MixEquals.this.type" class="keyword">this</a>.<a href="#541287" title="()(MatchMatrix.this.Branch[ParallelMatching.this.global.Tree], ParallelMatching.this.global.Symbol)">getTransition</a>
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.analyzer.global.Tree" id="546736">fail</a>  = <a href="../typechecker/Typers.scala.html#42640" title="(tree: ParallelMatching.this.global.analyzer.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typer</a> typed <a href="#546734" title="MatchMatrix.this.Rep">frep</a>.<a href="#81124" title="()ParallelMatching.this.global.Tree">toTree</a>
        <a href="../symtab/Symbols.scala.html#27005" title="(info: ParallelMatching.this.global.Type)failLabel.type">failLabel</a> setInfo <a href="../symtab/Types.scala.html#43895" title="(params: List[ParallelMatching.this.global.Symbol],resultType: ParallelMatching.this.global.Type)ParallelMatching.this.global.MethodType">MethodType</a>(<span title="object Nil">Nil</span>, <a href="#546736" title="ParallelMatching.this.global.analyzer.global.Tree">fail</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; ParallelMatching.this.global.analyzer.global.Type">tpe</a>)

        <a href="../typechecker/Typers.scala.html#42640" title="(tree: ParallelMatching.this.global.analyzer.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typer</a> typed(
          <a href="../ast/TreeDSL.scala.html#42524" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">IF</a> <a href="../ast/TreeDSL.scala.html#49788" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">(</a><a href="TransMatcher.scala.html#79376" title="(v1: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">handleOuter</a>(<a href="#546732" title="ParallelMatching.this.global.Tree">cond</a>)) <a href="../ast/TreeDSL.scala.html#49789" title="(elsep: ParallelMatching.this.global.Tree)ParallelMatching.this.global.If">THEN</a> <a href="#546733" title="MatchMatrix.this.Rep">srep</a>.<a href="#81124" title="()ParallelMatching.this.global.Tree">toTree</a> ELSE <a href="../ast/Trees.scala.html#26642" title="(sym: ParallelMatching.this.global.Symbol,params: List[ParallelMatching.this.global.Symbol],rhs: ParallelMatching.this.global.Tree)ParallelMatching.this.global.LabelDef">LabelDef</a>(<a href="#546735" title="ParallelMatching.this.global.Symbol">failLabel</a>, <span title="object Nil">Nil</span>, <a href="#546736" title="ParallelMatching.this.global.analyzer.global.Tree">fail</a>)
        )
      }
    }
    
    case <span class="keyword">class</span> <a title="class PatPair extends java.lang.Object with ScalaObject with Product" id="546917">PatPair</a><span title="ScalaObject">(</span><a title="ParallelMatching.this.global.Tree" id="553129">moreSpecific</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="ParallelMatching.this.global.Tree" id="553130">moreGeneral</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="Int" id="553131">index</a>: <span title="Int">Int</span>)

    /** mixture rule for type tests
    **/
    <span class="keyword">class</span> <a title="class MixTypes extends MatchMatrix.this.RuleApplication with ScalaObject" id="81082">MixTypes</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="MatchMatrix.this.Patterns" id="541428">pats</a>: <a href="#540875" title="MatchMatrix.this.Patterns">Patterns</a>, <span class="keyword">val</span> <a title="MatchMatrix.this.Rep" id="541429">rest</a>: <a href="#540070" title="MatchMatrix.this.Rep">Rep</a>) <span class="keyword">extends</span> <a href="#81067" title="MatchMatrix.this.RuleApplication">RuleApplication</a> {  
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(p: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]" id="541413">subpatterns</a>(<a title="ParallelMatching.this.global.Tree" id="547094">p</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>): <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree] = <a href="#547094" title="ParallelMatching.this.global.Tree">p</a> <span title="List[ParallelMatching.this.global.Tree]" class="keyword">match</span> {
        <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> Bind(_, <a title="ParallelMatching.this.global.Tree" id="547784">p</a>)                                                 =&gt; <a href="#541413" title="(p: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">subpatterns</a>(<a href="#547784" title="ParallelMatching.this.global.Tree">p</a>)
        <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> <a title="ParallelMatching.this.global.Apply" id="547789">app</a> @ Apply(<a title="ParallelMatching.this.global.Tree" id="547792">fn</a>, <a title="List[ParallelMatching.this.global.Tree]" id="547793">ps</a>) <span class="keyword">if</span> <a href="PatternNodes.scala.html#79217" title="(t: ParallelMatching.this.global.Type)Boolean">isCaseClass</a><span title="(x$1: Boolean)Boolean">(</span><a href="#547789" title="ParallelMatching.this.global.Apply">app</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; ParallelMatching.this.global.Type">tpe</a>) &amp;&amp; <a href="#547792" title="ParallelMatching.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29373" title="=&gt; Boolean">isType</a>   =&gt; <span title="List[ParallelMatching.this.global.Tree]" class="keyword">if</span> (<a href="#541428" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#540763" title="=&gt; Boolean">isCaseHead</a>) <a href="#547793" title="List[ParallelMatching.this.global.Tree]">ps</a> <span class="keyword">else</span> <a href="#541428" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#540765" title="=&gt; List[ParallelMatching.this.global.Tree]">dummies</a>
        <span title="Nothing" class="keyword">case</span> Apply(<a title="ParallelMatching.this.global.Tree" id="547803">fn</a>, <a title="List[ParallelMatching.this.global.Tree]" id="547804">xs</a>) <span class="keyword">if</span> <span title="(x$1: Boolean)Boolean">!</span><a href="#547804" title="List[ParallelMatching.this.global.Tree]">xs</a>.<span title="=&gt; Boolean">isEmpty</span> || <a href="#547803" title="ParallelMatching.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29373" title="=&gt; Boolean">isType</a>                  =&gt; <a href="../Global.scala.html#39077" title="(msg: String)Nothing">abort</a>(<span title="java.lang.String(&quot;strange Apply&quot;)" class="string">&quot;strange Apply&quot;</span>)
        <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> _                                                          =&gt; <a href="#541428" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#540765" title="=&gt; List[ParallelMatching.this.global.Tree]">dummies</a>
      }

      // moreSpecific: more specific patterns
      //     subsumed: more general patterns (subsuming current), rows index and subpatterns
      //    remaining: remaining, rows index and pattern
      <span class="keyword">def</span> <a title="[T](xs: List[Option[T]])List[T]" id="541414">join</a>[<a title="&gt;: Nothing &lt;: Any" id="541416">T</a>](<a title="List[Option[T]]" id="547734">xs</a>: <span title="List[Option[T]]">List</span>[Option[T]]): <span title="List[T]">List</span>[T] = <a href="#547734" title="List[Option[T]]">xs</a>.<span title="(f: (Option[T]) =&gt; Traversable[T])(implicit bf: scala.collection.generic.BuilderFactory[T,List[T],List[Option[T]]])List[T]">flatMap</span><span title="scala.collection.generic.BuilderFactory[T,List[T],List#Coll]">(</span><a title="Option[T]" id="547819">x</a> =&gt; <a href="#547819" title="(xo: Option[T])Iterable[T]">x</a>)
      <span class="keyword">val</span> <a href="#541418" title="(List[ParallelMatching.this.global.Tree], List[(Int, List[ParallelMatching.this.global.Tree])], List[(Int, ParallelMatching.this.global.Tree)])">(</a><a href="#541417" title="List[ParallelMatching.this.global.Tree]" id="541418">moreSpecific</a>, <a href="#541417" title="List[(Int, List[ParallelMatching.this.global.Tree])]" id="541420">subsumed</a>, <a href="#541417" title="List[(Int, ParallelMatching.this.global.Tree)]" id="541422">remaining</a>) : <span title="(List[ParallelMatching.this.global.Tree], List[(Int, List[ParallelMatching.this.global.Tree])], List[(Int, ParallelMatching.this.global.Tree)])">(</span>List[Tree], List[(Int, List[Tree])], List[(Int, Tree)]) = <a href="MatchUtil.scala.html#79261" title="(xs: List[(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], Option[(Int, ParallelMatching.this.global.Tree)])])(List[Option[ParallelMatching.this.global.Tree]], List[Option[(Int, List[ParallelMatching.this.global.Tree])]], List[Option[(Int, ParallelMatching.this.global.Tree)]])">unzip3</a>(
        <span class="keyword">for</span> ((<a title="ParallelMatching.this.global.Tree" id="547030">pat</a> @ <a href="PatternNodes.scala.html#539515" title="(x: ParallelMatching.this.global.Tree)Option[ParallelMatching.this.global.Tree]">Stripped</a>(<a title="ParallelMatching.this.global.Tree" id="547036">spat</a>), <a title="Int" id="547038">j</a>) &lt;- <a href="#541428" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#540770" title="(f: ((ParallelMatching.this.global.Tree, Int)) =&gt; (Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], Option[(Int, ParallelMatching.this.global.Tree)]))(implicit bf: scala.collection.generic.BuilderFactory[(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], Option[(Int, ParallelMatching.this.global.Tree)]),List[(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], Option[(Int, ParallelMatching.this.global.Tree)])],List[(ParallelMatching.this.global.Tree, Int)]])List[(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], Option[(Int, ParallelMatching.this.global.Tree)])]">zip</a>) <span class="keyword">yield</span> {
          <span class="keyword">def</span> <a title="(tpe: ParallelMatching.this.global.Type)Boolean" id="547041">eqHead</a>(<a title="ParallelMatching.this.global.Type" id="547064">tpe</a>: <a href="../symtab/Types.scala.html#26205" title="ParallelMatching.this.global.Type">Type</a>)         = <a href="#541428" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="../symtab/Types.scala.html#30236" title="(that: ParallelMatching.this.global.Type)Boolean">headType</a> =:= <a href="#547064" title="ParallelMatching.this.global.Type">tpe</a>
          <span class="keyword">def</span> <a title="(yes: ParallelMatching.this.global.Tree,no: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree" id="547042">alts</a>(<a title="ParallelMatching.this.global.Tree" id="547068">yes</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="ParallelMatching.this.global.Tree" id="547069">no</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>) = <span title="ParallelMatching.this.global.Tree" class="keyword">if</span> (<a href="#547041" title="(tpe: ParallelMatching.this.global.Type)Boolean">eqHead</a>(<a href="#547030" title="ParallelMatching.this.global.Tree">pat</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; ParallelMatching.this.global.Type">tpe</a>)) <a href="#547068" title="ParallelMatching.this.global.Tree">yes</a> <span class="keyword">else</span> <a href="#547069" title="ParallelMatching.this.global.Tree">no</a>

          <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="547044">isDef</a>                = <a href="#79296" title="(t: ParallelMatching.this.global.Tree)Boolean">isDefaultPattern</a>(<a href="#547030" title="ParallelMatching.this.global.Tree">pat</a>)
          <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="(Int, List[ParallelMatching.this.global.Tree])" id="547046">dummy</a>                = <span title="(_1: Int,_2: List[ParallelMatching.this.global.Tree])(Int, List[ParallelMatching.this.global.Tree])">(</span><a href="#547038" title="Int">j</a>, <a href="#541428" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#540765" title="=&gt; List[ParallelMatching.this.global.Tree]">dummies</a>)
          <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="(Int, ParallelMatching.this.global.Tree)" id="547048">pass</a>                 = <span title="(_1: Int,_2: ParallelMatching.this.global.Tree)(Int, ParallelMatching.this.global.Tree)">(</span><a href="#547038" title="Int">j</a>, <a href="#547030" title="ParallelMatching.this.global.Tree">pat</a>)
          <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="(Int, List[ParallelMatching.this.global.Tree])" id="547050">subs</a>                 = <span title="(_1: Int,_2: List[ParallelMatching.this.global.Tree])(Int, List[ParallelMatching.this.global.Tree])">(</span><a href="#547038" title="Int">j</a>, <a href="#541413" title="(p: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">subpatterns</a>(<a href="#547030" title="ParallelMatching.this.global.Tree">pat</a>))

          <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ParallelMatching.this.TypeComp" id="547052">cmpOld</a>: <a href="PatternNodes.scala.html#79221" title="ParallelMatching.this.TypeComp">TypeComp</a>  = <a href="#547036" title="ParallelMatching.this.global.Tree">spat</a>.<a href="PatternNodes.scala.html#537172" title="(other: ParallelMatching.this.global.Type)ParallelMatching.this.TypeComp">tpe</a> cmp <a href="#541428" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#540761" title="=&gt; ParallelMatching.this.global.Type">headType</a>  // contains type info about pattern's type vs. head pattern
          <span class="keyword">import</span> cmpOld.{ erased }
          
          <span class="keyword">def</span> <a title="=&gt; Boolean" id="547054">erased_xIsaY</a> = <a href="PatternNodes.scala.html#547113" title="object cmpOld.erased">erased</a>.<a href="PatternNodes.scala.html#547142" title="=&gt; Boolean">xIsaY</a>
          <span class="keyword">def</span> <a title="=&gt; Boolean" id="547055">erased_yIsaX</a> = <a href="PatternNodes.scala.html#547113" title="object cmpOld.erased">erased</a>.<a href="PatternNodes.scala.html#547143" title="=&gt; Boolean">yIsaX</a>
          
          // scrutinee, pattern
          <span class="keyword">val</span> <a href="#547057" title="(ParallelMatching.this.global.Type, ParallelMatching.this.global.Type)">(</a><a href="#547056" title="ParallelMatching.this.global.Type" id="547057">s</a>, <a href="#547056" title="ParallelMatching.this.global.Type" id="547058">p</a>)  = <span title="(_1: ParallelMatching.this.global.Type,_2: ParallelMatching.this.global.Type)(ParallelMatching.this.global.Type, ParallelMatching.this.global.Type)">(</span><a href="PatternNodes.scala.html#79218" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Type">decodedEqualsType</a>(<a href="#547036" title="ParallelMatching.this.global.Tree">spat</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; ParallelMatching.this.global.Type">tpe</a>), <a href="PatternNodes.scala.html#79218" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Type">decodedEqualsType</a>(<a href="#541428" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#540761" title="=&gt; ParallelMatching.this.global.Type">headType</a>))
          <span class="keyword">def</span> <a title="=&gt; Boolean" id="547059">xIsaY</a>   = <a href="../symtab/Types.scala.html#30235" title="(that: ParallelMatching.this.global.Type)Boolean">s</a> &lt;:&lt; <a href="#547058" title="ParallelMatching.this.global.Type">p</a>
          <span class="keyword">def</span> <a title="=&gt; Boolean" id="547060">yIsaX</a>   = <a href="../symtab/Types.scala.html#30235" title="(that: ParallelMatching.this.global.Type)Boolean">p</a> &lt;:&lt; <a href="#547057" title="ParallelMatching.this.global.Type">s</a>

          // XXX exploring what breaks things and what doesn't
          // def dummyIsOk = {
          //   val old = erased.yIsaX || yIsaX || isDef
          //   println(&quot;Old logic: %s || %s || %s == %s&quot;.format(erased.yIsaX, yIsaX, isDef, erased.yIsaX || yIsaX || isDef))
          //   println(&quot;isCaseClass(spat.tpe) = %s, isCaseClass(pats.headType) = %s&quot;.format(
          //     isCaseClass(spat.tpe), isCaseClass(pats.headType)))
          //   println(&quot;spat.tpe = %s, pats.head = %s, pats.headType = %s&quot;.format(
          //     spat.tpe, pats.head, pats.headType))
          //   
          //   (erased.yIsaX || yIsaX || isDef)
          //   // (!isCaseClass(spat.tpe) || !isCaseClass(pats.headType))
          // }

          // each pattern will yield a triple of options corresponding to the three lists,
          // which will be flattened down to the values
          <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[T](x: T)Option[T]" id="547061">mkOpt</a>[<a title="&gt;: Nothing &lt;: Any" id="547063">T</a>](<a title="T" id="547118">x</a>: <a href="#547063" title="T">T</a>): <span title="Option[T]">Option</span>[T] = <span title="(x: T)Some[T]">Some</span>(<a href="#547118" title="T">x</a>)    // limits noise from Some(value)
          (<a href="#547036" title="ParallelMatching.this.global.Tree">spat</a> <span title="(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], Option[(Int, ParallelMatching.this.global.Tree)])" class="keyword">match</span> {
            <span title="(object None, object None, Option[(Int, ParallelMatching.this.global.Tree)])" class="keyword">case</span> <a href="../ast/TreeDSL.scala.html#49330" title="(x: Any)Option[Any]">LIT</a>(<span title="Null(null)" class="keyword">null</span>) <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#547041" title="(tpe: ParallelMatching.this.global.Type)Boolean">eqHead</a>(<a href="#547036" title="ParallelMatching.this.global.Tree">spat</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; ParallelMatching.this.global.Type">tpe</a>)               =&gt; <span title="(_1: object None,_2: object None,_3: Option[(Int, ParallelMatching.this.global.Tree)])(object None, object None, Option[(Int, ParallelMatching.this.global.Tree)])">(</span><span title="object None">None</span>, <span title="object None">None</span>, <a href="#547061" title="(x: (Int, ParallelMatching.this.global.Tree))Option[(Int, ParallelMatching.this.global.Tree)]">pass</a>)           // special case for constant null
            <span title="(Option[object ParallelMatching.this.global.EmptyTree], Option[(Int, List[ParallelMatching.this.global.Tree])], object None)" class="keyword">case</span> _ <span class="keyword">if</span> <a href="#541428" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#540775" title="(pat: ParallelMatching.this.global.Tree)Boolean">isObjectTest</a>(<a href="#547030" title="ParallelMatching.this.global.Tree">pat</a>)                  =&gt; <span title="(_1: Option[object ParallelMatching.this.global.EmptyTree],_2: Option[(Int, List[ParallelMatching.this.global.Tree])],_3: object None)(Option[object ParallelMatching.this.global.EmptyTree], Option[(Int, List[ParallelMatching.this.global.Tree])], object None)">(</span><a href="#547061" title="(x: object ParallelMatching.this.global.EmptyTree)Option[object ParallelMatching.this.global.EmptyTree]">EmptyTree</a>, <a href="#547061" title="(x: (Int, List[ParallelMatching.this.global.Tree]))Option[(Int, List[ParallelMatching.this.global.Tree])]">dummy</a>, <span title="object None">None</span>)     // matching an object
            <span title="(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], object None)" class="keyword">case</span> Typed(<a title="ParallelMatching.this.global.Tree" id="547411">p</a> @ <a href="PatternNodes.scala.html#539515" title="(x: ParallelMatching.this.global.Tree)Option[ParallelMatching.this.global.Tree]">Stripped</a>(_: <a href="../ast/Trees.scala.html#26673" title="ParallelMatching.this.global.UnApply">UnApply</a>), _) <span class="keyword">if</span> <a href="#547059" title="=&gt; Boolean">xIsaY</a>  =&gt; <span title="(_1: Option[ParallelMatching.this.global.Tree],_2: Option[(Int, List[ParallelMatching.this.global.Tree])],_3: object None)(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], object None)">(</span><a href="#547061" title="(x: ParallelMatching.this.global.Tree)Option[ParallelMatching.this.global.Tree]">p</a>, <a href="#547061" title="(x: (Int, List[ParallelMatching.this.global.Tree]))Option[(Int, List[ParallelMatching.this.global.Tree])]">dummy</a>, <span title="object None">None</span>)             // &lt;:&lt; is never &lt;equals&gt;            
            <span title="(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], object None)" class="keyword">case</span> <a title="ParallelMatching.this.global.Typed" id="547451">q</a> @ Typed(<a title="ParallelMatching.this.global.Tree" id="547454">pp</a>, _) <span class="keyword">if</span> <a href="#547059" title="=&gt; Boolean">xIsaY</a>                    =&gt; <span title="(_1: Option[ParallelMatching.this.global.Tree],_2: Option[(Int, List[ParallelMatching.this.global.Tree])],_3: object None)(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], object None)">(</span><a href="#547042" title="(yes: ParallelMatching.this.global.Tree,no: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">alts</a><a href="#547061" title="(x: ParallelMatching.this.global.Tree)Option[ParallelMatching.this.global.Tree]">(</a><a href="#547454" title="ParallelMatching.this.global.Tree">pp</a>, <a href="#547451" title="ParallelMatching.this.global.Typed">q</a>), <a href="#547061" title="(x: (Int, List[ParallelMatching.this.global.Tree]))Option[(Int, List[ParallelMatching.this.global.Tree])]">dummy</a>, <span title="object None">None</span>)   // never =:= for &lt;equals&gt;
            // case z: UnApply                                   =&gt; (None, None, pass)
            <span title="(Option[object ParallelMatching.this.global.EmptyTree], Option[(Int, List[ParallelMatching.this.global.Tree])], Option[(Int, ParallelMatching.this.global.Tree)])" class="keyword">case</span> <a title="ParallelMatching.this.global.UnApply" id="547490">z</a>: <a href="../ast/Trees.scala.html#26673" title="ParallelMatching.this.global.UnApply">UnApply</a>                                   =&gt; <span title="(_1: Option[object ParallelMatching.this.global.EmptyTree],_2: Option[(Int, List[ParallelMatching.this.global.Tree])],_3: Option[(Int, ParallelMatching.this.global.Tree)])(Option[object ParallelMatching.this.global.EmptyTree], Option[(Int, List[ParallelMatching.this.global.Tree])], Option[(Int, ParallelMatching.this.global.Tree)])">(</span><a href="#547061" title="(x: object ParallelMatching.this.global.EmptyTree)Option[object ParallelMatching.this.global.EmptyTree]">EmptyTree</a>, <a href="#547061" title="(x: (Int, List[ParallelMatching.this.global.Tree]))Option[(Int, List[ParallelMatching.this.global.Tree])]">dummy</a>, <a href="#547061" title="(x: (Int, ParallelMatching.this.global.Tree))Option[(Int, ParallelMatching.this.global.Tree)]">pass</a>)
            <span title="(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], object None)" class="keyword">case</span> _ <span class="keyword">if</span> <a href="PatternNodes.scala.html#547113" title="object cmpOld.erased">erased</a>.<a href="PatternNodes.scala.html#547142" title="(x$1: Boolean)Boolean">xIsaY</a> || <a href="#547059" title="(x$1: Boolean)Boolean">xIsaY</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#547043" title="=&gt; Boolean">isDef</a>         =&gt; <span title="(_1: Option[ParallelMatching.this.global.Tree],_2: Option[(Int, List[ParallelMatching.this.global.Tree])],_3: object None)(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], object None)">(</span><a href="#547042" title="(yes: ParallelMatching.this.global.Tree,no: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">alts</a><a href="#547061" title="(x: ParallelMatching.this.global.Tree)Option[ParallelMatching.this.global.Tree]">(</a><a href="../ast/Trees.scala.html#26602" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a>, <a href="#547030" title="ParallelMatching.this.global.Tree">pat</a>), <a href="#547061" title="(x: (Int, List[ParallelMatching.this.global.Tree]))Option[(Int, List[ParallelMatching.this.global.Tree])]">subs</a>, <span title="object None">None</span>) // never =:= for &lt;e
            <span title="(Option[object ParallelMatching.this.global.EmptyTree], Option[(Int, List[ParallelMatching.this.global.Tree])], Option[(Int, ParallelMatching.this.global.Tree)])" class="keyword">case</span> _ <span class="keyword">if</span> <a href="PatternNodes.scala.html#547113" title="object cmpOld.erased">erased</a>.<a href="PatternNodes.scala.html#547143" title="(x$1: Boolean)Boolean">yIsaX</a> <span title="(x$1: Boolean)Boolean">||</span> <a href="#547060" title="=&gt; Boolean">yIsaX</a> || <a href="#547043" title="=&gt; Boolean">isDef</a>          =&gt; <span title="(_1: Option[object ParallelMatching.this.global.EmptyTree],_2: Option[(Int, List[ParallelMatching.this.global.Tree])],_3: Option[(Int, ParallelMatching.this.global.Tree)])(Option[object ParallelMatching.this.global.EmptyTree], Option[(Int, List[ParallelMatching.this.global.Tree])], Option[(Int, ParallelMatching.this.global.Tree)])">(</span><a href="#547061" title="(x: object ParallelMatching.this.global.EmptyTree)Option[object ParallelMatching.this.global.EmptyTree]">EmptyTree</a>, <a href="#547061" title="(x: (Int, List[ParallelMatching.this.global.Tree]))Option[(Int, List[ParallelMatching.this.global.Tree])]">dummy</a>, <a href="#547061" title="(x: (Int, ParallelMatching.this.global.Tree))Option[(Int, ParallelMatching.this.global.Tree)]">pass</a>)     // subsuming (matched *an
            <span title="(object None, object None, Option[(Int, ParallelMatching.this.global.Tree)])" class="keyword">case</span> _                                            =&gt; <span title="(_1: object None,_2: object None,_3: Option[(Int, ParallelMatching.this.global.Tree)])(object None, object None, Option[(Int, ParallelMatching.this.global.Tree)])">(</span><span title="object None">None</span>, <span title="object None">None</span>, <a href="#547061" title="(x: (Int, ParallelMatching.this.global.Tree))Option[(Int, ParallelMatching.this.global.Tree)]">pass</a>)            
            // The below fixes bugs 425 and 816 with only the small downside
            // of causing 60 other tests to fail.
            // case _ =&gt;
            //   if (erased_xIsaY || xIsaY &amp;&amp; !isDef)  (alts(EmptyTree, pat), subs, None) // never =:= for &lt;equals&gt;
            //   else if (isDef)                       (EmptyTree,           dummy, pass)
            //   else                                  (None,                 None, pass)
              
          }) : <span title="(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], Option[(Int, ParallelMatching.this.global.Tree)])">(</span>Option[Tree], Option[(Int, List[Tree])], Option[(Int, Tree)])
        }
      ) <span title="(List[ParallelMatching.this.global.Tree], List[(Int, List[ParallelMatching.this.global.Tree])], List[(Int, ParallelMatching.this.global.Tree)])" class="keyword">match</span> { <span title="(List[ParallelMatching.this.global.Tree], List[(Int, List[ParallelMatching.this.global.Tree])], List[(Int, ParallelMatching.this.global.Tree)])" class="keyword">case</span> (<a title="List[Option[ParallelMatching.this.global.Tree]]" id="547723">x</a>,<a title="List[Option[(Int, List[ParallelMatching.this.global.Tree])]]" id="547724">y</a>,<a title="List[Option[(Int, ParallelMatching.this.global.Tree)]]" id="547725">z</a>) =&gt; <span title="(_1: List[ParallelMatching.this.global.Tree],_2: List[(Int, List[ParallelMatching.this.global.Tree])],_3: List[(Int, ParallelMatching.this.global.Tree)])(List[ParallelMatching.this.global.Tree], List[(Int, List[ParallelMatching.this.global.Tree])], List[(Int, ParallelMatching.this.global.Tree)])">(</span><a href="#541414" title="(xs: List[Option[ParallelMatching.this.global.Tree]])List[ParallelMatching.this.global.Tree]">join</a>(<a href="#547723" title="List[Option[ParallelMatching.this.global.Tree]]">x</a>), <a href="#541414" title="(xs: List[Option[(Int, List[ParallelMatching.this.global.Tree])]])List[(Int, List[ParallelMatching.this.global.Tree])]">join</a>(<a href="#547724" title="List[Option[(Int, List[ParallelMatching.this.global.Tree])]]">y</a>), <a href="#541414" title="(xs: List[Option[(Int, ParallelMatching.this.global.Tree)]])List[(Int, ParallelMatching.this.global.Tree)]">join</a>(<a href="#547725" title="List[Option[(Int, ParallelMatching.this.global.Tree)]]">z</a>)) }

      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="541424">toString</a> = {
        <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;MixTypes(%s: %s) {\n  moreSpecific: %s\n  subsumed: %s\n  remaining: %s\n}&quot;</span>.<span title="(args: Any*)String">format</span>(
          <a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>, <a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540516" title="=&gt; ParallelMatching.this.global.Type">tpe</a>, <a href="#541418" title="=&gt; List[ParallelMatching.this.global.Tree]">moreSpecific</a>, <a href="#541420" title="=&gt; List[(Int, List[ParallelMatching.this.global.Tree])]">subsumed</a>, <a href="#541422" title="=&gt; List[(Int, ParallelMatching.this.global.Tree)]">remaining</a>
        )
      }

      /** returns casted symbol, success matrix and optionally fail matrix for type test on the top of this column */
      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()MatchMatrix.this.Branch[MatchMatrix.this.Scrutinee]" id="541425">getTransition</a>(): <a href="#543747" title="MatchMatrix.this.Branch[MatchMatrix.this.Scrutinee]">Branch</a>[Scrutinee] = {
        <span class="keyword">val</span> <a title="MatchMatrix.this.Scrutinee" id="547882">casted</a> = <a href="#540526" title="(headType: ParallelMatching.this.global.Type)MatchMatrix.this.Scrutinee">scrut</a> casted <a href="#541428" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#540761" title="=&gt; ParallelMatching.this.global.Type">headType</a>
        <span class="keyword">val</span> <a title="Boolean" id="547883">isAnyMoreSpecific</a> = <a href="#541418" title="(p: (ParallelMatching.this.global.Tree) =&gt; Boolean)Boolean">moreSpecific</a> exists (<a href="#547897" title="(x$1: AnyRef)Boolean">_</a> != <a href="../ast/Trees.scala.html#26602" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a>)
        
        <span class="keyword">def</span> <a title="=&gt; List[(Int, List[ParallelMatching.this.global.Tree])]" id="547884">mkZipped</a>    = <a href="#541418" title="(that: Iterable[(Int, List[ParallelMatching.this.global.Tree])])(implicit bf: scala.collection.generic.BuilderFactory[(ParallelMatching.this.global.Tree, (Int, List[ParallelMatching.this.global.Tree])),List[(ParallelMatching.this.global.Tree, (Int, List[ParallelMatching.this.global.Tree]))],List[ParallelMatching.this.global.Tree]])List[(ParallelMatching.this.global.Tree, (Int, List[ParallelMatching.this.global.Tree]))]">moreSpecific</a> <span title="(f: ((ParallelMatching.this.global.Tree, (Int, List[ParallelMatching.this.global.Tree]))) =&gt; (Int, List[ParallelMatching.this.global.Tree]))(implicit bf: scala.collection.generic.BuilderFactory[(Int, List[ParallelMatching.this.global.Tree]),List[(Int, List[ParallelMatching.this.global.Tree])],List[(ParallelMatching.this.global.Tree, (Int, List[ParallelMatching.this.global.Tree]))]])List[(Int, List[ParallelMatching.this.global.Tree])]">zip</span> <a href="#541420" title="=&gt; List[(Int, List[ParallelMatching.this.global.Tree])]">subsumed</a> <span title="scala.collection.generic.BuilderFactory[(Int, List[ParallelMatching.this.global.Tree]),List[(Int, List[ParallelMatching.this.global.Tree])],List#Coll]">map</span> <a href="#548005" title="(Int, List[ParallelMatching.this.global.Tree])">{</a> <span title="(Int, List[ParallelMatching.this.global.Tree])" class="keyword">case</span> (<a title="ParallelMatching.this.global.Tree" id="548008">mspat</a>, (<a title="Int" id="548011">j</a>, <a title="List[ParallelMatching.this.global.Tree]" id="548012">pats</a>)) =&gt; <span title="(_1: Int,_2: List[ParallelMatching.this.global.Tree])(Int, List[ParallelMatching.this.global.Tree])">(</span><a href="#548011" title="Int">j</a>, <a href="#548008" title="ParallelMatching.this.global.Tree">mspat</a> <a href="#548021" title="ParallelMatching.this.global.Tree">::</a> <a href="#548012" title="(x: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">pats</a>) }
        <span class="keyword">def</span> <a title="=&gt; List[ParallelMatching.this.global.Symbol]" id="547885">mkAccessors</a> = <a href="#547882" title="MatchMatrix.this.Scrutinee">casted</a>.<a href="#540518" title="(f: (ParallelMatching.this.global.Symbol) =&gt; ParallelMatching.this.global.Symbol)(implicit bf: scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Symbol,List[ParallelMatching.this.global.Symbol],List[ParallelMatching.this.global.Symbol]])List[ParallelMatching.this.global.Symbol]">accessors</a> <span title="scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Symbol,List[ParallelMatching.this.global.Symbol],List#Coll]">map</span> (<a title="ParallelMatching.this.global.Symbol" id="548120">m</a> =&gt; <a href="TransMatcher.scala.html#79385" title="(pos: scala.tools.nsc.util.Position,tpe: ParallelMatching.this.global.Type,flags: List[Long],name: ParallelMatching.this.global.Name)ParallelMatching.this.global.Symbol">newVar</a>(<a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540517" title="=&gt; scala.tools.nsc.util.Position">pos</a>, (<a href="#547882" title="MatchMatrix.this.Scrutinee">casted</a>.<a href="../symtab/Types.scala.html#30223" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.Type">tpe</a> memberType <a href="#548120" title="ParallelMatching.this.global.Symbol">m</a>).<a href="../symtab/Types.scala.html#30193" title="=&gt; ParallelMatching.this.global.Type">resultType</a>, <a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540524" title="=&gt; List[Long]">flags</a>)) 

        <span class="keyword">val</span> <a href="#547887" title="(List[(Int, List[ParallelMatching.this.global.Tree])], List[ParallelMatching.this.global.Symbol])">(</a><a href="#547886" title="List[(Int, List[ParallelMatching.this.global.Tree])]" id="547887">subtests</a>, <a href="#547886" title="List[ParallelMatching.this.global.Symbol]" id="547888">subtestVars</a>) =
          <span title="(List[(Int, List[ParallelMatching.this.global.Tree])], List[ParallelMatching.this.global.Symbol])" class="keyword">if</span> (<a href="#547883" title="Boolean">isAnyMoreSpecific</a>)  <span title="(_1: List[(Int, List[ParallelMatching.this.global.Tree])],_2: List[ParallelMatching.this.global.Symbol])(List[(Int, List[ParallelMatching.this.global.Tree])], List[ParallelMatching.this.global.Symbol])">(</span><a href="#547884" title="=&gt; List[(Int, List[ParallelMatching.this.global.Tree])]">mkZipped</a>, <span title="(xs: ParallelMatching.this.global.Symbol*)List[ParallelMatching.this.global.Symbol]">List</span>(<a href="#547882" title="MatchMatrix.this.Scrutinee">casted</a>.<a href="#540678" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>))
          <span class="keyword">else</span>                    <span title="(_1: List[(Int, List[ParallelMatching.this.global.Tree])],_2: object Nil)(List[(Int, List[ParallelMatching.this.global.Tree])], object Nil)">(</span><a href="#541420" title="=&gt; List[(Int, List[ParallelMatching.this.global.Tree])]">subsumed</a>, <span title="object Nil">Nil</span>)
                  
        <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Symbol]" id="547889">accessorVars</a> = <span title="List[ParallelMatching.this.global.Symbol]" class="keyword">if</span> (<a href="#541428" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#540763" title="=&gt; Boolean">isCaseHead</a>) <a href="#547885" title="=&gt; List[ParallelMatching.this.global.Symbol]">mkAccessors</a> <span class="keyword">else</span> <span title="object Nil">Nil</span>
        <span class="keyword">val</span> <a title="List[MatchMatrix.this.Row]" id="547890">newRows</a> =
          <span class="keyword">for</span> ((<a title="Int" id="548277">j</a>, <a title="List[ParallelMatching.this.global.Tree]" id="548278">ps</a>) &lt;- <a href="#547887" title="(f: ((Int, List[ParallelMatching.this.global.Tree])) =&gt; MatchMatrix.this.Row)(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[(Int, List[ParallelMatching.this.global.Tree])]])List[MatchMatrix.this.Row]">subtests</a>) <span class="keyword">yield</span> {
            <span class="keyword">val</span> <a href="PatternNodes.scala.html#536059" title="(x: ParallelMatching.this.global.Tree)Option[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Tree)]">Strip</a><a href="#548282" title="(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Tree)">(</a><a href="#548281" title="List[ParallelMatching.this.global.Symbol]" id="548282">vs</a>, <a href="#548281" title="ParallelMatching.this.global.Tree" id="548283">thePat</a>) = <a href="#540769" title="(i: Int)ParallelMatching.this.global.Tree">pats</a><a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree @unchecked">(</a><a href="#548277" title="Int">j</a>)
            (<a href="#540073" title="(n: Int)MatchMatrix.this.Row">rest</a> rows <a href="#548277" title="Int">j</a>).<a href="#539951" title="(hs: List[ParallelMatching.this.global.Tree],vs: Iterable[ParallelMatching.this.global.Symbol],tvars: ParallelMatching.this.global.Symbol)MatchMatrix.this.Row">insert2</a>(<a href="#548278" title="List[ParallelMatching.this.global.Tree]">ps</a>, <a href="#548282" title="List[ParallelMatching.this.global.Symbol]">vs</a>, <a href="#547882" title="MatchMatrix.this.Scrutinee">casted</a>.<a href="#540678" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>)
          }
          
        <a href="#543747" title="(action: MatchMatrix.this.Scrutinee,succ: MatchMatrix.this.Rep,fail: Option[MatchMatrix.this.Rep])MatchMatrix.this.Branch[MatchMatrix.this.Scrutinee]">Branch</a>(
          <a href="#547882" title="MatchMatrix.this.Scrutinee">casted</a>,
          // succeeding =&gt; transition to translate(subsumed) (taking into account more specific)
          <a href="#81053" title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">make</a>(<a href="#547888" title="List[ParallelMatching.this.global.Symbol]">subtestVars</a> <a href="#548403" title="List[ParallelMatching.this.global.Symbol]">:::</a> <a href="#547889" title="List[ParallelMatching.this.global.Symbol]">accessorVars</a> <a href="#548404" title="(prefix: List[ParallelMatching.this.global.Symbol])List[ParallelMatching.this.global.Symbol]">:::</a> <a href="#541429" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#540072" title="(prefix: List[ParallelMatching.this.global.Symbol])List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#547890" title="List[MatchMatrix.this.Row]">newRows</a>),
          // fails      =&gt; transition to translate(remaining)
          <a href="#541249" title="(xs: List[MatchMatrix.this.Row])Option[MatchMatrix.this.Rep]">mkFailOpt</a>(<a href="#541422" title="(f: ((Int, ParallelMatching.this.global.Tree)) =&gt; MatchMatrix.this.Row)(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[(Int, ParallelMatching.this.global.Tree)]])List[MatchMatrix.this.Row]">remaining</a> <span title="scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List#Coll]">map</span> <span title="(f: (Int, ParallelMatching.this.global.Tree) =&gt; MatchMatrix.this.Row)((Int, ParallelMatching.this.global.Tree)) =&gt; MatchMatrix.this.Row">tupled</span>(<a href="#540073" title="(n: Int)MatchMatrix.this.Row">rest</a> <a href="#539946" title="(h: ParallelMatching.this.global.Tree)MatchMatrix.this.Row">rows</a> <a href="#548511" title="Int">_</a> insert <a href="#548512" title="ParallelMatching.this.global.Tree">_</a>))
        )
      }
      
      // temporary checks so we're less crashy while we determine what to implement.
      <span class="keyword">def</span> <a title="(scrut: MatchMatrix.this.Scrutinee)ParallelMatching.this.global.Type" id="541426">checkErroneous</a>(<a title="MatchMatrix.this.Scrutinee" id="548569">scrut</a>: <a href="#540676" title="MatchMatrix.this.Scrutinee">Scrutinee</a>): <a href="../symtab/Types.scala.html#26205" title="ParallelMatching.this.global.Type">Type</a> = {
        <a href="#548569" title="MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540516" title="=&gt; ParallelMatching.this.global.Type">tpe</a> <span title="ParallelMatching.this.global.Type" class="keyword">match</span> {
          <span title="ParallelMatching.this.global.ErrorType.type" class="keyword">case</span> <a title="ParallelMatching.this.global.ThisType" id="548571">tpe</a> @ ThisType(_) <span class="keyword">if</span> <a href="#548571" title="ParallelMatching.this.global.ThisType">tpe</a>.<a href="../symtab/Types.scala.html#42782" title="(x$1: AnyRef)Boolean">termSymbol</a> == <a href="../symtab/Symbols.scala.html#26134" title="object ParallelMatching.this.global.NoSymbol">NoSymbol</a>        =&gt;
            <a href="TransMatcher.scala.html#79166" title="=&gt; ParallelMatching.this.global.CompilationUnit">cunit</a>.<a href="../CompilationUnits.scala.html#45455" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<a href="#548569" title="MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540517" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="java.lang.String(&quot;self type test in anonymous class forbidden by implementation.&quot;)" class="string">&quot;self type test in anonymous class forbidden by implementation.&quot;</span>)
            <a href="../symtab/Types.scala.html#26217" title="object ParallelMatching.this.global.ErrorType">ErrorType</a>
          <span title="ParallelMatching.this.global.Type" class="keyword">case</span> <a title="ParallelMatching.this.global.Type" id="548587">x</a> =&gt; <a href="#548587" title="ParallelMatching.this.global.Type">x</a>
        }
      }

      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()ParallelMatching.this.global.Tree" id="541427">tree</a>(): <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a> = {
        <span class="keyword">val</span> Branch<a href="#548590" title="(MatchMatrix.this.Scrutinee, MatchMatrix.this.Rep, Option[MatchMatrix.this.Rep])">(</a><a href="#548589" title="MatchMatrix.this.Scrutinee" id="548590">casted</a>, <a href="#548589" title="MatchMatrix.this.Rep" id="548591">srep</a>, <a href="#548589" title="Option[MatchMatrix.this.Rep]" id="548592">frep</a>) = <a href="#81082" title="MixTypes.this.type" class="keyword">this</a>.<a href="#541425" title="()MatchMatrix.this.Branch[MatchMatrix.this.Scrutinee]">getTransition</a>
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Type" id="548593">castedTpe</a> = <a href="#541426" title="(scrut: MatchMatrix.this.Scrutinee)ParallelMatching.this.global.Type">checkErroneous</a>(<a href="#548590" title="MatchMatrix.this.Scrutinee">casted</a>)
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="548594">cond</a> = <a href="#81106" title="(tpe: ParallelMatching.this.global.Type,scrut: MatchMatrix.this.Scrutinee)ParallelMatching.this.global.Tree">condition</a>(<a href="#548593" title="ParallelMatching.this.global.Type">castedTpe</a>, <a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>)
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="548595">succ</a> = <a href="#548591" title="MatchMatrix.this.Rep">srep</a>.<a href="#81124" title="()ParallelMatching.this.global.Tree">toTree</a>
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="548596">fail</a> = <a href="#548592" title="(f: (MatchMatrix.this.Rep) =&gt; ParallelMatching.this.global.Tree)Option[ParallelMatching.this.global.Tree]">frep</a> <span title="(default: =&gt; ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">map</span> (<a href="#548646" title="MatchMatrix.this.Rep">_</a>.<a href="#81124" title="()ParallelMatching.this.global.Tree">toTree</a>) getOrElse (<a href="#81030" title="=&gt; ParallelMatching.this.global.Tree">failTree</a>)

        // dig out case field accessors that were buried in (***)
        <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Symbol]" id="548597">cfa</a>         = <span title="List[ParallelMatching.this.global.Symbol]" class="keyword">if</span> (<a href="#541428" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#540763" title="=&gt; Boolean">isCaseHead</a>) <a href="#548590" title="MatchMatrix.this.Scrutinee">casted</a>.<a href="#540518" title="=&gt; List[ParallelMatching.this.global.Symbol]">accessors</a> <span class="keyword">else</span> <span title="object Nil">Nil</span>
        <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Symbol]" id="548598">caseTemps</a>   = <a href="#548591" title="MatchMatrix.this.Rep">srep</a>.<a href="#540072" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a> <span title="List[ParallelMatching.this.global.Symbol]" class="keyword">match</span> { <span title="List[ParallelMatching.this.global.Symbol]" class="keyword">case</span> <a title="ParallelMatching.this.global.Symbol" id="548663">x</a> :: <a title="List[ParallelMatching.this.global.Symbol]" id="548664">xs</a> <span class="keyword">if</span> <a href="#548663" title="(x$1: AnyRef)Boolean">x</a> == <a href="#548590" title="MatchMatrix.this.Scrutinee">casted</a>.<a href="#540678" title="=&gt; ParallelMatching.this.global.Symbol">sym</a> =&gt; <a href="#548664" title="List[ParallelMatching.this.global.Symbol]">xs</a> ; <span title="List[ParallelMatching.this.global.Symbol]" class="keyword">case</span> <a title="List[ParallelMatching.this.global.Symbol]" id="548673">x</a> =&gt; <a href="#548673" title="List[ParallelMatching.this.global.Symbol]">x</a> }
        <span class="keyword">def</span> <a title="=&gt; ParallelMatching.this.global.analyzer.global.Tree" id="548599">castedScrut</a> = <a href="TransMatcher.scala.html#79386" title="(x: ParallelMatching.this.global.Symbol,rhs: ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typedValDef</a>(<a href="#548590" title="MatchMatrix.this.Scrutinee">casted</a>.<a href="#540678" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>, <a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="../ast/TreeDSL.scala.html#45089" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.gen.global.Tree">id</a> AS_ANY <a href="#548593" title="ParallelMatching.this.global.Type">castedTpe</a>)
        <span class="keyword">def</span> <a title="=&gt; List[ParallelMatching.this.global.analyzer.global.Tree]" id="548600">needCast</a>    = <span title="List[ParallelMatching.this.global.analyzer.global.Tree]" class="keyword">if</span> (<a href="#548590" title="MatchMatrix.this.Scrutinee">casted</a>.<a href="#540678" title="(x$1: AnyRef)Boolean">sym</a> ne <a href="#541240" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540678" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>) <span title="(xs: ParallelMatching.this.global.analyzer.global.Tree*)List[ParallelMatching.this.global.analyzer.global.Tree]">List</span>(<a href="#548599" title="=&gt; ParallelMatching.this.global.analyzer.global.Tree">castedScrut</a>) <span class="keyword">else</span> <span title="object Nil">Nil</span> 
        
        
        <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.analyzer.global.Tree]" id="548601">vdefs</a>       = <a href="#548600" title="=&gt; List[ParallelMatching.this.global.analyzer.global.Tree]">needCast</a> <a href="#548716" title="List[ParallelMatching.this.global.analyzer.global.Tree]">:::</a> <span title="(prefix: List[ParallelMatching.this.global.analyzer.global.Tree])List[ParallelMatching.this.global.analyzer.global.Tree]">(</span>
          <span class="keyword">for</span> ((<a title="ParallelMatching.this.global.Symbol" id="548834">tmp</a>, <a title="ParallelMatching.this.global.Symbol" id="548835">accessor</a>) &lt;- <a href="#548598" title="(that: Iterable[ParallelMatching.this.global.Symbol])(implicit bf: scala.collection.generic.BuilderFactory[(ParallelMatching.this.global.Symbol, ParallelMatching.this.global.Symbol),List[(ParallelMatching.this.global.Symbol, ParallelMatching.this.global.Symbol)],List[ParallelMatching.this.global.Symbol]])List[(ParallelMatching.this.global.Symbol, ParallelMatching.this.global.Symbol)]">caseTemps</a> <a href="#548810" title="(f: ((ParallelMatching.this.global.Symbol, ParallelMatching.this.global.Symbol)) =&gt; ParallelMatching.this.global.analyzer.global.Tree)(implicit bf: scala.collection.generic.BuilderFactory[ParallelMatching.this.global.analyzer.global.Tree,List[ParallelMatching.this.global.analyzer.global.Tree],List[(ParallelMatching.this.global.Symbol, ParallelMatching.this.global.Symbol)]])List[ParallelMatching.this.global.analyzer.global.Tree]">zip</a> <a href="#548597" title="List[ParallelMatching.this.global.Symbol]">cfa</a>) <span class="keyword">yield</span>
            <a href="TransMatcher.scala.html#79386" title="(x: ParallelMatching.this.global.Symbol,rhs: ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typedValDef</a>(<a href="#548834" title="ParallelMatching.this.global.Symbol">tmp</a>, <a href="../typechecker/Typers.scala.html#42640" title="(tree: ParallelMatching.this.global.analyzer.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typer</a> typed <a href="../ast/TreeDSL.scala.html#42503" title="(lhs: ParallelMatching.this.global.Tree,op: ParallelMatching.this.global.Symbol,args: ParallelMatching.this.global.Tree*)ParallelMatching.this.global.Apply">fn</a>(<a href="#548590" title="MatchMatrix.this.Scrutinee">casted</a>.<a href="#540519" title="=&gt; ParallelMatching.this.global.gen.global.Tree">id</a>, <a href="#548835" title="ParallelMatching.this.global.Symbol">accessor</a>))
        )

        <a href="../typechecker/Typers.scala.html#42640" title="(tree: ParallelMatching.this.global.analyzer.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typer</a> typed (<a href="../ast/TreeDSL.scala.html#42524" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">IF</a> <a href="../ast/TreeDSL.scala.html#49788" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">(</a><a href="#548594" title="ParallelMatching.this.global.Tree">cond</a>) <a href="../ast/TreeDSL.scala.html#49789" title="(elsep: ParallelMatching.this.global.Tree)ParallelMatching.this.global.If">THEN</a> <a href="TransMatcher.scala.html#79387" title="(vds: List[ParallelMatching.this.global.Tree],exp: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">squeezedBlock</a>(<a href="#548601" title="List[ParallelMatching.this.global.analyzer.global.Tree]">vdefs</a>, <a href="#548595" title="ParallelMatching.this.global.Tree">succ</a>) ELSE <a href="#548596" title="ParallelMatching.this.global.Tree">fail</a>)
      }
    }

    case <span class="keyword">class</span> <a title="class Row extends java.lang.Object with ScalaObject with Product" id="539973">Row</a><span title="ScalaObject">(</span><a title="List[ParallelMatching.this.global.Tree]" id="539975">pat</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree], <a title="ParallelMatching.this.Bindings" id="539976">subst</a>: <a href="PatternNodes.scala.html#79252" title="ParallelMatching.this.Bindings">Bindings</a>, <a title="MatchMatrix.this.Guard" id="539977">guard</a>: <a href="#536393" title="MatchMatrix.this.Guard">Guard</a>, <a title="Int" id="539978">bx</a>: <span title="Int">Int</span>) {
      <span class="keyword">def</span> <a title="(h: ParallelMatching.this.global.Tree)MatchMatrix.this.Row" id="539946">insert</a>(<a title="ParallelMatching.this.global.Tree" id="543639">h</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>)                               = <a href="#539973" title="(pat: List[ParallelMatching.this.global.Tree],subst: ParallelMatching.this.Bindings,guard: MatchMatrix.this.Guard,bx: Int)MatchMatrix.this.Row">copy</a>(pat = <a href="#543639" title="ParallelMatching.this.global.Tree">h</a> <a href="#543642" title="ParallelMatching.this.global.Tree">::</a> <a href="#539975" title="(x: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">pat</a>)
      <span class="keyword">def</span> <a title="(hs: List[ParallelMatching.this.global.Tree])MatchMatrix.this.Row" id="539947">insert</a>(<a title="List[ParallelMatching.this.global.Tree]" id="543626">hs</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree])                        = <a href="#539973" title="(pat: List[ParallelMatching.this.global.Tree],subst: ParallelMatching.this.Bindings,guard: MatchMatrix.this.Guard,bx: Int)MatchMatrix.this.Row">copy</a>(pat = <a href="#543626" title="List[ParallelMatching.this.global.Tree]">hs</a> <a href="#543629" title="List[ParallelMatching.this.global.Tree]">:::</a> <a href="#539975" title="(prefix: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">pat</a>)    // prepends supplied tree
      <span class="keyword">def</span> <a title="(hs: List[ParallelMatching.this.global.Tree])MatchMatrix.this.Row" id="539948">replace</a>(<a title="List[ParallelMatching.this.global.Tree]" id="548991">hs</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree])                       = <a href="#539973" title="(pat: List[ParallelMatching.this.global.Tree],subst: ParallelMatching.this.Bindings,guard: MatchMatrix.this.Guard,bx: Int)MatchMatrix.this.Row">copy</a>(pat = <a href="#548991" title="List[ParallelMatching.this.global.Tree]">hs</a>)            // substitutes for patterns
      <span class="keyword">def</span> <a title="(b: ParallelMatching.this.Bindings)MatchMatrix.this.Row" id="539949">rebind</a>(<a title="ParallelMatching.this.Bindings" id="543018">b</a>: <a href="PatternNodes.scala.html#79252" title="ParallelMatching.this.Bindings">Bindings</a>)                           = <a href="#539975" title="List[ParallelMatching.this.global.Tree]" id="543025">copy</a>(subst = <a href="#543018" title="ParallelMatching.this.Bindings" id="543022">b</a>)           // substitutes for bindings
      
      <span class="keyword">def</span> <a title="(vs: Iterable[ParallelMatching.this.global.Symbol],tvars: ParallelMatching.this.global.Symbol)MatchMatrix.this.Row" id="539950">rebind2</a>(<a title="Iterable[ParallelMatching.this.global.Symbol]" id="541992">vs</a>: <span title="Iterable[ParallelMatching.this.global.Symbol]">Iterable</span>[Symbol], <a title="ParallelMatching.this.global.Symbol" id="541993">tvars</a>: <a href="../symtab/Symbols.scala.html#26127" title="ParallelMatching.this.global.Symbol">Symbol</a>) =
        <a href="#539975" title="List[ParallelMatching.this.global.Tree]" id="542029">copy</a>(subst = <a href="#539976" title="=&gt; ParallelMatching.this.Bindings">subst</a>.<a href="PatternNodes.scala.html#536838" title="(vs: Iterable[ParallelMatching.this.global.Symbol],tvar: ParallelMatching.this.global.Symbol)ParallelMatching.this.Bindings">add</a><a title="ParallelMatching.this.Bindings" id="542026">(</a><a href="#541992" title="Iterable[ParallelMatching.this.global.Symbol]">vs</a>, <a href="#541993" title="ParallelMatching.this.global.Symbol">tvars</a>))
      <span class="keyword">def</span> <a title="(hs: List[ParallelMatching.this.global.Tree],vs: Iterable[ParallelMatching.this.global.Symbol],tvars: ParallelMatching.this.global.Symbol)MatchMatrix.this.Row" id="539951">insert2</a>(<a title="List[ParallelMatching.this.global.Tree]" id="543856">hs</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree], <a title="Iterable[ParallelMatching.this.global.Symbol]" id="543857">vs</a>: <span title="Iterable[ParallelMatching.this.global.Symbol]">Iterable</span>[Symbol], <a title="ParallelMatching.this.global.Symbol" id="543858">tvars</a>: <a href="../symtab/Symbols.scala.html#26127" title="ParallelMatching.this.global.Symbol">Symbol</a>) =             // prepends and prepends
        <a href="#539973" title="(pat: List[ParallelMatching.this.global.Tree],subst: ParallelMatching.this.Bindings,guard: MatchMatrix.this.Guard,bx: Int)MatchMatrix.this.Row">copy</a>(pat = <a href="#543856" title="List[ParallelMatching.this.global.Tree]">hs</a> <a href="#543861" title="List[ParallelMatching.this.global.Tree]">:::</a> <a href="#539975" title="(prefix: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">pat</a>, subst = <a href="#539976" title="=&gt; ParallelMatching.this.Bindings">subst</a>.<a href="PatternNodes.scala.html#536838" title="(vs: Iterable[ParallelMatching.this.global.Symbol],tvar: ParallelMatching.this.global.Symbol)ParallelMatching.this.Bindings">add</a>(<a href="#543857" title="Iterable[ParallelMatching.this.global.Symbol]">vs</a>, <a href="#543858" title="ParallelMatching.this.global.Symbol">tvars</a>))

      <span class="keyword">def</span> <a title="(p: ParallelMatching.this.Pattern)MatchMatrix.this.Row" id="539952">insert</a>(<a title="ParallelMatching.this.Pattern" id="543610">p</a>: <a href="#535750" title="ParallelMatching.this.Pattern">Pattern</a>)                            = <a href="#539973" title="(pat: List[ParallelMatching.this.global.Tree],subst: ParallelMatching.this.Bindings,guard: MatchMatrix.this.Guard,bx: Int)MatchMatrix.this.Row">copy</a>(pat = <a href="#543610" title="ParallelMatching.this.Pattern">p</a>.<a href="#535774" title="=&gt; ParallelMatching.this.global.Tree">tree</a> <a href="#543616" title="ParallelMatching.this.global.Tree">::</a> <a href="#539975" title="(x: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">pat</a>) // transitioning to patterns

      /** returns true if the patterns in this rows cover a type symbols &quot;combination&quot; and there is no guard
       *  @param comb pairs of (column index, type symbol)
       */
      <span class="keyword">def</span> <a title="(combos: List[MatchMatrix.this.Combo])Boolean" id="539953">covers</a>(<a title="List[MatchMatrix.this.Combo]" id="548996">combos</a>: <span title="List[MatchMatrix.this.Combo]">List</span>[Combo]) =
        <a href="#539977" title="=&gt; MatchMatrix.this.Guard">guard</a>.<a href="#536398" title="(x$1: Boolean)Boolean">isEmpty</a> &amp;&amp; (<a href="#548996" title="(p: (MatchMatrix.this.Combo) =&gt; Boolean)Boolean">combos</a> forall (<a title="MatchMatrix.this.Combo" id="549003">c</a> =&gt; <a href="#549011" title="(p: ParallelMatching.this.global.Tree)Boolean">c</a> isCovered <a href="#539975" title="(n: Int)ParallelMatching.this.global.Tree">pat</a>(<a href="#549003" title="MatchMatrix.this.Combo">c</a>.<a href="#550389" title="=&gt; Int">index</a>)))

      // returns this rows with alternatives expanded
      <span class="keyword">def</span> <a title="(classifyPat: (ParallelMatching.this.global.Tree, Int) =&gt; ParallelMatching.this.global.Tree)List[MatchMatrix.this.Row]" id="539954">expandAlternatives</a>(<a title="(ParallelMatching.this.global.Tree, Int) =&gt; ParallelMatching.this.global.Tree" id="539957">classifyPat</a>: (Tree, Int) =&gt; Tree): <span title="List[MatchMatrix.this.Row]">List</span>[Row] = {
        // If the given pattern contains alternatives, return it as a list of patterns.
        // Makes typed copies of any bindings found so all alternatives point to final state.
        <span class="keyword">def</span> <a title="(b: ParallelMatching.this.global.Bind)(ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree" id="549117">newPrev</a>(<a title="ParallelMatching.this.global.Bind" id="549120">b</a>: <a href="../ast/Trees.scala.html#26669" title="ParallelMatching.this.global.Bind">Bind</a>): <span title="(ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree">TreeFunction1</span> = (x: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>) =&gt; <a href="../ast/Trees.scala.html#26584" title="=&gt; ParallelMatching.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48604" title="(tree: ParallelMatching.this.global.Tree,name: ParallelMatching.this.global.Name,body: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Bind">Bind</a><a href="../ast/Trees.scala.html#29366" title="(tp: ParallelMatching.this.global.Type)ParallelMatching.this.global.Bind">(</a><a href="#549120" title="ParallelMatching.this.global.Bind">b</a>, <a href="#549120" title="ParallelMatching.this.global.Bind">b</a>.<a href="../ast/Trees.scala.html#98300" title="=&gt; ParallelMatching.this.global.Name">name</a>, <a href="#549122" title="ParallelMatching.this.global.Tree">x</a>) setType <a href="#549122" title="ParallelMatching.this.global.Tree">x</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; ParallelMatching.this.global.Type">tpe</a>
        <span class="keyword">def</span> <a title="(p: ParallelMatching.this.global.Tree,prevBindings: (ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]" id="549118">extractBindings</a>(<a title="ParallelMatching.this.global.Tree" id="549139">p</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="(ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree" id="549141">prevBindings</a>: <span title="(ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree">TreeFunction1</span> = <span title="[A](x: A)A">identity</span><a href="#549144" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">[</a><a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>] _): <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree] = <a href="#549139" title="ParallelMatching.this.global.Tree">p</a> <span title="List[ParallelMatching.this.global.Tree]" class="keyword">match</span> {
          <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> <a title="ParallelMatching.this.global.Bind" id="549148">b</a> @ Bind(_, <a title="ParallelMatching.this.global.Tree" id="549153">body</a>)    =&gt; <a href="#549118" title="(p: ParallelMatching.this.global.Tree,prevBindings: (ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">extractBindings</a>(<a href="#549153" title="ParallelMatching.this.global.Tree">body</a>, <a href="#549117" title="(b: ParallelMatching.this.global.Bind)(ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree">newPrev</a>(<a href="#549148" title="ParallelMatching.this.global.Bind">b</a>))
          <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> Alternative(<a title="List[ParallelMatching.this.global.Tree]" id="549161">ps</a>)      =&gt; <a href="#549161" title="(f: (ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree)(implicit bf: scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Tree,List[ParallelMatching.this.global.Tree],List[ParallelMatching.this.global.Tree]])List[ParallelMatching.this.global.Tree]">ps</a> <span title="scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Tree,List[ParallelMatching.this.global.Tree],List#Coll]">map</span> <a href="#549141" title="(ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree">prevBindings</a>
          <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> <a title="ParallelMatching.this.global.Tree" id="549195">x</a>                    =&gt; <span title="(xs: ParallelMatching.this.global.Tree*)List[ParallelMatching.this.global.Tree]">List</span>(<a href="#549195" title="ParallelMatching.this.global.Tree">x</a>)  // this shouldn't happen
        }

        // classify all the top level patterns - alternatives come back unaltered
        <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Tree]" id="549119">newPats</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree] = <span title="object List">List</span>.<span title="(xs: List[ParallelMatching.this.global.Tree],ys: List[Int])(f: (ParallelMatching.this.global.Tree, Int) =&gt; ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">map2</span>(<a href="#539975" title="=&gt; List[ParallelMatching.this.global.Tree]">pat</a>, <a href="#539975" title="=&gt; List[ParallelMatching.this.global.Tree]">pat</a>.<span title="=&gt; Range">indices</span>.<span title="=&gt; List[Int]">toList</span>)(<a href="#539957" title="(ParallelMatching.this.global.Tree, Int) =&gt; ParallelMatching.this.global.Tree">classifyPat</a>)
        
        // expand alternatives if any are present
        (<a href="#549119" title="(p: (ParallelMatching.this.global.Tree) =&gt; Boolean)Int" id="25556">newPats</a> indexWhere <a href="#79294" title="(t: ParallelMatching.this.global.Tree)Boolean">isAlternative</a>) <span title="List[MatchMatrix.this.Row]" class="keyword">match</span> {
          <span title="List[MatchMatrix.this.Row]" class="keyword">case</span> <span title="Int(-1)">-</span><span class="int">1</span>     =&gt; <span title="(xs: MatchMatrix.this.Row*)List[MatchMatrix.this.Row]">List</span>(<a href="#539948" title="(hs: List[ParallelMatching.this.global.Tree])MatchMatrix.this.Row">replace</a>(<a href="#549119" title="List[ParallelMatching.this.global.Tree]">newPats</a>))
          <span title="List[MatchMatrix.this.Row]" class="keyword">case</span> <a title="Int" id="549258">index</a>  =&gt;
            <span class="keyword">val</span> <a href="#549260" title="(List[ParallelMatching.this.global.Tree], ParallelMatching.this.global.Tree, List[ParallelMatching.this.global.Tree])">(</a><a href="#549259" title="List[ParallelMatching.this.global.Tree]" id="549260">prefix</a>, <a href="#549259" title="ParallelMatching.this.global.Tree" id="549261">alts</a> :: <a href="#549259" title="List[ParallelMatching.this.global.Tree]" id="549262">suffix</a>) = <a href="#549119" title="(n: Int)(List[ParallelMatching.this.global.Tree], List[ParallelMatching.this.global.Tree])" id="24293">newPats</a> <span title="(List[ParallelMatching.this.global.Tree], List[ParallelMatching.this.global.Tree]) @unchecked">splitAt</span> <a href="#549258" title="Int">index</a>
            // make a new row for each alternative, with it spliced into the original position
            <a href="#549118" title="(p: ParallelMatching.this.global.Tree,prevBindings: (ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">extractBindings</a><span title="(f: (ParallelMatching.this.global.Tree) =&gt; MatchMatrix.this.Row)(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[ParallelMatching.this.global.Tree]])List[MatchMatrix.this.Row]">(</span><a href="#549261" title="ParallelMatching.this.global.Tree">alts</a>) <span title="scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List#Coll]">map</span> (<a title="ParallelMatching.this.global.Tree" id="549301">x</a> =&gt; <a href="#539948" title="(hs: List[ParallelMatching.this.global.Tree])MatchMatrix.this.Row">replace</a>(<a href="#549260" title="List[ParallelMatching.this.global.Tree]">prefix</a> <a href="#549302" title="List[ParallelMatching.this.global.Tree]">:::</a> <a href="#549301" title="ParallelMatching.this.global.Tree">x</a> <a href="#549303" title="(prefix: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">::</a> <a href="#549262" title="(x: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">suffix</a>))
        }
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="539955">toString</a>() = {
        <span class="keyword">val</span> <a title="String" id="549352">patStr</a> = <a href="#539975" title="=&gt; List[ParallelMatching.this.global.Tree]">pat</a>.<span title="=&gt; String">mkString</span>
        <span class="keyword">val</span> <a title="List[java.lang.String]" id="549353">others</a> = <span title="(xs: Product*)List[Product]">List</span><span title="(f: (Product) =&gt; java.lang.String)(implicit bf: scala.collection.generic.BuilderFactory[java.lang.String,List[java.lang.String],List[Product]])List[java.lang.String]">(</span><a href="#539976" title="=&gt; ParallelMatching.this.Bindings">subst</a>, <a href="#539977" title="=&gt; MatchMatrix.this.Guard">guard</a>) <span title="(p: (java.lang.String) =&gt; Boolean)List[java.lang.String]">map</span> (<a href="#549386" title="Product">_</a>.<a title="()java.lang.String" id="6528">toString</a>) filter (<a href="#549469" title="(x$1: AnyRef)Boolean">_</a> != <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>)
        <span class="keyword">val</span> <a title="java.lang.String" id="549354">otherStr</a> = <span title="java.lang.String" class="keyword">if</span> (<a href="#549353" title="List[java.lang.String]">others</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <span title="(x$1: Any)java.lang.String" class="string">&quot; // &quot;</span> + <a href="#549353" title="List[java.lang.String]">others</a>.<span title="(sep: String)String">mkString</span>(<span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span>)

        <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;Row(%d) %s%s&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#539978" title="=&gt; Int">bx</a>, <a href="#549352" title="String">patStr</a>, <a href="#549354" title="java.lang.String">otherStr</a>)
      }
    }
    
    case <span class="keyword">class</span> <a title="class FinalState extends java.lang.Object with ScalaObject with Product" id="537788">FinalState</a><span title="ScalaObject">(</span><a title="ParallelMatching.this.Bindings" id="537790">subst</a>: <a href="PatternNodes.scala.html#79252" title="ParallelMatching.this.Bindings">Bindings</a>, <a title="ParallelMatching.this.global.Tree" id="537791">body</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>)
    
    case <span class="keyword">class</span> <a title="class Combo extends java.lang.Object with ScalaObject with Product" id="549703">Combo</a><span title="ScalaObject">(</span><a title="Int" id="550389">index</a>: <span title="Int">Int</span>, <a title="ParallelMatching.this.global.Symbol" id="550390">sym</a>: <a href="../symtab/Symbols.scala.html#26127" title="ParallelMatching.this.global.Symbol">Symbol</a>) {
      // is this combination covered by the given pattern?
      <span class="keyword">def</span> <a title="(p: ParallelMatching.this.global.Tree)Boolean" id="549011">isCovered</a>(<a title="ParallelMatching.this.global.Tree" id="549013">p</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>) = <a href="../ast/TreeDSL.scala.html#42477" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,Boolean])Boolean">cond</a>(<a href="../ast/TreeDSL.scala.html#42488" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#549013" title="ParallelMatching.this.global.Tree">p</a>)) <a href="#549029" title="Boolean">{</a>
        <span title="Boolean(true)" class="keyword">case</span> _: <a href="../ast/Trees.scala.html#26673" title="ParallelMatching.this.global.UnApply">UnApply</a> | _: <a href="../ast/Trees.scala.html#26676" title="ParallelMatching.this.global.ArrayValue">ArrayValue</a> =&gt; <span title="Boolean(true)" class="keyword">true</span>
        <span title="Boolean" class="keyword">case</span> _                          =&gt; <a href="#79296" title="(t: ParallelMatching.this.global.Tree)Boolean">isDefaultPattern</a><span title="(x$1: Boolean)Boolean">(</span><a href="#549013" title="ParallelMatching.this.global.Tree">p</a>) || (<a href="#549013" title="ParallelMatching.this.global.Tree">p</a>.<a href="PatternNodes.scala.html#537173" title="(sym: ParallelMatching.this.global.Symbol)Boolean">tpe</a> coversSym <a href="#550390" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>) // typeCoversSym(p.tpe, sym)
      }
    }
    case <span class="keyword">class</span> <a title="class SetCombo extends java.lang.Object with ScalaObject with Product" id="549796">SetCombo</a><span title="ScalaObject">(</span><a title="Int" id="553104">index</a>: <span title="Int">Int</span>, <a title="scala.collection.Set[ParallelMatching.this.global.Symbol]" id="553105">syms</a>: <span title="scala.collection.Set[ParallelMatching.this.global.Symbol]">Set</span>[Symbol]) {}
    case <span class="keyword">class</span> <a title="class Branch[T] extends java.lang.Object with ScalaObject with Product" id="543747">Branch</a>[<a title="&gt;: Nothing &lt;: Any" id="543749">T</a>]<span title="ScalaObject">(</span><a title="T" id="543753">action</a>: <a href="#543749" title="T">T</a>, <a title="MatchMatrix.this.Rep" id="543754">succ</a>: <a href="#540070" title="MatchMatrix.this.Rep">Rep</a>, <a title="Option[MatchMatrix.this.Rep]" id="543755">fail</a>: <span title="Option[MatchMatrix.this.Rep]">Option</span>[Rep])
    case <span class="keyword">class</span> <a title="class UnapplyCall extends java.lang.Object with ScalaObject with Product" id="543765">UnapplyCall</a><span title="ScalaObject">(</span><a title="ParallelMatching.this.global.Tree" id="543775">ua</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="List[ParallelMatching.this.global.Tree]" id="543776">args</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree])
    
    // sealed abstract class Pat {
    //   def isSimple: Boolean
    // }
    // case class SimplePat(pat: Tree) extends Pat {
    //   val isSimple = true
    // }
    // case class ComplexPat(pat: Tree) extends Pat {
    //   val isSimple = false
    // }

    case <span class="keyword">class</span> <a title="class Rep extends java.lang.Object with ScalaObject with Product" id="540070">Rep</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Symbol]" id="540072">tvars</a>: <span title="List[ParallelMatching.this.global.Symbol]">List</span>[Symbol], <span class="keyword">val</span> <a title="List[MatchMatrix.this.Row]" id="540073">rows</a>: <span title="List[MatchMatrix.this.Row]">List</span>[Row]) {
      <span class="keyword">import</span> Flags._
      
      /** Converts this to a tree - recursively acquires subreps. */
      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()ParallelMatching.this.global.Tree" id="81124">toTree</a>(): <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a> = <a href="#540070" title="Rep.this.type" class="keyword">this</a>.<a href="#81131" title="()MatchMatrix.this.RuleApplication">applyRule</a>.<a href="#541251" title="()ParallelMatching.this.global.Tree">tree</a>

      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: ParallelMatching.this.global.Symbol)Boolean" id="81125">toUse</a>(<a title="ParallelMatching.this.global.Symbol" id="550016">s</a>: <a href="../symtab/Symbols.scala.html#26127" title="ParallelMatching.this.global.Symbol">Symbol</a>) =
         <span title="(x$1: Boolean)Boolean">(</span><a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">s</a> hasFlag <span title="Long(4096L)">MUTABLE</span>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>                 // indicates that have not yet checked exhaustivity
        <span title="=&gt; Boolean">!</span>(<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">s</a> hasFlag <span title="Long(274877906944L)">TRANS_FLAG</span>) &amp;&amp;              // indicates @unchecked
         (<a href="#550016" title="ParallelMatching.this.global.Symbol">s</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; ParallelMatching.this.global.Type">tpe</a>.<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">typeSymbol</a> hasFlag <span title="Long(1024L)">SEALED</span>)

      // the superclass is taken if it is not abstract
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: ParallelMatching.this.global.Symbol)scala.collection.Set[ParallelMatching.this.global.Symbol]" id="81126">countSuper</a>(<a title="ParallelMatching.this.global.Symbol" id="550029">s</a>: <a href="../symtab/Symbols.scala.html#26127" title="ParallelMatching.this.global.Symbol">Symbol</a>): <span title="scala.collection.Set[ParallelMatching.this.global.Symbol]">Set</span>[Symbol]  = <span title="scala.collection.Set[ParallelMatching.this.global.Symbol]" class="keyword">if</span> (<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">s</a> hasFlag <span title="Long(8L)">ABSTRACT</span>) <a href="../symtab/Symbols.scala.html#26119" title="=&gt; scala.collection.immutable.Set[ParallelMatching.this.global.Symbol]">emptySymbolSet</a> <span class="keyword">else</span> <a title="(args: ParallelMatching.this.global.Symbol*)scala.collection.Set[ParallelMatching.this.global.Symbol]" id="4364">Set</a>(<a href="#550029" title="ParallelMatching.this.global.Symbol">s</a>)
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: ParallelMatching.this.global.Symbol)scala.collection.Set[ParallelMatching.this.global.Symbol]" id="81127">countSymbol</a>(<a title="ParallelMatching.this.global.Symbol" id="550038">s</a>: <a href="../symtab/Symbols.scala.html#26127" title="ParallelMatching.this.global.Symbol">Symbol</a>): <span title="scala.collection.Set[ParallelMatching.this.global.Symbol]">Set</span>[Symbol] = <a href="#81128" title="(s: ParallelMatching.this.global.Symbol)scala.collection.Set[ParallelMatching.this.global.Symbol]">candidates</a><a title="(elems: Traversable[ParallelMatching.this.global.Symbol])scala.collection.Set[ParallelMatching.this.global.Symbol]" id="39371">(</a><a href="#550038" title="ParallelMatching.this.global.Symbol">s</a>) ++ <a href="#81126" title="(s: ParallelMatching.this.global.Symbol)scala.collection.Set[ParallelMatching.this.global.Symbol]">countSuper</a>(<a href="#550038" title="ParallelMatching.this.global.Symbol">s</a>)      
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: ParallelMatching.this.global.Symbol)scala.collection.Set[ParallelMatching.this.global.Symbol]" id="81128">candidates</a>(<a title="ParallelMatching.this.global.Symbol" id="550040">s</a>: <a href="../symtab/Symbols.scala.html#26127" title="ParallelMatching.this.global.Symbol">Symbol</a>): <span title="scala.collection.Set[ParallelMatching.this.global.Symbol]">Set</span>[Symbol]  =
        <span title="scala.collection.Set[ParallelMatching.this.global.Symbol]" class="keyword">if</span> (<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">s</a> hasFlag <span title="Long(1024L)">SEALED</span>) <a href="#550040" title="ParallelMatching.this.global.Symbol">s</a>.<a href="../symtab/Symbols.scala.html#27080" title="(f: (ParallelMatching.this.global.Symbol) =&gt; Traversable[ParallelMatching.this.global.Symbol])(implicit bf: scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Symbol,scala.collection.Set[ParallelMatching.this.global.Symbol],scala.collection.immutable.Set[ParallelMatching.this.global.Symbol]])scala.collection.Set[ParallelMatching.this.global.Symbol]">children</a> <a title="scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Symbol,scala.collection.immutable.Set[ParallelMatching.this.global.Symbol],scala.collection.immutable.Set#Coll]" id="7544">flatMap</a> <a href="#81127" title="(s: ParallelMatching.this.global.Symbol)scala.collection.Set[ParallelMatching.this.global.Symbol]">countSymbol</a>
        <span class="keyword">else</span> <a href="../symtab/Symbols.scala.html#26119" title="=&gt; scala.collection.immutable.Set[ParallelMatching.this.global.Symbol]">emptySymbolSet</a>

      <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])]" id="81129">setsToCombine</a>: <span title="List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])]">List</span>[(Int, Set[Symbol])] =
        <span class="keyword">for</span> ((<a title="ParallelMatching.this.global.Symbol" id="550316">sym</a>, <a title="Int" id="550317">i</a>) &lt;- <a href="#540072" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>.<a href="#550277" title="(f: ((ParallelMatching.this.global.Symbol, Int)) =&gt; (Int, scala.collection.Set[ParallelMatching.this.global.Symbol]))(implicit bf: scala.collection.generic.BuilderFactory[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol]),List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])],List[(ParallelMatching.this.global.Symbol, Int)]])List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])]">zipWithIndex</a> ; <span class="keyword">if</span> <a href="#81125" title="(s: ParallelMatching.this.global.Symbol)Boolean">toUse</a>(<a href="#550316" title="ParallelMatching.this.global.Symbol">sym</a>)) <span class="keyword">yield</span> {
          <a href="../symtab/Symbols.scala.html#26994" title="(mask: Long)sym.type">sym</a> resetFlag <span title="Long(4096L)">MUTABLE</span>
          <span title="(_1: Int,_2: scala.collection.Set[ParallelMatching.this.global.Symbol])(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])">(</span><a href="#550317" title="Int">i</a>, <a href="#81128" title="(s: ParallelMatching.this.global.Symbol)scala.collection.Set[ParallelMatching.this.global.Symbol]">candidates</a>(<a href="#550316" title="ParallelMatching.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; ParallelMatching.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; ParallelMatching.this.global.Symbol">typeSymbol</a>))
        }

      // computes cartesian product, keeps indices available    
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(colcom: List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])])List[List[MatchMatrix.this.Combo]]" id="81130">combine</a>(<a title="List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])]" id="550360">colcom</a>: <span title="List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])]">List</span>[(Int, Set[Symbol])]): <span title="List[List[MatchMatrix.this.Combo]]">List</span>[List[Combo]] = <a href="#550360" title="List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])]">colcom</a> <span title="List[List[MatchMatrix.this.Combo]]" class="keyword">match</span> {
        <span title="scala.collection.immutable.Nil.type" class="keyword">case</span> <span title="object Nil">Nil</span>              =&gt; <span title="object Nil">Nil</span>
        <span title="List[List[MatchMatrix.this.Combo]]" class="keyword">case</span> (<a title="Int" id="550368">i</a>, <a title="scala.collection.Set[ParallelMatching.this.global.Symbol]" id="550369">syms</a>) :: <span title="object Nil">Nil</span> =&gt; <a href="#550369" title="scala.collection.Set[ParallelMatching.this.global.Symbol]">syms</a>.<span title="(f: (ParallelMatching.this.global.Symbol) =&gt; List[MatchMatrix.this.Combo])(implicit bf: scala.collection.generic.BuilderFactory[List[MatchMatrix.this.Combo],List[List[MatchMatrix.this.Combo]],List[ParallelMatching.this.global.Symbol]])List[List[MatchMatrix.this.Combo]]">toList</span> <span title="scala.collection.generic.BuilderFactory[List[MatchMatrix.this.Combo],List[List[MatchMatrix.this.Combo]],List#Coll]">map</span> (<a title="ParallelMatching.this.global.Symbol" id="550382">s</a> =&gt; <span title="(xs: MatchMatrix.this.Combo*)List[MatchMatrix.this.Combo]">List</span>(<a href="#549703" title="(index: Int,sym: ParallelMatching.this.global.Symbol)MatchMatrix.this.Combo">Combo</a>(<a href="#550368" title="Int">i</a>, <a href="#550382" title="ParallelMatching.this.global.Symbol">s</a>)))
        <span title="List[List[MatchMatrix.this.Combo]]" class="keyword">case</span> (<a title="Int" id="550440">i</a>, <a title="scala.collection.Set[ParallelMatching.this.global.Symbol]" id="550441">syms</a>) :: <a title="List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])]" id="550444">cs</a>  =&gt; <span class="keyword">for</span> (<a title="ParallelMatching.this.global.Symbol" id="550455">s</a> &lt;- <a href="#550441" title="scala.collection.Set[ParallelMatching.this.global.Symbol]">syms</a>.<span title="(f: (ParallelMatching.this.global.Symbol) =&gt; Traversable[List[MatchMatrix.this.Combo]])(implicit bf: scala.collection.generic.BuilderFactory[List[MatchMatrix.this.Combo],List[List[MatchMatrix.this.Combo]],List[ParallelMatching.this.global.Symbol]])List[List[MatchMatrix.this.Combo]]">toList</span>; <a title="List[MatchMatrix.this.Combo]" id="550466">rest</a> &lt;- <a href="#81130" title="(colcom: List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])])List[List[MatchMatrix.this.Combo]]">combine</a><span title="(f: (List[MatchMatrix.this.Combo]) =&gt; List[MatchMatrix.this.Combo])(implicit bf: scala.collection.generic.BuilderFactory[List[MatchMatrix.this.Combo],List[List[MatchMatrix.this.Combo]],List[List[MatchMatrix.this.Combo]]])List[List[MatchMatrix.this.Combo]]">(</span><a href="#550444" title="List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])]">cs</a>)) <span class="keyword">yield</span> <a href="#549703" title="(index: Int,sym: ParallelMatching.this.global.Symbol)MatchMatrix.this.Combo">Combo</a>(<a href="#550440" title="Int">i</a>, <a href="#550455" title="ParallelMatching.this.global.Symbol">s</a>) <a href="#550467" title="MatchMatrix.this.Combo">::</a> <a href="#550466" title="(x: MatchMatrix.this.Combo)List[MatchMatrix.this.Combo]">rest</a>
      }

      /*   internal representation is (tvars:List[Symbol], rows:List[Row])
       *   
       *         tmp1       tmp_m
       */
      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()MatchMatrix.this.RuleApplication" id="81131">applyRule</a>(): <a href="#81067" title="MatchMatrix.this.RuleApplication">RuleApplication</a> = {
        <span class="keyword">def</span> <a title="[T](xs: List[T],n: Int)List[T]" id="550575">dropIndex</a>[<a title="&gt;: Nothing &lt;: Any" id="550577">T</a>](<a title="List[T]" id="550596">xs</a>: <span title="List[T]">List</span>[T], <a title="Int" id="550597">n</a>: <span title="Int">Int</span>) = (<a href="#550596" title="(n: Int)List[T]" id="24284">xs</a> take <a href="#550597" title="Int">n</a>) <a href="#550598" title="List[T]">:::</a> <span title="(prefix: List[T])List[T]">(</span><a href="#550596" title="(n: Int)List[T]" id="24286">xs</a> drop (<a href="#550597" title="(x$1: Int)Int">n</a> + <span title="Int(1)" class="int">1</span>))   
           
        <span class="keyword">lazy</span> <span class="keyword">val</span> Row<a href="#550581" title="(List[ParallelMatching.this.global.Tree], ParallelMatching.this.Bindings, MatchMatrix.this.Guard, Int)">(</a><a href="#550578" title="List[ParallelMatching.this.global.Tree]" id="550581">pats</a>, <a href="#550578" title="ParallelMatching.this.Bindings" id="550583">subst</a>, <a href="#550578" title="MatchMatrix.this.Guard" id="550585">guard</a>, <a href="#550578" title="Int" id="550587">index</a>) = <a href="#540073" title="=&gt; List[MatchMatrix.this.Row]">rows</a>.<span title="=&gt; MatchMatrix.this.Row">head</span>
        <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="MatchMatrix.this.Rep" id="550589">guardedRest</a>        = <span title="MatchMatrix.this.Rep" class="keyword">if</span> (<a href="#550584" title="=&gt; MatchMatrix.this.Guard">guard</a>.<a href="#536398" title="=&gt; Boolean">isEmpty</a>) <span title="Null(null)" class="keyword">null</span> <span class="keyword">else</span> <a href="#81053" title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">make</a>(<a href="#540072" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#540073" title="=&gt; List[MatchMatrix.this.Row]">rows</a>.<span title="=&gt; List[MatchMatrix.this.Row]">tail</span>)
        <span class="keyword">lazy</span> <span class="keyword">val</span> <a href="#550593" title="(List[ParallelMatching.this.global.Tree], List[ParallelMatching.this.global.Tree])">(</a><a href="#550590" title="List[ParallelMatching.this.global.Tree]" id="550593">defaults</a>, <a href="#550590" title="List[ParallelMatching.this.global.Tree]" id="550595">others</a>) = <a href="#550580" title="(p: (ParallelMatching.this.global.Tree) =&gt; Boolean)(List[ParallelMatching.this.global.Tree], List[ParallelMatching.this.global.Tree])">pats</a> <span title="(List[ParallelMatching.this.global.Tree], List[ParallelMatching.this.global.Tree]) @unchecked">span</span> (<a title="ParallelMatching.this.global.Tree" id="550664">p</a> =&gt; <a href="#79296" title="(t: ParallelMatching.this.global.Tree)Boolean">isDefaultPattern</a>(<a href="../ast/TreeDSL.scala.html#42488" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#550664" title="ParallelMatching.this.global.Tree">p</a>)))
        
        <span title="MatchMatrix.this.RuleApplication" class="keyword">if</span> (<a href="#540073" title="=&gt; List[MatchMatrix.this.Row]">rows</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#541744" title="()MatchMatrix.this.ErrorRule">ErrorRule</a>()
        <span class="keyword">else</span> <a href="#550594" title="=&gt; List[ParallelMatching.this.global.Tree]">others</a> <span title="MatchMatrix.this.RuleApplication" class="keyword">match</span> {
          /** top-most rows contains only variables/wildcards */
          <span title="MatchMatrix.this.VariableRule" class="keyword">case</span> <span title="object Nil">Nil</span>          =&gt;
            <span class="keyword">val</span> <a title="ParallelMatching.this.Bindings" id="550691">binding</a> = (<a href="#550592" title="(f: (ParallelMatching.this.global.Tree) =&gt; List[ParallelMatching.this.global.Symbol])(implicit bf: scala.collection.generic.BuilderFactory[List[ParallelMatching.this.global.Symbol],List[List[ParallelMatching.this.global.Symbol]],List[ParallelMatching.this.global.Tree]])List[List[ParallelMatching.this.global.Symbol]]">defaults</a> <span title="(that: Iterable[ParallelMatching.this.global.Symbol])(implicit bf: scala.collection.generic.BuilderFactory[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Symbol),List[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Symbol)],List[List[ParallelMatching.this.global.Symbol]]])List[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Symbol)]">map</span> (<a href="#81152" title="implicit scala.tools.nsc.matching.ParallelMatching.Implicits.mkPattern : (t: ParallelMatching.this.global.Tree)ParallelMatching.this.Pattern">_</a>.<a href="#535767" title="=&gt; List[ParallelMatching.this.global.Symbol]">boundVariables</a>) <span title="scala.collection.generic.BuilderFactory[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Symbol),List[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Symbol)],List#Coll]">zip</span> <a href="#540072" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>) .
              <span title="(z: ParallelMatching.this.Bindings)(f: (ParallelMatching.this.Bindings, (List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Symbol)) =&gt; ParallelMatching.this.Bindings)ParallelMatching.this.Bindings">foldLeft</span>(<a href="#550582" title="=&gt; ParallelMatching.this.Bindings">subst</a>)((<a title="ParallelMatching.this.Bindings" id="550897">b</a>, <a title="(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Symbol)" id="550898">pair</a>) =&gt; <a href="#550897" title="ParallelMatching.this.Bindings">b</a>.<a href="PatternNodes.scala.html#536838" title="(vs: Iterable[ParallelMatching.this.global.Symbol],tvar: ParallelMatching.this.global.Symbol)ParallelMatching.this.Bindings">add</a>(<a href="#550898" title="(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Symbol)">pair</a>.<span title="=&gt; List[ParallelMatching.this.global.Symbol]">_1</span>, <a href="#550898" title="(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Symbol)">pair</a>.<span title="=&gt; ParallelMatching.this.global.Symbol">_2</span>))
              
            <a href="#541871" title="(subst: ParallelMatching.this.Bindings,guard: MatchMatrix.this.Guard,guardedRest: MatchMatrix.this.Rep,bx: Int)MatchMatrix.this.VariableRule">VariableRule</a>(<a href="#550691" title="ParallelMatching.this.Bindings">binding</a>, <a href="#550584" title="=&gt; MatchMatrix.this.Guard">guard</a>, <a href="#550588" title="=&gt; MatchMatrix.this.Rep">guardedRest</a>, <a href="#550586" title="=&gt; Int">index</a>)

          /** cut out the column (px) containing the non-default pattern. */
          <span title="MatchMatrix.this.RuleApplication" class="keyword">case</span> (<a title="ParallelMatching.this.global.Tree" id="550936">rpat</a> @ <a href="PatternNodes.scala.html#536059" title="(x: ParallelMatching.this.global.Tree)Option[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Tree)]">Strip</a>(<a title="List[ParallelMatching.this.global.Symbol]" id="550942">vs</a>, _)) :: _ =&gt;
            <span class="keyword">val</span> <a title="Int" id="550946">px</a>        = <a href="#550592" title="=&gt; List[ParallelMatching.this.global.Tree]">defaults</a>.<span title="=&gt; Int">size</span>
            <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Tree]" id="550947">column</a>    = <a href="#550936" title="ParallelMatching.this.global.Tree">rpat</a> <a href="#550950" title="ParallelMatching.this.global.Tree">::</a> <span title="(x: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">(</span><a href="#540073" title="=&gt; List[MatchMatrix.this.Row]">rows</a>.<span title="(f: (MatchMatrix.this.Row) =&gt; ParallelMatching.this.global.Tree)(implicit bf: scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Tree,List[ParallelMatching.this.global.Tree],List[MatchMatrix.this.Row]])List[ParallelMatching.this.global.Tree]">tail</span> <span title="scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Tree,List[ParallelMatching.this.global.Tree],List#Coll]">map</span> (<a href="#539975" title="(n: Int)ParallelMatching.this.global.Tree">_</a> pat <a href="#550946" title="Int">px</a>))
            <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Symbol]" id="550948">restTemp</a>  = <a href="#550575" title="(xs: List[ParallelMatching.this.global.Symbol],n: Int)List[ParallelMatching.this.global.Symbol]">dropIndex</a>(<a href="#540072" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#550946" title="Int">px</a>)
            <span class="keyword">val</span> <a title="List[MatchMatrix.this.Row]" id="550949">restRows</a>  = <a href="#540073" title="(f: (MatchMatrix.this.Row) =&gt; MatchMatrix.this.Row)(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[MatchMatrix.this.Row]])List[MatchMatrix.this.Row]">rows</a> <span title="scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List#Coll]">map</span> (<a title="MatchMatrix.this.Row" id="551073">r</a> =&gt; <a href="#539948" title="(hs: List[ParallelMatching.this.global.Tree])MatchMatrix.this.Row">r</a> replace <a href="#550575" title="(xs: List[ParallelMatching.this.global.Tree],n: Int)List[ParallelMatching.this.global.Tree]">dropIndex</a>(<a href="#551073" title="MatchMatrix.this.Row">r</a>.<a href="#539975" title="=&gt; List[ParallelMatching.this.global.Tree]">pat</a>, <a href="#550946" title="Int">px</a>))
        
            <a href="#81066" title="(scrut: MatchMatrix.this.Scrutinee,column: List[ParallelMatching.this.global.Tree],rest: MatchMatrix.this.Rep)MatchMatrix.this.RuleApplication">MixtureRule</a>(<span title="MatchMatrix.this.Scrutinee" class="keyword">new</span> <a href="#540676" title="MatchMatrix.this.Scrutinee">Scrutinee</a>(<a href="#540072" title="(n: Int)ParallelMatching.this.global.Symbol">tvars</a>(<a href="#550946" title="Int">px</a>)), <a href="#550947" title="List[ParallelMatching.this.global.Tree]">column</a>, <a href="#81053" title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">make</a>(<a href="#550948" title="List[ParallelMatching.this.global.Symbol]">restTemp</a>, <a href="#550949" title="List[MatchMatrix.this.Row]">restRows</a>))
        }
      }
      
      <span class="keyword">def</span> <a title="=&gt; Rep.this.type" id="81132">checkExhaustive</a>: <span class="keyword">this</span>.<span class="keyword">type</span> = {
        <span class="keyword">val</span> <a title="List[List[MatchMatrix.this.Combo]]" id="551180">allcomb</a> = <a href="#81130" title="(colcom: List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])])List[List[MatchMatrix.this.Combo]]">combine</a>(<a href="#81129" title="=&gt; List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])]">setsToCombine</a>)
        <span title="Unit" class="keyword">if</span> (<a href="#551180" title="(p: (List[MatchMatrix.this.Combo]) =&gt; Boolean)Boolean">allcomb</a> forall (<a title="List[MatchMatrix.this.Combo]" id="551190">combo</a> =&gt; <a href="#540073" title="(p: (MatchMatrix.this.Row) =&gt; Boolean)Boolean">rows</a> exists (<a href="#539953" title="(combos: List[MatchMatrix.this.Combo])Boolean">_</a> covers <a href="#551190" title="List[MatchMatrix.this.Combo]">combo</a>)))
          <span title="Nothing" class="keyword">return</span> <a href="#540070" title="Rep.this.type" class="keyword">this</a>

        // if we reach here, patterns were not exhaustive
        <span class="keyword">def</span> <a title="(xs: List[MatchMatrix.this.Combo],i: Int)String" id="551181">mkPad</a>(<a title="List[MatchMatrix.this.Combo]" id="551202">xs</a>: <span title="List[MatchMatrix.this.Combo]">List</span>[Combo], <a title="Int" id="551203">i</a>: <span title="Int">Int</span>): <span title="String">String</span> = <a href="#551202" title="List[MatchMatrix.this.Combo]">xs</a> <span title="String" class="keyword">match</span> {
          <span title="String" class="keyword">case</span> <span title="object Nil">Nil</span>                    =&gt; <a href="#81140" title="(s: String)String">pad</a>(<span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span>)
          <span title="String" class="keyword">case</span> Combo(<a title="Int" id="551219">j</a>, <a title="ParallelMatching.this.global.Symbol" id="551220">sym</a>) :: <a title="List[MatchMatrix.this.Combo]" id="551223">rest</a>  =&gt; <span title="String" class="keyword">if</span> (<a href="#551219" title="(x$1: Int)Boolean">j</a> == <a href="#551203" title="Int">i</a>) <a href="#81140" title="(s: String)String">pad</a>(<a href="#551220" title="ParallelMatching.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26988" title="=&gt; ParallelMatching.this.global.Name">name</a>.<a href="../symtab/Names.scala.html#28205" title="()String">toString</a>) <span class="keyword">else</span> <a href="#551181" title="(xs: List[MatchMatrix.this.Combo],i: Int)String">mkPad</a>(<a href="#551223" title="List[MatchMatrix.this.Combo]">rest</a>, <a href="#551203" title="Int">i</a>)
        }
        <span class="keyword">def</span> <a title="(open: List[MatchMatrix.this.Combo])java.lang.String" id="551182">mkMissingStr</a>(<a title="List[MatchMatrix.this.Combo]" id="551244">open</a>: <span title="List[MatchMatrix.this.Combo]">List</span>[Combo]) =
          <span title="(x$1: Any)java.lang.String" class="string">&quot;missing combination &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#540072" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>.<span title="=&gt; Range">indices</span>.<a title="(f: (Int) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,scala.collection.generic.VectorView[String,Vector[_]],scala.collection.generic.VectorView[Int,scala.collection.immutable.Vector[Int]]])scala.collection.generic.VectorView[String,Vector[_]]" id="56849">map</a><a title="scala.collection.generic.BuilderFactory[String,scala.collection.generic.VectorView[String,Vector[_]],scala.collection.generic.VectorView#Coll]" id="23479">(</a><a href="#551181" title="(xs: List[MatchMatrix.this.Combo],i: Int)String">mkPad</a>(<a href="#551244" title="List[MatchMatrix.this.Combo]">open</a>, <a href="#551260" title="Int">_</a>)).<span title="=&gt; String">mkString</span> + <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>

        <span class="keyword">val</span> <a title="List[java.lang.String]" id="551183">missingCombos</a> = <a href="#551180" title="(p: (List[MatchMatrix.this.Combo]) =&gt; Boolean)List[List[MatchMatrix.this.Combo]]">allcomb</a> <span title="(f: (List[MatchMatrix.this.Combo]) =&gt; java.lang.String)(implicit bf: scala.collection.generic.BuilderFactory[java.lang.String,List[java.lang.String],List[List[MatchMatrix.this.Combo]]])List[java.lang.String]">filter</span> (<a title="List[MatchMatrix.this.Combo]" id="551411">open</a> =&gt; <a href="#540073" title="=&gt; List[MatchMatrix.this.Row]">rows</a>.<span title="(p: (MatchMatrix.this.Row) =&gt; Boolean)Boolean">forall</span>(<span title="=&gt; Boolean">!</span><a href="#551416" title="MatchMatrix.this.Row">_</a>.<a href="#539953" title="(combos: List[MatchMatrix.this.Combo])Boolean">covers</a>(<a href="#551411" title="List[MatchMatrix.this.Combo]">open</a>))) <span title="scala.collection.generic.BuilderFactory[java.lang.String,List[java.lang.String],List#Coll]">map</span> <a href="#551182" title="(open: List[MatchMatrix.this.Combo])java.lang.String">mkMissingStr</a>
        <a href="TransMatcher.scala.html#79166" title="=&gt; ParallelMatching.this.global.CompilationUnit">cunit</a>.<a href="../CompilationUnits.scala.html#45456" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">warning</a>(<a href="#540072" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>.<span title="=&gt; ParallelMatching.this.global.Symbol">head</span>.<a href="../symtab/Symbols.scala.html#26847" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;match is not exhaustive!\n&quot;</span> + <a href="#551183" title="List[java.lang.String]">missingCombos</a>.<span title="=&gt; String">mkString</span>)
        <a href="#540070" title="Rep.this.type" class="keyword">this</a>
      }

      // a fancy toString method for debugging
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="81133">toString</a>() = {
        <span class="keyword">val</span> <a title="String" id="551523">tempStr</a> = (<a href="#540072" title="(f: (ParallelMatching.this.global.Symbol) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[ParallelMatching.this.global.Symbol]])List[String]">tvars</a> <span title="scala.collection.generic.BuilderFactory[String,List[String],List#Coll]">map</span> (<a title="ParallelMatching.this.global.Symbol" id="551534">t</a> =&gt; <a href="#81139" title="(s: Any)String">pad</a>(<a href="#551534" title="ParallelMatching.this.global.Symbol">t</a>.<a href="../symtab/Symbols.scala.html#26988" title="=&gt; ParallelMatching.this.global.Name">name</a>))).<span title="=&gt; String">mkString</span>
        <span class="keyword">val</span> <a title="java.lang.String" id="551524">underlines</a> = <a href="#551523" title="String">tempStr</a>.<a title="(x$1: java.lang.String,x$2: java.lang.String)java.lang.String" id="7034">replaceAll</a>(<span title="java.lang.String(&quot;\S&quot;)" class="string">&quot;&quot;&quot;\S&quot;&quot;&quot;</span>, <span title="java.lang.String(&quot;-&quot;)" class="string">&quot;-&quot;</span>)
        <span class="keyword">val</span> <a title="String" id="551525">rowStr</a> = (
          <span class="keyword">for</span> (Row(<a title="List[ParallelMatching.this.global.Tree]" id="551648">pat</a>, <a title="ParallelMatching.this.Bindings" id="551649">subst</a>, <a title="MatchMatrix.this.Guard" id="551650">guard</a>, <a title="Int" id="551651">bx</a>) &lt;- <a href="#540073" title="(f: (MatchMatrix.this.Row) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[MatchMatrix.this.Row]])List[String]">rows</a>) <span class="keyword">yield</span> {
            <span class="keyword">val</span> <a title="String" id="551654">extraStr</a>: <span title="String">String</span> = <a href="#551650" title="MatchMatrix.this.Guard">guard</a>.<a href="#536400" title="(x$1: Any)java.lang.String">toString</a> + <a href="#551649" title="ParallelMatching.this.Bindings">subst</a>
            <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;%s %s\n&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#551648" title="(f: (ParallelMatching.this.global.Tree) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[ParallelMatching.this.global.Tree]])List[String]">pat</a> <span title="scala.collection.generic.BuilderFactory[String,List[String],List#Coll]">map</span> <a href="#81139" title="(s: Any)String">pad</a> <span title="=&gt; String">mkString</span>, <a href="#551654" title="String">extraStr</a>)
          }
        ) <span title="=&gt; String">mkString</span>

        <span title="java.lang.String" class="keyword">if</span> (<a href="#540072" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>.<span title="(x$1: Int)Boolean">size</span> == <span title="Int(0)" class="int">0</span>) <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;Rep(%dx%d)&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#540072" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>.<span title="=&gt; Int">size</span>, <a href="#540073" title="=&gt; List[MatchMatrix.this.Row]">rows</a>.<span title="=&gt; Int">size</span>)
        <span class="keyword">else</span> <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;Rep(%dx%d)\n%s\n%s\n%s&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#540072" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>.<span title="=&gt; Int">size</span>, <a href="#540073" title="=&gt; List[MatchMatrix.this.Row]">rows</a>.<span title="=&gt; Int">size</span>, <a href="#551523" title="String">tempStr</a>, <a href="#551524" title="java.lang.String">underlines</a>, <a href="#551525" title="String">rowStr</a>)
      }

      <span class="keyword">private</span> <span class="keyword">val</span> <a title="Int" id="81134">NPAD</a> = <span title="Int(15)" class="int">15</span>

      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Type)String" id="81136">typeToString</a>(<a title="ParallelMatching.this.global.Type" id="551912">t</a>: <a href="../symtab/Types.scala.html#26205" title="ParallelMatching.this.global.Type">Type</a>): <span title="String">String</span> = <a href="#551912" title="ParallelMatching.this.global.Type">t</a> <span title="String" class="keyword">match</span> {
        <span title="java.lang.String(&quot;x&quot;)" class="keyword">case</span> <a href="../symtab/Types.scala.html#26224" title="object ParallelMatching.this.global.NoType">NoType</a> =&gt; <span title="java.lang.String(&quot;x&quot;)" class="string">&quot;x&quot;</span>
        <span title="String" class="keyword">case</span> <a title="ParallelMatching.this.global.Type" id="551914">x</a>      =&gt; <a href="#551914" title="ParallelMatching.this.global.Type">x</a>.<a href="../symtab/Types.scala.html#30267" title="()String">toString</a>
      }
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: ParallelMatching.this.global.Symbol)String" id="81137">symbolToString</a>(<a title="ParallelMatching.this.global.Symbol" id="551917">s</a>: <a href="../symtab/Symbols.scala.html#26127" title="ParallelMatching.this.global.Symbol">Symbol</a>): <span title="String">String</span> = <a href="#551917" title="ParallelMatching.this.global.Symbol">s</a> <span title="String" class="keyword">match</span> {
        <span title="String" class="keyword">case</span> <a title="ParallelMatching.this.global.Symbol" id="551919">x</a>  =&gt; <a href="#551919" title="ParallelMatching.this.global.Symbol">x</a>.<a href="../symtab/Symbols.scala.html#27091" title="()String">toString</a>
      }
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)String" id="81138">treeToString</a>(<a title="ParallelMatching.this.global.Tree" id="551922">t</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>): <span title="String">String</span> = <a href="../ast/TreeDSL.scala.html#42488" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#551922" title="ParallelMatching.this.global.Tree">t</a>) <span title="String" class="keyword">match</span> {
        <span title="java.lang.String(&quot;?&quot;)" class="keyword">case</span> <a href="../ast/Trees.scala.html#26602" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a>            =&gt; <span title="java.lang.String(&quot;?&quot;)" class="string">&quot;?&quot;</span>
        <span title="java.lang.String(&quot;_&quot;)" class="keyword">case</span> <a href="../ast/TreeDSL.scala.html#535946" title="(other: Any)Boolean">WILD</a>()               =&gt; <span title="java.lang.String(&quot;_&quot;)" class="string">&quot;_&quot;</span>
        <span title="String" class="keyword">case</span> Literal(Constant(<a title="Any" id="551934">x</a>)) =&gt; <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;LIT(%s)&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#551934" title="Any">x</a>)
        <span title="String" class="keyword">case</span> Apply(<a title="ParallelMatching.this.global.Tree" id="551962">fn</a>, <a title="List[ParallelMatching.this.global.Tree]" id="551963">args</a>)      =&gt; <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;%s(%s)&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#81138" title="(t: ParallelMatching.this.global.Tree)String">treeToString</a>(<a href="#551962" title="ParallelMatching.this.global.Tree">fn</a>), <a href="#551963" title="(f: (ParallelMatching.this.global.Tree) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[ParallelMatching.this.global.Tree]])List[String]">args</a> <span title="(sep: String)String">map</span> <a href="#81138" title="(t: ParallelMatching.this.global.Tree)String">treeToString</a> mkString <span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span>)
        <span title="String" class="keyword">case</span> <a title="ParallelMatching.this.global.TypeTree" id="552082">x</a>: <a href="../ast/Trees.scala.html#26741" title="ParallelMatching.this.global.TypeTree">TypeTree</a>          =&gt; <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;TT(%s)&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#81137" title="(s: ParallelMatching.this.global.Symbol)String">symbolToString</a>(<a href="#552082" title="ParallelMatching.this.global.TypeTree">x</a>.<a href="../ast/Trees.scala.html#50459" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a>))
        <span title="String" class="keyword">case</span> Typed(<a title="ParallelMatching.this.global.Tree" id="552108">expr</a>, <a title="ParallelMatching.this.global.Tree" id="552109">tpt</a>)     =&gt; <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;%s: %s&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#81138" title="(t: ParallelMatching.this.global.Tree)String">treeToString</a>(<a href="#552108" title="ParallelMatching.this.global.Tree">expr</a>), <a href="#81138" title="(t: ParallelMatching.this.global.Tree)String">treeToString</a>(<a href="#552109" title="ParallelMatching.this.global.Tree">tpt</a>))
        <span title="java.lang.String" class="keyword">case</span> <a title="ParallelMatching.this.global.Tree" id="552137">x</a>                    =&gt;  <a href="#552137" title="ParallelMatching.this.global.Tree">x</a>.<a href="../ast/Trees.scala.html#29381" title="(x$1: Any)java.lang.String">toString</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; (&quot;)" class="string">&quot; (&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#552137" title="ParallelMatching.this.global.Tree">x</a>.<span title="()java.lang.Class[_]">getClass</span> + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
      }

      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: Any)String" id="81139">pad</a>(<a title="Any" id="551209">s</a>: <a title="Any" id="49">Any</a>): <span title="String">String</span> = <a href="#81140" title="(s: String)String">pad</a>(<a href="#551209" title="Any">s</a> <span title="String" class="keyword">match</span> {
        <span title="String" class="keyword">case</span> <a title="ParallelMatching.this.global.Tree" id="552154">x</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>    =&gt; <a href="#81138" title="(t: ParallelMatching.this.global.Tree)String">treeToString</a>(<a href="#552154" title="ParallelMatching.this.global.Tree">x</a>)
        // case x: AnyRef  =&gt; x.toString + &quot; (&quot; + x.getClass + &quot;)&quot;
        <span title="java.lang.String" class="keyword">case</span> <a title="Any" id="552157">x</a>                  =&gt; <a href="#552157" title="Any">x</a>.<span title="()java.lang.String">toString</span>
      })
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: String)String" id="81140">pad</a>(<a title="String" id="551207">s</a>: <span title="String">String</span>): <span title="String">String</span> = <span title="(args: Any*)String" class="string">&quot;%%%ds&quot;</span> <span title="(args: Any*)String">format</span> (<a href="#81134" title="(x$1: Int)Int">NPAD</a> - <span title="Int(1)" class="int">1</span>) format <a href="#551207" title="String">s</a>
    }
  
    /** Expands the patterns recursively. */
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(roots: List[ParallelMatching.this.global.Symbol],cases: List[ParallelMatching.this.global.Tree])(List[MatchMatrix.this.Row], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])" id="81105">expand</a>(<a title="List[ParallelMatching.this.global.Symbol]" id="536387">roots</a>: <span title="List[ParallelMatching.this.global.Symbol]">List</span>[Symbol], <a title="List[ParallelMatching.this.global.Tree]" id="536388">cases</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree]): <span title="(List[MatchMatrix.this.Row], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])">(</span>List[Row], List[FinalState], List[List[Symbol]]) = {
      <span class="keyword">val</span> <a title="(List[Option[MatchMatrix.this.Row]], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])" id="552282">res</a> = <a href="MatchUtil.scala.html#79261" title="(xs: List[(Option[MatchMatrix.this.Row], MatchMatrix.this.FinalState, List[ParallelMatching.this.global.Symbol])])(List[Option[MatchMatrix.this.Row]], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])">unzip3</a>(
        <span class="keyword">for</span> ((CaseDef(<a title="ParallelMatching.this.global.Tree" id="552408">pat</a>, <a title="ParallelMatching.this.global.Tree" id="552409">guard</a>, <a title="ParallelMatching.this.global.Tree" id="552410">body</a>), <a title="Int" id="552413">index</a>) &lt;- <a href="#536388" title="List[ParallelMatching.this.global.Tree]">cases</a>.<a href="#552370" title="(f: ((ParallelMatching.this.global.Tree, Int)) =&gt; (Option[MatchMatrix.this.Row], MatchMatrix.this.FinalState, List[ParallelMatching.this.global.Symbol]))(implicit bf: scala.collection.generic.BuilderFactory[(Option[MatchMatrix.this.Row], MatchMatrix.this.FinalState, List[ParallelMatching.this.global.Symbol]),List[(Option[MatchMatrix.this.Row], MatchMatrix.this.FinalState, List[ParallelMatching.this.global.Symbol])],List[(ParallelMatching.this.global.Tree, Int)]])List[(Option[MatchMatrix.this.Row], MatchMatrix.this.FinalState, List[ParallelMatching.this.global.Symbol])]">zipWithIndex</a>) <span class="keyword">yield</span> {
          <span class="keyword">def</span> <a title="(ps: List[ParallelMatching.this.global.Tree])MatchMatrix.this.Row" id="552416">mkRow</a>(<a title="List[ParallelMatching.this.global.Tree]" id="552418">ps</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree]) = <a href="#539973" title="(pat: List[ParallelMatching.this.global.Tree],subst: ParallelMatching.this.Bindings,guard: MatchMatrix.this.Guard,bx: Int)MatchMatrix.this.Row">Row</a>(<a href="#552418" title="List[ParallelMatching.this.global.Tree]">ps</a>, <a href="PatternNodes.scala.html#79255" title="=&gt; ParallelMatching.this.Bindings">NoBinding</a>, <a href="#536393" title="(tree: ParallelMatching.this.global.Tree)MatchMatrix.this.Guard">Guard</a>(<a href="#552409" title="ParallelMatching.this.global.Tree">guard</a>), <a href="#552413" title="Int">index</a>)
          
          <span class="keyword">def</span> <a title="=&gt; Option[MatchMatrix.this.Row]" id="552417">rowForPat</a>: <span title="Option[MatchMatrix.this.Row]">Option</span>[Row] = <a href="../ast/TreeDSL.scala.html#42480" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,MatchMatrix.this.Row])Option[MatchMatrix.this.Row]">condOpt</a>(<a href="#552408" title="ParallelMatching.this.global.Tree">pat</a>) <a href="#552454" title="MatchMatrix.this.Row">{</a>
            <span title="MatchMatrix.this.Row" class="keyword">case</span> _ <span class="keyword">if</span> <a href="#536387" title="List[ParallelMatching.this.global.Symbol]">roots</a>.<a title="(x$1: Int)Boolean" id="2958">length</a> &lt;= <span title="Int(1)" class="int">1</span> =&gt; <a href="#552416" title="(ps: List[ParallelMatching.this.global.Tree])MatchMatrix.this.Row">mkRow</a>(<span title="(xs: ParallelMatching.this.global.Tree*)List[ParallelMatching.this.global.Tree]">List</span>(<a href="#552408" title="ParallelMatching.this.global.Tree">pat</a>))
            <span title="MatchMatrix.this.Row" class="keyword">case</span> Apply(<a title="ParallelMatching.this.global.Tree" id="552474">fn</a>, <a title="List[ParallelMatching.this.global.Tree]" id="552475">args</a>)        =&gt; <a href="#552416" title="(ps: List[ParallelMatching.this.global.Tree])MatchMatrix.this.Row">mkRow</a>(<a href="#552475" title="List[ParallelMatching.this.global.Tree]">args</a>)
            <span title="MatchMatrix.this.Row" class="keyword">case</span> <a href="../ast/TreeDSL.scala.html#535946" title="(other: Any)Boolean">WILD</a>()                 =&gt; <a href="#552416" title="(ps: List[ParallelMatching.this.global.Tree])MatchMatrix.this.Row">mkRow</a>(<a href="PatternNodes.scala.html#79226" title="(i: Int)List[ParallelMatching.this.global.Tree]">getDummies</a>(<a href="#536387" title="List[ParallelMatching.this.global.Symbol]">roots</a>.<span title="=&gt; Int">length</span>))
          }
      
          <span title="(_1: Option[MatchMatrix.this.Row],_2: MatchMatrix.this.FinalState,_3: List[ParallelMatching.this.global.Symbol])(Option[MatchMatrix.this.Row], MatchMatrix.this.FinalState, List[ParallelMatching.this.global.Symbol])">(</span><a href="#552417" title="=&gt; Option[MatchMatrix.this.Row]">rowForPat</a>, <a href="#537788" title="(subst: ParallelMatching.this.Bindings,body: ParallelMatching.this.global.Tree)MatchMatrix.this.FinalState">FinalState</a>(<a href="PatternNodes.scala.html#79255" title="=&gt; ParallelMatching.this.Bindings">NoBinding</a>, <a href="#552410" title="ParallelMatching.this.global.Tree">body</a>), <a href="PatternNodes.scala.html#79248" title="(x: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Symbol]">definedVars</a>(<a href="#552408" title="ParallelMatching.this.global.Tree">pat</a>))
        }
      )
      
      <a href="#552282" title="(List[Option[MatchMatrix.this.Row]], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])">res</a> <span title="(List[MatchMatrix.this.Row], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])" class="keyword">match</span> { <span title="(List[MatchMatrix.this.Row], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])" class="keyword">case</span> (<a title="List[Option[MatchMatrix.this.Row]]" id="552612">rows</a>, <a title="List[MatchMatrix.this.FinalState]" id="552613">finals</a>, <a title="List[List[ParallelMatching.this.global.Symbol]]" id="552614">vars</a>) =&gt; <span title="(_1: List[MatchMatrix.this.Row],_2: List[MatchMatrix.this.FinalState],_3: List[List[ParallelMatching.this.global.Symbol]])(List[MatchMatrix.this.Row], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])">(</span><a href="#552612" title="(f: (Option[MatchMatrix.this.Row]) =&gt; Traversable[MatchMatrix.this.Row])(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[Option[MatchMatrix.this.Row]]])List[MatchMatrix.this.Row]">rows</a> <span title="scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List#Coll]">flatMap</span> (<a title="Option[MatchMatrix.this.Row]" id="552631">x</a> =&gt; <a href="#552631" title="(xo: Option[MatchMatrix.this.Row])Iterable[MatchMatrix.this.Row]">x</a>), <a href="#552613" title="List[MatchMatrix.this.FinalState]">finals</a>, <a href="#552614" title="List[List[ParallelMatching.this.global.Symbol]]">vars</a>) }
    }

    /** returns the condition in &quot;if (cond) k1 else k2&quot; 
     */
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(tpe: ParallelMatching.this.global.Type,scrut: MatchMatrix.this.Scrutinee)ParallelMatching.this.global.Tree" id="81106">condition</a>(<a title="ParallelMatching.this.global.Type" id="548633">tpe</a>: <a href="../symtab/Types.scala.html#26205" title="ParallelMatching.this.global.Type">Type</a>, <a title="MatchMatrix.this.Scrutinee" id="548634">scrut</a>: <a href="#540676" title="MatchMatrix.this.Scrutinee">Scrutinee</a>): <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a> = {
      <span title="(assertion: Boolean)Unit">assert</span>(<a href="#548634" title="MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540520" title="=&gt; Boolean">isDefined</a>)
      <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="552651">cond</a> = <a href="TransMatcher.scala.html#79376" title="(v1: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">handleOuter</a>(<a href="#81107" title="(tpe: ParallelMatching.this.global.Type,scrutTree: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">condition</a>(<a href="#548633" title="ParallelMatching.this.global.Type">tpe</a>, <a href="#548634" title="MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540519" title="=&gt; ParallelMatching.this.global.gen.global.Tree">id</a>))
    
      <span title="ParallelMatching.this.global.Tree" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="../symtab/Types.scala.html#26380" title="(patType: ParallelMatching.this.global.Type,selType: ParallelMatching.this.global.Type,currentOwner: ParallelMatching.this.global.Symbol)Boolean">needsOuterTest</a>(<a href="#548633" title="ParallelMatching.this.global.Type">tpe</a>, <a href="#548634" title="MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540516" title="=&gt; ParallelMatching.this.global.Type">tpe</a>, <a href="TransMatcher.scala.html#79380" title="=&gt; ParallelMatching.this.global.Symbol">owner</a>)) <a href="#552651" title="ParallelMatching.this.global.Tree">cond</a>
      <span class="keyword">else</span> <a href="#81108" title="(cond: ParallelMatching.this.global.Tree,tpe2test: ParallelMatching.this.global.Type,scrut: ParallelMatching.this.global.Tree,handleOuter: (ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">addOuterCondition</a>(<a href="#552651" title="ParallelMatching.this.global.Tree">cond</a>, <a href="#548633" title="ParallelMatching.this.global.Type">tpe</a>, <a href="#548634" title="MatchMatrix.this.Scrutinee">scrut</a>.<a href="#540519" title="=&gt; ParallelMatching.this.global.gen.global.Tree">id</a>, <a href="TransMatcher.scala.html#79376" title="=&gt; (ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree">handleOuter</a>)
    }

    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(tpe: ParallelMatching.this.global.Type,scrutTree: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree" id="81107">condition</a>(<a title="ParallelMatching.this.global.Type" id="548630">tpe</a>: <a href="../symtab/Types.scala.html#26205" title="ParallelMatching.this.global.Type">Type</a>, <a title="ParallelMatching.this.global.Tree" id="548631">scrutTree</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a> = {
      <span title="(assertion: Boolean)Unit">assert</span>(<span title="(x$1: Boolean)Boolean">(</span><a href="#548630" title="(x$1: AnyRef)Boolean">tpe</a> ne <a href="../symtab/Types.scala.html#26224" title="object ParallelMatching.this.global.NoType">NoType</a>) &amp;&amp; (<a href="#548631" title="ParallelMatching.this.global.Tree">scrutTree</a>.<a href="../ast/Trees.scala.html#29363" title="(x$1: AnyRef)Boolean">tpe</a> ne <a href="../symtab/Types.scala.html#26224" title="object ParallelMatching.this.global.NoType">NoType</a>))    
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="552845">useEqTest</a>         = <a href="#548630" title="ParallelMatching.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30179" title="=&gt; ParallelMatching.this.global.Symbol">termSymbol</a>.<a href="../symtab/Symbols.scala.html#26917" title="(x$1: Boolean)Boolean">isModule</a> || (<a href="#548630" title="ParallelMatching.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30190" title="(x$1: AnyRef)Boolean">prefix</a> eq <a href="../symtab/Types.scala.html#26226" title="object ParallelMatching.this.global.NoPrefix">NoPrefix</a>)

      <a href="../typechecker/Typers.scala.html#42640" title="(tree: ParallelMatching.this.global.analyzer.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typer</a> typed (<a href="#548630" title="ParallelMatching.this.global.Type">tpe</a> <span title="ParallelMatching.this.global.analyzer.global.Tree" class="keyword">match</span> {
        <span title="ParallelMatching.this.global.analyzer.global.Tree" class="keyword">case</span> <a title="ParallelMatching.this.global.ConstantType" id="552869">ct</a>: <a href="../symtab/Types.scala.html#26251" title="ParallelMatching.this.global.ConstantType">ConstantType</a> =&gt; <a href="#552869" title="ParallelMatching.this.global.ConstantType">ct</a>.<a href="../symtab/Types.scala.html#42759" title="=&gt; ParallelMatching.this.global.Constant">value</a> <span title="ParallelMatching.this.global.analyzer.global.Tree" class="keyword">match</span> {
            <span title="ParallelMatching.this.global.Apply" class="keyword">case</span> <a title="ParallelMatching.this.global.Constant" id="552870">v</a> @ Constant(<span title="Null(null)" class="keyword">null</span>) <span class="keyword">if</span> <a href="PatternNodes.scala.html#79216" title="(t: ParallelMatching.this.global.Type)Boolean">isAnyRef</a>(<a href="#548631" title="ParallelMatching.this.global.Tree">scrutTree</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; ParallelMatching.this.global.Type">tpe</a>)  =&gt; <a href="../ast/TreeDSL.scala.html#45070" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Apply">scrutTree</a> ANY_EQ <a href="../ast/TreeDSL.scala.html#42495" title="=&gt; ParallelMatching.this.global.Literal">NULL</a>
            <span title="ParallelMatching.this.global.Apply" class="keyword">case</span> <a title="ParallelMatching.this.global.Constant" id="552906">v</a>                                              =&gt; <a href="../ast/TreeDSL.scala.html#45071" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Apply">scrutTree</a> ANY_== <a href="../ast/Trees.scala.html#49342" title="(value: ParallelMatching.this.global.Constant)ParallelMatching.this.global.Literal">Literal</a>(<a href="#552906" title="ParallelMatching.this.global.Constant">v</a>)
          }
        <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> _: <a href="../symtab/Types.scala.html#26216" title="ParallelMatching.this.global.SingletonType">SingletonType</a> <span class="keyword">if</span> <a href="#552845" title="=&gt; Boolean">useEqTest</a>                      =&gt; 
          // See ticket #1503 for why both these checks are necessary.
          <a href="../ast/TreeDSL.scala.html#45068" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">(</a><a href="../ast/TreeDSL.scala.html#42533" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.gen.global.Tree">REF</a><a href="../ast/TreeDSL.scala.html#45071" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Apply">(</a><a href="#548630" title="ParallelMatching.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30179" title="=&gt; ParallelMatching.this.global.Symbol">termSymbol</a>) <a href="../ast/TreeDSL.scala.html#42538" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.TreeMethods">ANY_==</a> <a href="#548631" title="ParallelMatching.this.global.Tree">scrutTree</a>) AND (<a href="../ast/TreeDSL.scala.html#45091" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.gen.global.Tree">scrutTree</a> IS <a href="#548630" title="ParallelMatching.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30184" title="=&gt; ParallelMatching.this.global.Type">widen</a>)
          
        <span title="ParallelMatching.this.global.Apply" class="keyword">case</span> _ <span class="keyword">if</span> <a href="#548631" title="ParallelMatching.this.global.Tree">scrutTree</a>.<a href="../symtab/Types.scala.html#30235" title="(that: ParallelMatching.this.global.Type)Boolean">tpe</a> <span title="(x$1: Boolean)Boolean">&lt;:&lt;</span> <a href="#548630" title="ParallelMatching.this.global.Type">tpe</a> &amp;&amp; <a href="PatternNodes.scala.html#79216" title="(t: ParallelMatching.this.global.Type)Boolean">isAnyRef</a>(<a href="#548630" title="ParallelMatching.this.global.Type">tpe</a>)        =&gt; <a href="../ast/TreeDSL.scala.html#45074" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Apply">scrutTree</a> OBJ_!= <a href="../ast/TreeDSL.scala.html#42495" title="=&gt; ParallelMatching.this.global.Literal">NULL</a>
        <span title="ParallelMatching.this.global.gen.global.Tree" class="keyword">case</span> _                                                  =&gt; <a href="../ast/TreeDSL.scala.html#45091" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.gen.global.Tree">scrutTree</a> IS <a href="#548630" title="ParallelMatching.this.global.Type">tpe</a>
      })
    }

    /** adds a test comparing the dynamic outer to the static outer */
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(cond: ParallelMatching.this.global.Tree,tpe2test: ParallelMatching.this.global.Type,scrut: ParallelMatching.this.global.Tree,handleOuter: (ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree" id="81108">addOuterCondition</a>(<a title="ParallelMatching.this.global.Tree" id="552671">cond</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="ParallelMatching.this.global.Type" id="552672">tpe2test</a>: <a href="../symtab/Types.scala.html#26205" title="ParallelMatching.this.global.Type">Type</a>, <a title="ParallelMatching.this.global.Tree" id="552673">scrut</a>: <a href="../ast/Trees.scala.html#26593" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="(ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree" id="552674">handleOuter</a>: <span title="(ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree">TreeFunction1</span>) = {
      <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="552677">theRef</a> = <a href="#552674" title="(v1: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">handleOuter</a>(<a href="#552672" title="ParallelMatching.this.global.Type">tpe2test</a> <span title="ParallelMatching.this.global.Tree" class="keyword">match</span> {
        <span title="Nothing" class="keyword">case</span> TypeRef(<a href="../symtab/Types.scala.html#26226" title="object ParallelMatching.this.global.NoPrefix">NoPrefix</a>, _, _)          =&gt; <a href="../Global.scala.html#39077" title="(msg: String)Nothing">abort</a>(<span title="java.lang.String(&quot;assertion failed: NoPrefix&quot;)" class="string">&quot;assertion failed: NoPrefix&quot;</span>)
        <span title="ParallelMatching.this.global.gen.global.Tree" class="keyword">case</span> TypeRef(ThisType(<a title="ParallelMatching.this.global.Symbol" id="552690">clazz</a>), _, _)   =&gt; <a href="../ast/TreeDSL.scala.html#42531" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.gen.global.Tree">THIS</a>(<a href="#552690" title="ParallelMatching.this.global.Symbol">clazz</a>)
        <span title="ParallelMatching.this.global.gen.global.Tree" class="keyword">case</span> TypeRef(<a title="ParallelMatching.this.global.Type" id="552708">prefix</a>, _, _)            =&gt; <a href="../ast/TreeDSL.scala.html#42534" title="(pre: ParallelMatching.this.global.Type,sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.gen.global.Tree">REF</a>(<a href="#552708" title="ParallelMatching.this.global.Type">prefix</a>.<a href="../symtab/Types.scala.html#30190" title="=&gt; ParallelMatching.this.global.Type">prefix</a>, <a href="#552708" title="ParallelMatching.this.global.Type">prefix</a>.<a href="../symtab/Types.scala.html#30179" title="=&gt; ParallelMatching.this.global.Symbol">termSymbol</a>)
      })
    
      <a href="../transform/ExplicitOuter.scala.html#79194" title="(clazz: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.Symbol">outerAccessor</a>(<a href="#552672" title="ParallelMatching.this.global.Type">tpe2test</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; ParallelMatching.this.global.Symbol">typeSymbol</a>) <span title="ParallelMatching.this.global.Tree" class="keyword">match</span> {
        <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a href="../symtab/Symbols.scala.html#26134" title="object ParallelMatching.this.global.NoSymbol">NoSymbol</a> =&gt; <a href="#79282" title="(body: =&gt; Unit)Unit">ifDebug</a>(<a href="TransMatcher.scala.html#79166" title="=&gt; ParallelMatching.this.global.CompilationUnit">cunit</a>.<a href="../CompilationUnits.scala.html#45456" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">warning</a>(<a href="#552673" title="ParallelMatching.this.global.Tree">scrut</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;no outer acc for &quot;</span> + <a href="#552672" title="ParallelMatching.this.global.Type">tpe2test</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; ParallelMatching.this.global.Symbol">typeSymbol</a>)) ; <a href="#552671" title="ParallelMatching.this.global.Tree">cond</a>
        <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a title="ParallelMatching.this.global.Symbol" id="552737">outerAcc</a> =&gt; <a href="../ast/TreeDSL.scala.html#45068" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">cond</a> AND ((<a href="../ast/TreeDSL.scala.html#45085" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.CODE.SelectStart">(</a><a href="../ast/TreeDSL.scala.html#45089" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.gen.global.Tree">scrut</a> <a href="../ast/TreeDSL.scala.html#42538" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.TreeMethods">AS_ANY</a> <a href="#552672" title="ParallelMatching.this.global.Type">tpe2test</a>) <a href="../ast/TreeDSL.scala.html#44723" title="(args: ParallelMatching.this.global.Tree*)ParallelMatching.this.global.Apply">DOT</a> <a href="#552737" title="ParallelMatching.this.global.Symbol">outerAcc</a>)<a href="../ast/TreeDSL.scala.html#45070" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Apply">(</a>) ANY_EQ <a href="#552677" title="ParallelMatching.this.global.Tree">theRef</a>)
      }
    }
  }
}

        </pre>
    </body>
</html>